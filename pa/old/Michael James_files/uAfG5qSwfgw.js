if (self.CavalryLogger) { CavalryLogger.start_js(["cXjm1"]); }

__d("AssetHorizontalAlignmentType",[],(function a(b,c,d,e,f,g){f.exports={LEFT:"left",RIGHT:"right",CENTER:"center"};}),null);
__d("AssetVerticalAlignmentType",[],(function a(b,c,d,e,f,g){f.exports={TOP:"top",BOTTOM:"bottom",CENTER:"center"};}),null);
__d("FrameEditorSupportedGeneratedText",[],(function a(b,c,d,e,f,g){f.exports={"\u0025AIRPORT_CODE\u0025":"Airport code","\u0025City_Name\u0025":"City name","\u0025CITY_NAME\u0025":"City name (all caps)"};}),null);
__d("FXEntMediaEffectStatus",[],(function a(b,c,d,e,f,g){f.exports={ACTIVE:"active",ARCHIVED:"archived",COMPLETED:"completed",DISABLED:"disabled",DRAFT:"draft",INACTIVE:"inactive",IN_REVIEW:"in_review",NOT_APPROVED:"not_approved",SCHEDULED:"scheduled"};}),null);
__d("FXMediaEffectType",[],(function a(b,c,d,e,f,g){f.exports={FRAME:"frame",GENERIC:"generic",MSQRD_MASK:"msqrd_mask",PARTICLE_EFFECT:"particle_effect",PROFILE_FRAME:"profile_frame",SHADER_FILTER:"shader_filter",STYLE_TRANSFER:"style_transfer",UNDERLAY:"underlay",WATERMARK:"watermark",PROFILE_OVERLAY_MASK_DEPRECATED:"profile_overlay_mask_DEPRECATED",TEST_MEDIA_EFFECT:"test_media_effect",FLT_TEST_MEDIA_EFFECT:"flt_test_media_effect"};}),null);
__d("MediaEffectErrorCode",[],(function a(b,c,d,e,f,g){f.exports={HAS_DISALLOWED_LOCATION:"has_disallowed_location"};}),null);
__d("MediaEffectFlowType",[],(function a(b,c,d,e,f,g){f.exports={BASIC_HUB:"basic_hub",EVENT:"event"};}),null);
__d("MediaEffectProfilePolicy",[],(function a(b,c,d,e,f,g){f.exports={SELF_LOCATION_ONLY:"self_location_only",LOCATION_PROHIBITED:"location_prohibited"};}),null);
__d("MediaEffectWebdriverIDs",[],(function a(b,c,d,e,f,g){f.exports={LWE_EFFECT_OWNER_POPOVER_BUTTON:"lwe_effect_owner_popover_button"};}),null);
__d("OzConstants",[],(function a(b,c,d,e,f,g){f.exports={AUTHOR_TYPES:{BOT:"bot",TRAINER:"trainer",USER:"user"},ATTS:{COMMAND:"\u0040COMMAND",IMAGE:"image",SUGG:"\u0040SUGG",TEMPLATE:"template",SURVEY:"survey",QUICK_REPLIES:"\u0040QUICK_REPLIES",OPENTABLEQR:"opentableQuickReply"},SESSION_INFO_EVENT:"iframenonce_fb_session_info",TOKENS:{USER_FIRST_NAME:"user-first-name"},REMINDERS:{RANGE_IN_YEARS:5},M_FBIDS:{M:"881263441913087",M_DEV:"1579802578966277",P:"506060876211905"}};}),null);
__d("PlaceSearchSuppressionVersion",[],(function a(b,c,d,e,f,g){f.exports={ADS_TARGETING:"ads_targeting_suppression",CAMERA_LOCATION_FRAMES:"camera_location_frames_suppression",GRAPH_API:"graph_api_suppression",MAIN_TYPEAHEAD:"main_typeahead_suppression",QUERIED_CHECKIN:"queried_checkin_suppression",QUERYLESS_CHECKIN:"queryless_checkin_suppression",SET_SEARCH:"set_search_suppression",SUGGESTIFIER:"suggestifier_suppression",PROD_SUPPRESSION:"prod_suppression"};}),null);
__d("TextAssetFontName",[],(function a(b,c,d,e,f,g){f.exports={HELVETICA:"helvetica",IMPACT:"impact",TIMES_NEW_ROMAN:"times new roman"};}),null);
__d('AdsCommonLocalMapUtils',[],(function a(b,c,d,e,f,g){'use strict';var h='#4D6AA4',i='#3b5998',j='#dc3847',k=19,l=1,m={KILOMETERS_TO_METERS:1000,MILES_TO_METERS:1609.34,ZOOM_MAX:k,ZOOM_MIN:l,LEAFLET_TARGET_CIRCLE_OPTIONS:{color:h,clickable:false,fillOpacity:30/255,opacity:95/255,weight:1},LEAFLET_TARGET_MARKER_OPTIONS:{color:'#fff',fillColor:h,fillOpacity:1,opacity:1,radius:4,weight:2},LEAFLET_TARGET_REGION_INCLUDE_OPTIONS:{color:i,clickable:false,opacity:.5,fillColor:i,fillOpacity:.11,weight:1,noClip:true},LEAFLET_TARGET_HIGHLIGHT_REGION_INCLUDE_OPTIONS:{color:i,clickable:false,opacity:.5,fillColor:i,fillOpacity:.22,weight:1,noClip:true},LEAFLET_TARGET_REGION_EXCLUDE_OPTIONS:{color:j,clickable:false,opacity:.5,fillColor:j,fillOpacity:.11,weight:1,noClip:true},LEAFLET_TARGET_HIGHLIGHT_REGION_EXCLUDE_OPTIONS:{color:j,clickable:false,opacity:.5,fillColor:j,fillOpacity:.22,weight:1,noClip:true},LEAFLET_TILES_OPTIONS:{maxZoom:k,minZoom:l},LEAFLET_MARKER_ICON_OPTIONS:{iconSize:[25,32],iconAnchor:[12,32]},LEAFLET_MARKER_LOCATION_PIN_ICON_SELECTED_OPTIONS:{iconSize:[22,27],iconAnchor:[11,27]},LEAFLET_MARKER_LOCATION_PIN_ICON_NOT_SELECTED_OPTIONS:{iconSize:[13,13],iconAnchor:[6,13]},getBestZoom:function n(o,p,q,r,s){var t=o/180*Math.PI,u=Math.min(q,r),v=60000/800*u/s*Math.cos(t),w=function y(z){return Math.log(z)/Math.LN2;},x=10+Math.floor(w(v));return x;},getRadiusInMeters:function n(o,p){if(p==='kilometer')return o*m.KILOMETERS_TO_METERS;return o*m.MILES_TO_METERS;}};f.exports=m;}),null);
__d('AdsTargetingLocationMapMetaRecord',['cx','AdsCommonLocalMapUtils','AdsTargetingLocationUtils','GeoCoordinates','immutable','leaflet','LeafletUtils','LocationConstants','Map','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={},l=new (c('Map'))(),m=350,n={NONE:0,SHIFT_LEFT:-1,SHIFT_RIGHT:1};i=babelHelpers.inherits(o,c('immutable').Record({center:null,circleCenter:null,coordinateLists:null,geoLocation:null,icon:null,meta:null,name:null,popup:null,radius:0}));j=i&&i.prototype;function o(p){j.constructor.call(this,p);}o.prototype.hashCode=function(){var p=c('AdsTargetingLocationUtils').getUniqueKey(this.geoLocation);if(!l.has(p))l.set(p,c('AdsTargetingLocationUtils').getHashCode(this.geoLocation));return c('nullthrows')(l.get(p));};o.fromGeoLocations=function(p,q){var r=[];c('LocationConstants').locationTypes.forEach(function(s){(p[s]||[]).forEach(function(t){if(t.latitude==null||t.longitude==null)return;r.push(this.fromGeoLocationCached(t,q(t)));}.bind(this));}.bind(this));return c('immutable').Set(r);};o.fromGeoLocationCached=function(p,q){var r=c('AdsTargetingLocationUtils').getUniqueKey(p);if(!k[r])k[r]=this.fromGeoLocation(p,q);return k[r];};o.fromGeoLocation=function(p,q){var r=[],s=0,t=new (c('GeoCoordinates'))(Number(p.latitude),Number(p.longitude));if(p.polygons&&p.polygons.length)r=this.generatePolygonLists(p.polygons);if(p.radius&&p.distance_unit)s=c('AdsTargetingLocationUtils').getRadiusInMeters(p.radius,p.distance_unit);return new o({center:t,coordinateLists:c('immutable').List(r),geoLocation:p,icon:null,meta:q,name:p.name,popup:null,radius:s});};o.generatePolygonLists=function(p){var q=c('leaflet').latLngBounds(p),r=n.NONE;if(q.getEast()-q.getWest()>m){var s=this.boundsForShiftedMultipolygons(p,n.SHIFT_LEFT),t=this.boundsForShiftedMultipolygons(p,n.SHIFT_RIGHT),u=Math.abs(q.getEast()-q.getWest()),v=Math.abs(s.getEast()-s.getWest()),w=Math.abs(t.getEast()-t.getWest());if(v<=u||w<=u)if(Math.abs(s.getCenter().lng)<=Math.abs(t.getCenter().lng)){r=n.SHIFT_LEFT;}else r=n.SHIFT_RIGHT;}var x=[];p.forEach(function(y){var z=[];y.forEach(function(aa){z.push(new (c('GeoCoordinates'))(Number(aa.lat),this.shiftLongitude(c('LeafletUtils').wrapLongitude(Number(aa.lng)),r)));}.bind(this));x.push(c('immutable').List(z));}.bind(this));return x;};o.shiftLongitude=function(p,q){if(q===n.SHIFT_LEFT){p=p<0?p:p-360;}else if(q===n.SHIFT_RIGHT)p=p>0?p:p+360;return p;};o.boundsForShiftedMultipolygons=function(p,q){var r=[];p.forEach(function(s){var t=[];s.forEach(function(u){t.push(c('LeafletUtils').toLatLng(new (c('GeoCoordinates'))(Number(u.lat),this.shiftLongitude(c('LeafletUtils').wrapLongitude(Number(u.lng)),q))));}.bind(this));r.push(t);}.bind(this));return c('leaflet').latLngBounds(r);};o.iconForSingleLocationSelected=function(){return c('leaflet').divIcon(babelHelpers['extends']({},c('AdsCommonLocalMapUtils').LEAFLET_MARKER_LOCATION_PIN_ICON_SELECTED_OPTIONS,{className:"_tl9"}));};o.iconForSingleLocationNotSelected=function(){return c('leaflet').divIcon(babelHelpers['extends']({},c('AdsCommonLocalMapUtils').LEAFLET_MARKER_LOCATION_PIN_ICON_NOT_SELECTED_OPTIONS,{className:"_tla"}));};f.exports=o;}),null);
__d('AdsTargetingLocationClusterRecord',['cx','fbt','invariant','AdsTargetingLocationMapMetaRecord','GeoCoordinates','immutable','leaflet','LegacyMapCoordinate','LocationConstants','MapRects','Rect','Vector'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('LocationConstants').Aggregation,n=m.AGGREGATION_RADIUS,o=m.LARGE_CLUSTER_THRESHOLD,p=m.MEDIUM_CLUSTER_THRESHOLD,q=m.SMALL_CLUSTER_THRESHOLD;k=babelHelpers.inherits(r,c('immutable').Record({center:null,members:c('immutable').Set(),radius:0,rect:null}));l=k&&k.prototype;r.fromSingleRecord=function(s,t){var u=this.calculateAbsoluteCenter(s.geoLocation.latitude,s.geoLocation.longitude,t);return new r({center:u,members:c('immutable').Set.of(s),radius:n,rect:new (c('Rect'))(u.y,u.x,u.y,u.x)});};r.toSingleRecordWithOptions=function(s,t,u,v,w){if(u||s.members.size>1){var x=c('LegacyMapCoordinate').fromMap(s.center.x,s.center.y,t),y=new (c('GeoCoordinates'))(x.getLatitude(),x.getLongitude()),z=w(s),aa=0,ba={center:y,key:this.keyFromKeys(s.members.map(this.memberToKey).toArray()),name:z,radius:aa,type:c('LocationConstants').CUSTOM_LOCATIONS},ca=this.iconForCluster(v(s)),da=s.members.map(function(ea){return ea.meta;});return new (c('AdsTargetingLocationMapMetaRecord'))({center:y,coordinateLists:null,geoLocation:ba,icon:ca,meta:da,name:z,popup:null,radius:aa});}return s.members.first();};r.countFromCluster=function(s){return s.members.size;};r.nameFromCluster=function(s){return i._("{count} Locations",[i.param('count',s.members.size)]);};r.toSingleRecord=function(s,t){return this.toSingleRecordWithOptions(s,t,false,this.countFromCluster,this.nameFromCluster);};r.memberToKey=function(s){return s.geoLocation.key;};r.keyFromKeys=function(s){return s.join('-');};r.keysFromKey=function(s){return s.split('-');};r.iconForCluster=function(s){var t=[0,18],u="_n9c",v=r.markerIconSizeForCluster(s);v=[v,v];return c('leaflet').divIcon({className:u,html:s,iconSize:v,popupAnchor:t});};r.markerIconSizeForCluster=function(s){if(s==null||s<q){return 24;}else if(s<p){return 36;}else if(s<o){return 48;}else return 60;};r.markerRadiusForCluster=function(s){if(s==null||s<=1){return 100;}else if(s<q){return 10000;}else if(s<p){return 40000;}else if(s<o){return 70000;}else return 100000;};r.calculateAbsoluteCenter=function(s,t,u){return c('LegacyMapCoordinate').fromLatLong(s,t).getMapXY(u);};r.combine=function(s,t){s.asMutable()===s||j(0);s.rect=c('MapRects').boundingBox(s.rect,t.rect);s.radius=Math.max(s.radius,t.radius);s.center=s.rect.getCenter();s.members=s.members.union(t.members);};function r(){k.apply(this,arguments);}f.exports=r;}),null);
__d('AdsTargetingAggregatedMapUtils',['AdsTargetingLocationMapMetaRecord','AdsTargetingLocationClusterRecord','immutable','MapAggregation'],(function a(b,c,d,e,f,g){'use strict';function h(k,l,m,n){var o=k.map(function(r){return c('AdsTargetingLocationClusterRecord').fromSingleRecord(r,l).asMutable();}).toArray(),p=new (c('MapAggregation'))().aggregate(o,c('AdsTargetingLocationClusterRecord').combine),q=p.map(function(r){return (c('AdsTargetingLocationClusterRecord').toSingleRecordWithOptions(r,l,k.size!==p.length,m||c('AdsTargetingLocationClusterRecord').countFromCluster,n||c('AdsTargetingLocationClusterRecord').nameFromCluster));});return c('immutable').Set(q);}function i(k){return c('immutable').Set(c('AdsTargetingLocationClusterRecord').keysFromKey(k));}var j={aggregateMapRecords:h,extractRecordKey:c('AdsTargetingLocationClusterRecord').memberToKey,splitClusterKey:i};f.exports=j;}),null);
__d('AdsTargetingLocationInlineMapUtils',['GeoCoordinates','immutable','leaflet','LeafletUtils','LeafletView','LocationConstants'],(function a(b,c,d,e,f,g){'use strict';var h=10000;function i(m){var n=void 0;m.forEach(function(o){var p=void 0;if(o.center&&o.radius){var q=o.center,r=o.radius;p=c('LeafletUtils').circleBounds(c('LeafletUtils').toLatLng(q),r);}else if(o.coordinateLists&&o.coordinateLists.size){o.coordinateLists.forEach(function(s){var t=s.map(function(v){return c('LeafletUtils').toLatLng(new (c('GeoCoordinates'))(v.latitude,v.longitude));}).toArray(),u=c('leaflet').latLngBounds(t);p=undefined===p?u:p.extend(u);});}else if(o.center)p=c('LeafletUtils').circleBounds(c('LeafletUtils').toLatLng(o.center),h);if(undefined===n){n=p;}else n.extend(p);});return n;}function j(m,n){var o=i(n);if(!o)return m;return m.setCenter(c('LeafletUtils').fromLatLng(o.getCenter()));}function k(m,n){return new (c('LeafletView'))({center:m.center,zoom:c('LocationConstants').getNextZoomRangeStart(n)});}var l={centerToLocations:j,getAllBounds:i,zoomToNextRange:k};f.exports=l;}),null);
__d('AdsTargetingLocationMapPopup',['cx','FbtResult','React','isEmpty','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={showingPopoverMenu:false},this.$AdsTargetingLocationMapPopup1=function(){var r=c('isEmpty')(this.props.menuItems);return (c('React').createElement('div',null,c('React').createElement('div',{className:(r?"_2e-k":'')+(!r?' '+"_37vz":'')},this.props.label),r?null:this.$AdsTargetingLocationMapPopup2()));}.bind(this),this.$AdsTargetingLocationMapPopup2=function(){var r="_37v-";return (c('React').createElement('div',{className:"_37v_"},c('React').createElement('button',{className:r,type:'button',onClick:this.$AdsTargetingLocationMapPopup3},this.props.children),this.$AdsTargetingLocationMapPopup4()));}.bind(this),this.$AdsTargetingLocationMapPopup5=function(r){return !!(this.props.menuItemsDisabled&&this.props.menuItemsDisabled[r]);}.bind(this),this.$AdsTargetingLocationMapPopup4=function(){if(!this.state.showingPopoverMenu)return null;var r=c('nullthrows')(this.props.menuItems),s="_37w0",t=Object.keys(r).map(function(u){var v=this.$AdsTargetingLocationMapPopup6.bind(this,u),w=r[u],x=this.$AdsTargetingLocationMapPopup5(u);return (c('React').createElement('button',{className:s,disabled:x,key:u,onClick:v},w));}.bind(this));return (c('React').createElement('div',{className:"_37w1"},t));}.bind(this),this.$AdsTargetingLocationMapPopup3=function(){this.setState({showingPopoverMenu:!this.state.showingPopoverMenu});}.bind(this),this.$AdsTargetingLocationMapPopup6=function(r){this.setState({showingPopoverMenu:false});this.props.onMenuItemSelect(r,this.props.location);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('div',{className:"_37vy"},this.$AdsTargetingLocationMapPopup1());};l.propTypes={label:k.oneOfType([k.string,k.instanceOf(c('FbtResult'))]).isRequired,location:k.object.isRequired,menuItems:k.object,menuItemsDisabled:k.object,onMenuItemSelect:k.func.isRequired};f.exports=l;}),null);
__d('AdsTargetingLocationTypeAliases',[],(function a(b,c,d,e,f,g){'use strict';var h={DEFAULT:'DEFAULT',INVOKE_CALLBACK_ON_SINGLE_NODE:'INVOKE_CALLBACK_ON_SINGLE_NODE',NONE:'NONE',SHOW_POPUP:'SHOW_POPUP',ZOOM_TO_MARKER:'ZOOM_TO_MARKER',ZOOM_TO_NEXT_RANGE:'ZOOM_TO_NEXT_RANGE'},i={CLICK_BEHAVIORS:h};f.exports=i;}),null);
__d('LeafletCircleMarker.react',['GeoCoordinates','leaflet','LeafletLayer.react','LeafletPath','LeafletUtils','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.mutate=function(l,m,n){var o=m.options||{},p=o.radius,q=babelHelpers.objectWithoutProperties(o,['radius']),r=n.options||{},s=r.prevRadius,t=babelHelpers.objectWithoutProperties(r,['prevRadius']);if(!c('LeafletPath').mutateOptions(l,q,t))return false;c('LeafletLayer.react').mutateEventHandlers(l,m.eventHandlers,n.eventHandlers);if(m.center!==n.center)l.setLatLng(c('LeafletUtils').toLatLng(m.center));if(p!==s)l.setRadius(m.radius);return true;};k.toLayer=function(l){var m=c('leaflet').circleMarker(c('LeafletUtils').toLatLng(l.center),l.options);c('LeafletLayer.react').addEventHandlers(m,l.eventHandlers);return m;};k.prototype.render=function(){return null;};function k(){h.apply(this,arguments);}k.propTypes={options:j.object,eventHandlers:j.object,center:j.instanceOf(c('GeoCoordinates')).isRequired};f.exports=k;}),null);
__d('LeafletMultiPolyline.react',['leaflet','LeafletLayer.react','LeafletPolyline.react','LeafletUtils','immutable','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.coordinateListsToLatLngs=function(l){return l.toSeq().map(function(m){return m.toSeq().map(c('LeafletUtils').toLatLng).toArray();}).toArray();};k.mutate=function(l,m,n){if(!c('LeafletPolyline.react').mutateOptions(l,m.options,n.options))return false;c('LeafletLayer.react').mutateEventHandlers(l,m.eventHandlers,n.eventHandlers);if(!c('immutable').is(m.coordinateLists,n.coordinateLists))l.setLatLngs(k.coordinateListsToLatLngs(m.coordinateLists));return true;};k.toLayer=function(l){var m=c('leaflet').multiPolyline(k.coordinateListsToLatLngs(l.coordinateLists),l.options);c('LeafletLayer.react').addEventHandlers(m,l.eventHandlers);return m;};k.prototype.render=function(){return null;};function k(){h.apply(this,arguments);}k.propTypes={options:j.object,eventHandlers:j.object,coordinateLists:j.instanceOf(c('immutable').List).isRequired};f.exports=k;}),null);
__d('LeafletMultiPolygon.react',['immutable','leaflet','LeafletLayer.react','LeafletMultiPolyline.react','React'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.mutate=function(l,m,n){'use strict';return c('LeafletMultiPolyline.react').mutate(l,m,n);};k.toLayer=function(l){'use strict';var m=c('leaflet').multiPolygon(c('LeafletMultiPolyline.react').coordinateListsToLatLngs(l.coordinateLists),l.options);c('LeafletLayer.react').addEventHandlers(m,l.eventHandlers);return m;};k.prototype.render=function(){'use strict';return null;};function k(){'use strict';h.apply(this,arguments);}k.propTypes={options:j.object,eventHandlers:j.object,coordinateLists:j.instanceOf(c('immutable').List).isRequired};f.exports=k;}),null);
__d('AdsTargetingLocationInlineMap.react',['cx','fbt','ix','AdsInterfacesLogger','AdsCommonLocalMapUtils','AdsTargetingLocationLoggingEvents','AdsTargetingLocationMapPopup','BanzaiODS','BUIAdoptionButton.react','FBOverlayElement.react','FBTilesMap.react','FBTilesMapZoomOverlay.react','GeoCoordinates','Image.react','immutable','leaflet','LeafletCircle.react','LeafletCircleMarker.react','LeafletMarker.react','LeafletMultiPolygon.react','LeafletPopup.react','LeafletUtils','LeafletView','LocationConstants','React','TilesMapConfig','XUIButton.react','areEqual','emptyFunction','performanceNow','AdsTargetingLocationInlineMapUtils','AdsTargetingLocationTypeAliases'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=c('AdsTargetingLocationInlineMapUtils').centerToLocations,o=c('AdsTargetingLocationInlineMapUtils').getAllBounds,p=c('AdsTargetingLocationInlineMapUtils').zoomToNextRange,q=c('AdsTargetingLocationTypeAliases').CLICK_BEHAVIORS,r=new (c('LeafletView'))({center:new (c('GeoCoordinates'))(0,0),zoom:1}),s=1,t=2,u=c('React').createElement(c('Image.react'),{src:j("images\/ads\/common\/zoom_icon\/zoom-to-fit.png"),width:'12'}),v=c('React').createElement(c('Image.react'),{src:j("images\/ads\/common\/expand\/icon_collapse.png"),width:'16'}),w={INCLUDE:i._("Include"),EXCLUDE:i._("Exclude"),DELETE:i._("Delete")},x={DELETE:i._("Delete")},y=0,z=0;k=babelHelpers.inherits(aa,c('React').Component);l=k&&k.prototype;function aa(){var ba,ca;for(var da=arguments.length,ea=Array(da),fa=0;fa<da;fa++)ea[fa]=arguments[fa];return ca=(ba=l.constructor).call.apply(ba,[this].concat(ea)),this.state={locating:false,mapOptions:{scrollWheelZoom:!this.props.disableScrollWheelZoom,maxBounds:this.props.maxBounds},size:null,view:this.props.view||r,popupLocationKey:null},this.$AdsTargetingLocationInlineMap1=function(ga){if(ga.coordinateLists.size)return null;var ha=c('LocationConstants').getPluralLocationType(ga.geoLocation.type);switch(ha){case c('LocationConstants').COUNTRIES:return new (c('LeafletView'))({center:ga.center,zoom:t});case c('LocationConstants').COUNTRY_GROUPS:return new (c('LeafletView'))({center:ga.center,zoom:s});default:return null;}},this.$AdsTargetingLocationInlineMap8=function(ga,ha){if(ha){return !ga?c('AdsCommonLocalMapUtils').LEAFLET_TARGET_HIGHLIGHT_REGION_INCLUDE_OPTIONS:c('AdsCommonLocalMapUtils').LEAFLET_TARGET_HIGHLIGHT_REGION_EXCLUDE_OPTIONS;}else return !ga?c('AdsCommonLocalMapUtils').LEAFLET_TARGET_REGION_INCLUDE_OPTIONS:c('AdsCommonLocalMapUtils').LEAFLET_TARGET_REGION_EXCLUDE_OPTIONS;},this.$AdsTargetingLocationInlineMap9=function(ga,ha){if(ha){return ga?"_s6h":"_s6i";}else return ga?"_3i44":"_3i45";},this.$AdsTargetingLocationInlineMap4=function(ga,ha,ia,ja){var ka=this.props.menuItems||(this.props.onlyInclusion?x:w),la=void 0;if(!this.props.menuItems)la=ha?{INCLUDE:false,EXCLUDE:true,DELETE:false}:{INCLUDE:true,EXCLUDE:false,DELETE:false};ga.forEach(function(ma,na){var oa=this.state.popupLocationKey===ma.geoLocation.key,pa=this.props.highlightLocations.contains(ma)||oa,qa=(pa?'h':'')+(ha?'-':'')+ma.geoLocation.key,ra=this.$AdsTargetingLocationInlineMap8(ha,pa),sa=[],ta=c('React').createElement(c('LeafletPopup.react'),{options:{autoPan:false,closeButton:false,className:"_1l0n",maxWidth:500}},ma.popup||c('React').createElement(c('AdsTargetingLocationMapPopup'),{label:this.$AdsTargetingLocationInlineMap10(ma.geoLocation),location:ma.geoLocation,menuItems:ka,menuItemsDisabled:la,onMenuItemSelect:this.props.onPopupMenuItemSelect})),ua=oa||[q.DEFAULT,q.SHOW_POPUP].includes(this.props.clickBehavior)?ta:undefined,va=this.$AdsTargetingLocationInlineMap11(ma),wa=function eb(fb){if(oa)fb.target.openPopup();},xa=function(eb){if(this.state.popupLocationKey!==ma.geoLocation.key)this.setState({popupLocationKey:ma.geoLocation.key});}.bind(this),ya=function(eb){if(this.state.popupLocationKey===ma.geoLocation.key&&oa)this.setState({popupLocationKey:null});}.bind(this),za=function(eb){if(this.props.showPopupOnHover)xa(eb);}.bind(this),ab=function(eb){if(this.props.showPopupOnHover)ya(eb);}.bind(this),bb=ma.icon||c('leaflet').divIcon(babelHelpers['extends']({},c('AdsCommonLocalMapUtils').LEAFLET_MARKER_ICON_OPTIONS,{className:this.$AdsTargetingLocationInlineMap9(ha,pa)}));sa.push(c('React').createElement(c('LeafletMarker.react'),{coordinates:ma.center,eventHandlers:{add:wa,click:va,mouseover:za,mouseout:ab,popupclose:ya,popupopen:xa},key:'m'+qa,options:{clickable:true,icon:bb,zIndexOffset:pa?1000:0},popup:ua}));var cb=false;if(ma.coordinateLists&&ma.coordinateLists.size){sa.push(c('React').createElement(c('LeafletMultiPolygon.react'),{coordinateLists:ma.coordinateLists,key:'p'+qa,options:ra}));cb=true;}var db=ma.circleCenter||ma.center;if(db&&ma.radius){sa.push(c('React').createElement(c('LeafletCircle.react'),{center:db,key:'c'+qa,options:ra,radius:ma.radius}));if(!cb)sa.push(c('React').createElement(c('LeafletCircleMarker.react'),{center:db,key:'cm'+qa,options:c('AdsCommonLocalMapUtils').LEAFLET_TARGET_MARKER_OPTIONS}));}if(pa){ja.push.apply(ja,sa);}else ia.push.apply(ia,sa);}.bind(this));}.bind(this),this.$AdsTargetingLocationInlineMap10=function(ga){return ga.name;},this.$AdsTargetingLocationInlineMap12=function(){c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_ZOOM_IN},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);var ga=this.state.view;if(ga.zoom<c('TilesMapConfig').ZOOM_RANGE.MAX)this.$AdsTargetingLocationInlineMap3(ga.setZoom(ga.zoom+1));}.bind(this),this.$AdsTargetingLocationInlineMap13=function(){c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_ZOOM_OUT},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);var ga=this.state.view;if(ga.zoom>c('TilesMapConfig').ZOOM_RANGE.MIN)this.$AdsTargetingLocationInlineMap3(ga.setZoom(ga.zoom-1));}.bind(this),this.$AdsTargetingLocationInlineMap14=function(){c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_ZOOM_TO_FIT},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);var ga=this.$AdsTargetingLocationInlineMap2(this.state.size,this.props.locations.union(this.props.excludedLocations));this.$AdsTargetingLocationInlineMap3(ga);}.bind(this),this.$AdsTargetingLocationInlineMap15=function(){var ga=this.state.view.zoom<c('TilesMapConfig').ZOOM_RANGE.MAX?this.$AdsTargetingLocationInlineMap12:undefined,ha=this.state.view.zoom>c('TilesMapConfig').ZOOM_RANGE.MIN?this.$AdsTargetingLocationInlineMap13:undefined,ia=!this.props.disableCollapseButton&&c('React').createElement('div',{className:"_qh2"},c('React').createElement(c('XUIButton.react'),{className:"_qh3",image:v,type:'button',onClick:this.props.onCollapseMap}));return (c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right',key:'zoomControls',vertical:'top'},c('React').createElement('div',null,ia,c('React').createElement(c('FBTilesMapZoomOverlay.react'),{className:"_3-8j",onZoomIn:ga,onZoomOut:ha}),c('React').createElement('div',{className:"_qh4"},c('React').createElement(c('XUIButton.react'),{className:"_qh5",image:u,type:'button',onClick:this.$AdsTargetingLocationInlineMap14})))));}.bind(this),this.$AdsTargetingLocationInlineMap16=function(){return (c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right',key:'addLocation',vertical:'bottom'},c('React').createElement('div',null,c('React').createElement(c('BUIAdoptionButton.react'),{disabled:this.props.addingLocation,icon:c('React').createElement(c('Image.react'),{src:this.props.addLocationMode===c('LocationConstants').INCLUDE?j("images\/ads\/common\/pins\/drop-pin-button-include.png"):j("images\/ads\/common\/pins\/drop-pin-button-exclude.png")}),isDepressed:this.state.locating,label:i._("Drop Pin"),style:{marginBottom:'12px',marginRight:'12px'},type:'button',onClick:this.$AdsTargetingLocationInlineMap17}))));}.bind(this),this.$AdsTargetingLocationInlineMap7=function(){if(this.props.hideAllControls)return null;return this.props.enableDropPin?[this.$AdsTargetingLocationInlineMap15(),this.$AdsTargetingLocationInlineMap16()]:[this.$AdsTargetingLocationInlineMap15()];}.bind(this),this.$AdsTargetingLocationInlineMap5=function(event){if(this.state.locating){this.setState({locating:false});this.props.onAddLocationFromMap(new (c('GeoCoordinates'))(event.latlng.lat,c('LeafletUtils').wrapLongitude(event.latlng.lng)));}}.bind(this),this.$AdsTargetingLocationInlineMap17=function(ga){this.setState({locating:!this.state.locating});}.bind(this),this.$AdsTargetingLocationInlineMap2=function(ga,ha){if(!ga||0===ha.size)return this.state.view;var ia=o(ha);if(!ia)return this.state.view;var ja=c('LeafletUtils').fitBounds(ia,{width:ga.x,height:ga.y},{zoomRange:[0,20]});return ja;}.bind(this),this.$AdsTargetingLocationInlineMap6=function(ga){var ha=this.state.view;if(this.props.centerLocations&&this.props.centerLocations.size>0){ha=n(this.state.view,this.props.centerLocations);}else if(this.props.locations.size>0||this.props.excludedLocations.size>0||this.props.fitLocations.size>0)ha=this.$AdsTargetingLocationInlineMap2(ga,this.props.locations.union(this.props.excludedLocations).union(this.props.fitLocations));this.$AdsTargetingLocationInlineMap3(ha,ga);}.bind(this),this.$AdsTargetingLocationInlineMap3=function(ga,ha){var ia=ha||this.state.size;if(this.props.view){this.setState({size:ia});}else this.setState({view:ga,size:ia});if(this.props.onViewChange)this.props.onViewChange(ga,ia);}.bind(this),ca;}aa.prototype.componentWillMount=function(){y=c('performanceNow')();};aa.prototype.componentDidMount=function(){var ba=Math.floor(c('performanceNow')()-y);c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_MOUNTING_TIME},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);c('BanzaiODS').bumpEntityKey('ads_targeting_location','geo_location_map_mounting_time',ba);};aa.prototype.componentWillUpdate=function(ba,ca){z=c('performanceNow')();};aa.prototype.componentWillReceiveProps=function(ba){if(!c('LeafletUtils').areViewEqual(ba.view,this.props.view)){this.setState({view:ba.view||r});}else if(null!==this.state.size&&ba.fitLocations.size>0&&(ba.forceUpdate||!c('areEqual')(ba.fitLocations,this.props.fitLocations))){var ca=null;if(ba.fitLocations.size==1){var da=ba.fitLocations.first();ca=this.$AdsTargetingLocationInlineMap1(da);}if(!ca)ca=this.$AdsTargetingLocationInlineMap2(this.state.size,ba.fitLocations);this.$AdsTargetingLocationInlineMap3(ca);}};aa.prototype.shouldComponentUpdate=function(ba,ca){var da=ba.addLocationMode!==this.props.addLocationMode||!c('areEqual')(ba.highlightLocations,this.props.highlightLocations)||!c('areEqual')(ba.locations,this.props.locations)||!c('areEqual')(ba.excludedLocations,this.props.excludedLocations)||!c('LeafletUtils').areViewEqual(ba.view,this.props.view),ea=ca!==undefined&&(ca.size!=this.state.size||!c('LeafletUtils').areViewEqual(ca.view,this.state.view)||ca.popupLocationKey!==this.state.popupLocationKey||ca.locating!=this.state.locating);return da||ea;};aa.prototype.render=function(){var ba=null;if(this.state.locating){ba=this.props.addLocationMode===c('LocationConstants').INCLUDE?"_3aio":"_3aiw";}else ba="_3-cr";var ca=[],da=[];this.$AdsTargetingLocationInlineMap4(this.props.locations,false,ca,da);this.$AdsTargetingLocationInlineMap4(this.props.excludedLocations,true,ca,da);return c('React').createElement(c('FBTilesMap.react'),{className:ba,eventHandlers:{click:this.$AdsTargetingLocationInlineMap5},options:this.state.mapOptions,showReportButton:false,showZoomControls:false,view:this.state.view,onSizeSettled:this.$AdsTargetingLocationInlineMap6,onViewChange:this.$AdsTargetingLocationInlineMap3},this.$AdsTargetingLocationInlineMap7(),ca,da);};aa.prototype.$AdsTargetingLocationInlineMap18=function(ba){var ca=ba.meta;if(!this.props.onSingleNodeClick||c('immutable').Set.isSet(ca)&&ca.size!==1){this.$AdsTargetingLocationInlineMap19(ba);return;}var da=!c('immutable').Set.isSet(ca)?ca:ca.first();this.props.onSingleNodeClick(da.getID());};aa.prototype.$AdsTargetingLocationInlineMap11=function(ba){switch(this.props.clickBehavior){case q.DEFAULT:case q.ZOOM_TO_MARKER:return function(){return this.$AdsTargetingLocationInlineMap20(ba);}.bind(this);case q.ZOOM_TO_NEXT_RANGE:return function(){return this.$AdsTargetingLocationInlineMap19(ba);}.bind(this);case q.INVOKE_CALLBACK_ON_SINGLE_NODE:return function(){return this.$AdsTargetingLocationInlineMap18(ba);}.bind(this);default:return c('emptyFunction');}};aa.prototype.$AdsTargetingLocationInlineMap20=function(ba){var ca=this.$AdsTargetingLocationInlineMap2(this.state.size,c('immutable').Set.of(ba));this.$AdsTargetingLocationInlineMap3(ca);};aa.prototype.$AdsTargetingLocationInlineMap19=function(ba){this.$AdsTargetingLocationInlineMap3(p(ba,this.state.view.zoom));};aa.propTypes={addLocationMode:m.string.isRequired,addingLocation:m.bool,clickBehavior:m.oneOf(Object.keys(q)),disableCollapseButton:m.bool,disableScrollWheelZoom:m.bool,enableDropPin:m.bool.isRequired,excludedLocations:m.instanceOf(c('immutable').Set).isRequired,fitLocations:m.instanceOf(c('immutable').Set).isRequired,forceUpdate:m.bool,hideAllControls:m.bool,highlightLocations:m.instanceOf(c('immutable').Set).isRequired,locations:m.instanceOf(c('immutable').Set).isRequired,maxBounds:m.instanceOf(c('leaflet').LatLngBounds),menuItems:m.object,onlyInclusion:m.bool.isRequired,showPopupOnHover:m.bool,view:m.instanceOf(c('LeafletView')),onAddLocationFromMap:m.func.isRequired,onCollapseMap:m.func.isRequired,onPopupMenuItemSelect:m.func.isRequired,onViewChange:m.func};aa.defaultProps={clickBehavior:q.DEFAULT};f.exports=aa;}),null);
__d('AdsTargetingAggregatedMap.react',['AdsTargetingLocationInlineMap.react','FbtResult','immutable','leaflet','LeafletUtils','LeafletView','LocationConstants','AdsTargetingLocationMapMetaRecord','React','AdsTargetingAggregatedMapUtils','areEqual','emptyFunction','emptyObject','AdsTargetingLocationTypeAliases'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsTargetingAggregatedMapUtils').aggregateMapRecords,k=c('AdsTargetingAggregatedMapUtils').extractRecordKey,l=c('AdsTargetingAggregatedMapUtils').splitClusterKey,m=c('React').Component,n=c('React').PropTypes,o=c('AdsTargetingLocationTypeAliases').CLICK_BEHAVIORS,p=c('LocationConstants').Aggregation,q=p.MAX_LOCATIONS_SIZE,r=p.MIN_ZOOM_LEVEL_FOR_FILTERING;h=babelHelpers.inherits(s,m);i=h&&h.prototype;function s(t){i.constructor.call(this,t);this.$AdsTargetingAggregatedMap6=function(u,v){var w=this.props.onLocationsSelect;if(!w)return;w(this.$AdsTargetingAggregatedMap5(v));}.bind(this);this.$AdsTargetingAggregatedMap7=function(u,v){if(this.props.onViewChange)this.props.onViewChange(u,v);if(!v){if(!this.props.view)this.setState({view:u});return;}this.$AdsTargetingAggregatedMap2(this.props,u,v);}.bind(this);this.state={bounds:null,clusteredLocations:c('immutable').Set(),inRangeLocations:c('immutable').Set(),locationRecordMap:c('immutable').Map(),size:null,view:this.props.view};}s.prototype.render=function(){if(this.state.clusteredLocations.size>q)return null;return c('React').createElement('div',{style:{height:this.props.height}},this.$AdsTargetingAggregatedMap1());};s.prototype.componentWillReceiveProps=function(t){this.$AdsTargetingAggregatedMap2(t);};s.prototype.shouldComponentUpdate=function(t,u){var v=t.height!==this.props.height||!c('areEqual')(t.locationRecords,this.props.locationRecords)||!c('areEqual')(t.menuItems,this.props.menuItems)||!c('LeafletUtils').areViewEqual(t.view,this.props.view),w=u!==undefined&&(u.bounds&&!u.bounds.equals(this.state.bounds)||!c('areEqual')(u.clusteredLocations,this.state.clusteredLocations)||!c('LeafletUtils').areViewEqual(u.view,this.state.view));return v||w;};s.prototype.$AdsTargetingAggregatedMap3=function(){this.state.view&&this.state.view.zoom||null;};s.prototype.$AdsTargetingAggregatedMap4=function(t,u){if(u&&t)return c('LeafletUtils').getViewBounds(t,{width:u.x,height:u.y});return c('LeafletUtils').WHOLE_WORLD_BOUNDS;};s.prototype.$AdsTargetingAggregatedMap5=function(t){var u=l(t.key);return u.map(function(v){return this.state.locationRecordMap.get(v);}.bind(this));};s.prototype.$AdsTargetingAggregatedMap2=function(t,u,v){var w=t.view||u||this.state.view,x=v||this.state.size,y=this.$AdsTargetingAggregatedMap4(w,x),z=w&&w.zoom;if(z===undefined||!y)return;var aa=false;if(t.disableAggregation)aa=t.disableAggregation(z);var ba=void 0;if(z<r){ba=t.locationRecords;}else ba=t.locationRecords.filter(function(fa){return y.contains(c('LeafletUtils').toLatLng(fa.center));});var ca=z==this.state.zoom&&(ba.equals(this.state.inRangeLocations)||ba.map(k).equals(this.state.inRangeLocations.map(k))),da=this.state.locationRecordMap;if(!ca)da=c('immutable').Map().withMutations(function(fa){ba.forEach(function(ga){return fa.set(ga.geoLocation.key,ga);});});var ea=void 0;if(aa||ba.size<2){ea=ba;}else if(ca){ea=this.state.clusteredLocations;}else ea=j(ba,z,this.props.countFromCluster,this.props.nameFromCluster);this.setState({bounds:y,clusteredLocations:ea,inRangeLocations:ba,locationRecordMap:da,size:x,view:w});};s.prototype.$AdsTargetingAggregatedMap1=function(){var t=this.state.clusteredLocations.isEmpty()?this.props.locationRecords:this.state.clusteredLocations;return (c('React').createElement(c('AdsTargetingLocationInlineMap.react'),babelHelpers['extends']({addLocationMode:c('LocationConstants').INCLUDE,addingLocation:false,centerLocations:t,clickBehavior:this.props.clickBehavior,disableCollapseButton:this.props.disableCollapseButton,disableScrollWheelZoom:this.props.disableScrollWheelZoom,enableDropPin:false,excludedLocations:c('immutable').Set(),fitLocations:c('immutable').Set(),highlightLocations:c('immutable').Set(),locations:this.state.clusteredLocations,maxBounds:c('LeafletUtils').WHOLE_WORLD_BOUNDS,menuItems:this.props.menuItems||c('emptyObject'),onlyInclusion:true,showPopupOnHover:true,view:this.state.view||undefined,onAddLocationFromMap:c('emptyFunction'),onCollapseMap:c('emptyFunction'),onSingleNodeClick:this.props.onSingleNodeClick,onPopupMenuItemSelect:this.$AdsTargetingAggregatedMap6,onViewChange:this.$AdsTargetingAggregatedMap7},this.props.inlineMapProps)));};s.propTypes={clickBehavior:n.oneOf(Object.keys(o)),countFromCluster:n.func,disableAggregation:n.func,disableCollapseButton:n.bool,disableScrollWheelZoom:n.bool,height:n.number.isRequired,inlineMapProps:n.object,locationRecords:n.instanceOf(c('immutable').Set).isRequired,menuItems:n.shape({INCLUDE:n.oneOfType([n.instanceOf(c('FbtResult')),n.string]),EXCLUDE:n.oneOfType([n.instanceOf(c('FbtResult')),n.string]),DELETE:n.oneOfType([n.instanceOf(c('FbtResult')),n.string])}),nameFromCluster:n.func,view:n.instanceOf(c('LeafletView')),onLocationsSelect:n.func,onViewChange:n.func};s.defaultProps={clickBehavior:o.ZOOM_TO_NEXT_RANGE,inlineMapProps:{}};f.exports=s;}),null);
__d('AdsTargetingLocationMapRecord',['AdsTargetingLocationMapMetaRecord','immutable','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AdsTargetingLocationMapMetaRecord'));i=h&&h.prototype;j.fromGeoLocation=function(k){return c('AdsTargetingLocationMapMetaRecord').fromGeoLocation(k,undefined);};j.fromGeoLocationCached=function(k){return c('AdsTargetingLocationMapMetaRecord').fromGeoLocationCached(k,undefined);};j.fromGeoLocations=function(k){return c('AdsTargetingLocationMapMetaRecord').fromGeoLocations(k,c('emptyFunction'));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('AdsDayPartingHourBox.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$AdsDayPartingHourBox2=function(){this.props.onMouseEnter(this.props.day,this.props.hour);}.bind(this),this.$AdsDayPartingHourBox1=function(event){event.preventDefault();this.props.onMouseDown(this.props.day,this.props.hour);}.bind(this),this.$AdsDayPartingHourBox3=function(event){event.preventDefault();event.stopPropagation();this.props.onMouseUp(this.props.day,this.props.hour);}.bind(this),n;}l.prototype.render=function(){'use strict';var m=this.props.hour;return c('React').createElement('div',{className:(this.props.isSelected&&!this.props.isHighlighted?"hourStatus-selected":'')+(this.props.isSelected&&this.props.isHighlighted?' '+"_2bi6":'')+(!this.props.isSelected&&this.props.isHighlighted?' '+"_2bi7":'')+(' '+"_516l")+(' '+"_516m")+(m===0?' '+"_516n":'')+(m%3===2?' '+"_516o":'')+(m%3!==2&&m!==0?' '+"_516p":'')+(this.props.reducedWidth?' '+"_23gf":''),onMouseDown:this.$AdsDayPartingHourBox1,onMouseEnter:this.$AdsDayPartingHourBox2,onMouseUp:this.$AdsDayPartingHourBox3});};l.propTypes={day:k.number,hour:k.number.isRequired,isHighlighted:k.bool,isSelected:k.bool.isRequired,onMouseDown:k.func.isRequired,onMouseUp:k.func.isRequired,onMouseEnter:k.func.isRequired,reducedWidth:k.bool};f.exports=l;}),null);
__d('DayPartingGrid',['DayPartingUtils'],(function a(b,c,d,e,f,g){var h=c('DayPartingUtils').DAYS_IN_WEEK,i=c('DayPartingUtils').HOURS_IN_DAY;function j(k){'use strict';if(k){this.hours=new Array(h);for(var l=0;l<h;l++)this.hours[l]=k.hours[l].slice();this.everyDay=k.everyDay.slice();this.allDay=k.allDay.slice();}else{this.hours=this.$DayPartingGrid1();this.allDay=c('DayPartingUtils').createArray(h,function(){return false;});this.everyDay=c('DayPartingUtils').createArray(i,function(){return false;});}}j.prototype.set=function(k,l,m,n,o){'use strict';var p;if(m<k){p=k;k=m;m=p;}if(n<l){p=l;l=n;n=p;}for(var q=k;q<=m;q++){for(var r=l;r<=n;r++)this.hours[q][r]=o;this.$DayPartingGrid2(q);}for(r=l;r<=n;r++)this.$DayPartingGrid3(r);};j.prototype.setEveryDay=function(k,l,m){'use strict';if(l<k){var n=k;k=l;l=n;}this.set(0,k,h-1,l,m);};j.prototype.setAllDay=function(k,l,m){'use strict';if(l<k){var n=k;k=l;l=n;}this.set(k,0,l,i-1,m);};j.prototype.isSelected=function(k,l){'use strict';if(l===null)return !!this.allDay[k];if(k===null)return !!this.everyDay[l];return !!this.hours[k][l];};j.prototype.$DayPartingGrid2=function(k){'use strict';var l=true;for(var m=0;m<i;m++)if(this.hours[k][m]!==true){l=false;break;}this.allDay[k]=l;};j.prototype.$DayPartingGrid3=function(k){'use strict';var l=true;for(var m=0;m<h;m++)if(this.hours[m][k]!==true){l=false;break;}this.everyDay[k]=l;};j.prototype.getSchedule=function(){'use strict';var k=new Array(7);for(var l=0;l<h;l++){var m=this.toAPIDayIndex(l);k[m]=this.$DayPartingGrid4(l);}return c('DayPartingUtils').mergeDays(k);};j.prototype.getScheduleWithTimezoneType=function(k){'use strict';var l=new Array(7);for(var m=0;m<h;m++){var n=this.toAPIDayIndex(m);l[n]=this.$DayPartingGrid4(m);}var o=c('DayPartingUtils').mergeDays(l);return o.map(function(p){p.timezone_type=k;return p;});};j.prototype.$DayPartingGrid4=function(k){'use strict';var l=[],m=null,n=function q(r){if(m!==null)l.push({start_minute:m*60,end_minute:r*60});};for(var o=0;o<i;o++){var p=this.hours[k][o];if(m===null){if(p===true)m=o;}else if(p===false){n(o);m=null;}}if(m!==null)n(i);return l;};j.prototype.setSchedule=function(k){'use strict';var l=this.$DayPartingGrid1();k.forEach(function(o){o.days.forEach(function(p){var q=this.fromAPIDayIndex(p),r=o.start_minute/60,s=o.end_minute/60;for(var t=r;t<s;t++)l[q][t]=true;}.bind(this));}.bind(this));this.hours=l;for(var m=0;m<h;m++)this.$DayPartingGrid2(m);for(var n=0;n<i;n++)this.$DayPartingGrid3(n);return this;};j.prototype.toAPIDayIndex=function(k){'use strict';return (k+1)%c('DayPartingUtils').DAYS_IN_WEEK;};j.prototype.fromAPIDayIndex=function(k){'use strict';return (k+6)%c('DayPartingUtils').DAYS_IN_WEEK;};j.prototype.$DayPartingGrid1=function(){'use strict';return c('DayPartingUtils').createArray(h,function(){return c('DayPartingUtils').createArray(i,function(){return false;});});};f.exports=j;}),null);
__d('AdsDayPartingTableRow.react',['cx','fbt','AdsDayPartingHourBox.react','DateStrings','DayPartingGrid','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$AdsDayPartingTableRow1=function(){if(this.props.reducedWidth)return c('DateStrings').getWeekdayNameShort(this.props.grid.toAPIDayIndex(this.props.day));return c('DateStrings').getWeekdayName(this.props.grid.toAPIDayIndex(this.props.day));}.bind(this),o;}m.prototype.render=function(){'use strict';var n=[];for(var o=0;o<24;o++){var p=this.props.highlighted&&this.props.highlighted.isSelected(this.props.day,o);n.push(c('React').createElement(c('AdsDayPartingHourBox.react'),{day:this.props.day,hour:o,isHighlighted:p,reducedWidth:this.props.reducedWidth,isSelected:this.props.grid.isSelected(this.props.day,o),key:o,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseUp:this.props.onMouseUp}));}var q=this.props.day===null;return c('React').createElement('div',{className:"_516k"+(' '+"clearfix")+(this.props.day===0?' '+"_8-v":'')+(q?' '+"_8-x":'')},c('React').createElement('div',{className:"_516l"+(' '+"_516q")+(' '+"_58jd")+(this.props.reducedWidth?' '+"_54-e":'')},q?i._("Every Day"):this.$AdsDayPartingTableRow1()),n);};m.propTypes={day:l.number,grid:l.instanceOf(c('DayPartingGrid')).isRequired,highlighted:l.instanceOf(c('DayPartingGrid')),onMouseDown:l.func.isRequired,onMouseEnter:l.func.isRequired,onMouseUp:l.func.isRequired,reducedWidth:l.bool};f.exports=m;}),null);
__d('AdsDayPartingTable.react',['cx','fbt','AdsDayPartingTableRow.react','DayPartingGrid','DayPartingUtils','React','XUIError.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes,m=[i._("12am"),i._("3am"),i._("6am"),i._("9am"),i._("12pm"),i._("3pm"),i._("6pm"),i._("9pm")],n=7;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isDragging:false,dragMode:false,dragStartDay:null,dragStartHour:null,dragEndDay:null,dragEndHour:null},this.$AdsDayPartingTable7=function(){if(!this.props.highlighted)return null;return (c('React').createElement('div',{className:"_5sne"},c('React').createElement('div',{className:"_2bi7 _5sny"}),i._("Business opening hours")));}.bind(this),this.$AdsDayPartingTable6=function(){this.$AdsDayPartingTable5();}.bind(this),this.$AdsDayPartingTable5=function(){if(this.state.isDragging)this.setState({isDragging:false,renderedGrid:this.props.grid});}.bind(this),this.$AdsDayPartingTable8=function(u){var v=babelHelpers['extends']({},this.state,u),w=this.$AdsDayPartingTable9(v);v.renderedGrid=w;this.setState(v);}.bind(this),this.$AdsDayPartingTable3=function(u,v){if(!this.state.isDragging)return;this.$AdsDayPartingTable8({dragEndDay:u,dragEndHour:v});}.bind(this),this.$AdsDayPartingTable2=function(u,v){if(this.state.isDragging)return;this.$AdsDayPartingTable8({isDragging:true,dragMode:!this.props.grid.isSelected(u,v),dragStartDay:u,dragStartHour:v,dragEndDay:u,dragEndHour:v});}.bind(this),this.$AdsDayPartingTable4=function(u,v){if(!this.state.isDragging)return;this.setState({isDragging:false,dragMode:false,dragStartDay:null,dragStartHour:null,dragEndDay:null,dragEndHour:null});this.props.onGridChange(this.$AdsDayPartingTable1());}.bind(this),this.$AdsDayPartingTable1=function(){return this.state.renderedGrid||this.props.grid;}.bind(this),this.$AdsDayPartingTable9=function(u){if(!u.isDragging)return this.props.grid;var v=new (c('DayPartingGrid'))(this.props.grid),w=u.dragStartDay,x=u.dragEndDay,y=u.dragStartHour,z=u.dragEndHour,aa=u.dragMode;if(w!==null&&x===null)x=c('DayPartingUtils').DAYS_IN_WEEK-1;if(y!==null&&z===null)z=c('DayPartingUtils').HOURS_IN_DAY-1;if(w===null){v.setEveryDay(y,z,aa);}else if(y===null){v.setAllDay(w,x,aa);}else v.set(w,y,x,z,aa);return v;}.bind(this),q;}o.prototype.componentWillReceiveProps=function(p){'use strict';if('grid' in p)this.setState({renderedGrid:p.grid});};o.prototype.render=function(){'use strict';var p=this.$AdsDayPartingTable1(),q=[];for(var r=0;r<n;r++)q.push(c('React').createElement(c('AdsDayPartingTableRow.react'),{day:r,grid:p,highlighted:this.props.highlighted,reducedWidth:this.props.reducedWidth,key:r,onMouseDown:this.$AdsDayPartingTable2,onMouseEnter:this.$AdsDayPartingTable3,onMouseUp:this.$AdsDayPartingTable4}));if(!this.props.reducedWidth&&!this.props.hideAllDaysPicker)q.push(c('React').createElement(c('AdsDayPartingTableRow.react'),{day:null,grid:p,highlighted:this.props.highlighted,key:r,onMouseDown:this.$AdsDayPartingTable2,onMouseEnter:this.$AdsDayPartingTable3,onMouseUp:this.$AdsDayPartingTable4}));var s=[];for(r=0;r<8;r++){s.push(c('React').createElement('div',{className:"_8-y"+(this.props.reducedWidth?' '+"_26ma":''),key:'hour'+r},m[r]));s.push(c('React').createElement('div',{className:"_8-z",key:'hourA'+r}));s.push(c('React').createElement('div',{className:"_8-z",key:'hourB'+r}));}return c('React').createElement(c('XUIError.react'),this.props,c('React').createElement('div',{className:"_5sn9"+(this.props.reducedWidth?' '+"_26mb":''),onMouseLeave:this.$AdsDayPartingTable5,onMouseUp:this.$AdsDayPartingTable6},c('React').createElement('div',{className:"_19ic"+(' '+"clearfix")+(this.props.reducedWidth?' '+"_26mf":'')},s),q,c('React').createElement('div',{className:"_5sne"},c('React').createElement('div',{className:"hourStatus-selected"+(' '+"_5sny")+(this.props.reducedWidth?' '+"_26mg":'')}),i._("Scheduled hours")),this.$AdsDayPartingTable7()));};o.propTypes=babelHelpers['extends']({grid:l.instanceOf(c('DayPartingGrid')).isRequired,hideAllDaysPicker:l.bool,highlighted:l.instanceOf(c('DayPartingGrid')),onGridChange:l.func.isRequired,reducedWidth:l.bool},c('XUIError.react').propTypes);o.defaultProps={hideAllDaysPicker:false,xuiErrorPosition:'above',xuiErrorAlignh:'left'};f.exports=o;}),null);
__d('AdsTargetingTokenizer.react',['cx','AbstractTokenizer.react','React','SearchableEntry','TypeaheadMetricReporter','WebAsyncSearchSource','XUITokenizerToken.react','XUITypeaheadView.react','areEqual'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j={ViewRenderer:c('XUITypeaheadView.react'),TokenRenderer:c('XUITokenizerToken.react'),useLayer:true},k=c('React').createClass({displayName:'AdsTargetingTokenizer',_searchSource:null,propTypes:{auxiliaryFields:i.object,disabled:i.bool,entries:i.array,isAutoHeight:i.bool,limit:function l(m,n,o){var l=m[n];if(typeof l!=='undefined'&&!(typeof l==='number'&&l>0))return new Error('Invalid entries limit provided, must be a positive number.');},maxKeywords:i.number,metricReporter:i.instanceOf(c('TypeaheadMetricReporter')),packageFn:i.func,placeholder:i.string,queryData:i.object,searchSource:i.object,smallInput:i.bool,uri:i.string.isRequired,onDataAdd:i.func,onDataRemove:i.func,onDataUpdate:i.func.isRequired},getDefaultProps:function l(){return {isAutoHeight:false,queryData:{}};},getInitialState:function l(){return {entries:this.props.entries||[],queryString:''};},componentWillMount:function l(){this._createSearchSource(this.props);},componentWillReceiveProps:function l(m){if(m.entries)this.setState({entries:m.entries});if(m.searchSource&&!this._areSearchSourcesEqual(m))this._createSearchSource(m);},_areSearchSourcesEqual:function l(m){var n=this.props;if(c('areEqual')(n.searchSource,m.searchSource)&&c('areEqual')(n.queryData,m.queryData)&&c('areEqual')(n.uri,m.uri)&&c('areEqual')(n.auxiliaryFields,m.auxiliaryFields)&&c('areEqual')(n.packageFn,m.packageFn))return true;return false;},_createSearchSource:function l(m){if(m.searchSource){var n=m.searchSource;}else n=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:m.uri,data:m.queryData}],auxiliaryFields:m.auxiliaryFields,packageFn:m.packageFn});this._searchSource=n;},_onAdd:function l(m){if(!this._canAddMoreKeywords())return;var n=this.state.entries;n.push(m);this.setState({entries:n});this.props.onDataAdd&&this.props.onDataAdd(m);this.props.onDataUpdate(n,m);if(m){var o=this.props.metricReporter;if(o){o.reportSelect(m.id||m.getUniqueID(),m.type||m.getType(),m.order||m.getOrder(),true);o.sessionEnd();o.sessionStart();}}},_onRemove:function l(m){var n=this.state.entries,o=n.indexOf(m);n.splice(o,1);this.setState({entries:n});this.props.onDataRemove&&this.props.onDataRemove(m);this.props.onDataUpdate(n,m);},_onInputFocus:function l(){this.props.metricReporter&&this.props.metricReporter.sessionStart();},_onInputBlur:function l(){this.props.metricReporter&&this.props.metricReporter.sessionPause();},_onEntriesFound:function l(m){var n=this.props.metricReporter;if(n)n.reportResults(m.map(function(o){return o.getUniqueID();}),this.state.queryString);},_onInputChange:function l(event){var m=event.target.value;this.setState({queryString:m});this.props.metricReporter&&this.props.metricReporter.reportQueryBegin(m);},getEntries:function l(){return this.state.entries;},render:function l(){var m="_59_m"+(!this.props.isAutoHeight?' '+"_557c":'')+(this.props.smallInput?' '+"_p63":'');return (c('React').createElement('div',{className:m},c('React').createElement(c('AbstractTokenizer.react'),{className:"_59_n",'data-testid':this.props['data-testid'],disabled:this.props.disabled||!this._canAddMoreKeywords(),entries:this.state.entries,limit:this.props.limit,placeholder:this.props.placeholder,presenter:j,searchSource:this._searchSource,onAddEntryAttempt:this._onAdd,onEntriesFound:this._onEntriesFound,onInputBlur:this._onInputBlur,onInputFocus:this._onInputFocus,onQueryStringChange:this._onInputChange,onRemoveEntryAttempt:this._onRemove})));},_canAddMoreKeywords:function l(){if(!this.props.maxKeywords)return true;if(this.state.entries.length>=this.props.maxKeywords)return false;return true;}});f.exports=k;}),null);
__d('AdsTargetingLanguageSelector.react',['fbt','AdsGraphAPI','AdsStaticSearchSource','AdsTargetingTokenizer.react','BoostedComponentClientEvent','immutable','React','SearchableEntry','areEqual'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=null,m=new (c('AdsStaticSearchSource'))([]),n=h._("Add languages...");i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={entries:[]},this.$AdsTargetingLanguageSelector3=function(u,v){this.props.onDataUpdate(c('BoostedComponentClientEvent').UPDATE_LANGUAGES,u.map(function(w){return parseInt(w.getUniqueID(),10);}));}.bind(this),this.$AdsTargetingLanguageSelector1=function(u){var v=c('immutable').Set(u||[]),w=[];l.forEach(function(x,y){if(v.contains(x.key))w.push(new (c('SearchableEntry'))({uniqueID:x.id,title:x.name}));});this.setState({entries:w,searchSource:this.state.searchSource||new (c('AdsStaticSearchSource'))(l)});}.bind(this),this.$AdsTargetingLanguageSelector2=function(u){l=u.data.map(function(v){return {id:v.key,name:v.name,key:v.key};});this.$AdsTargetingLanguageSelector1(this.props.selectedLanguages);}.bind(this),q;}o.prototype.componentWillMount=function(){'use strict';if(l){this.$AdsTargetingLanguageSelector1(this.props.selectedLanguages);return;}c('AdsGraphAPI').get(f.id).search('adlocale').get({limit:500}).done(this.$AdsTargetingLanguageSelector2);};o.prototype.componentWillReceiveProps=function(p){'use strict';if(l&&!c('areEqual')(p.selectedLanguages,this.props.selectedLanguages))this.$AdsTargetingLanguageSelector1(p.selectedLanguages);};o.prototype.render=function(){'use strict';var p=this.state.searchSource||m;return c('React').createElement(c('AdsTargetingTokenizer.react'),{disabled:this.props.disabled,entries:this.state.entries,placeholder:n,searchSource:p,smallInput:true,uri:"#",onDataUpdate:this.$AdsTargetingLanguageSelector3});};o.propTypes={disabled:k.bool,selectedLanguages:k.arrayOf(k.number),onDataUpdate:k.func.isRequired};f.exports=o;}),null);
__d('ColorPickerPopover.react',['color-picker','React','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIPopoverButton.react','LayerHideOnBlur','emptyFunction'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.state={show:false,color:k.initialColor};}j.prototype.render=function(){'use strict';return (c('React').createElement('span',null,c('React').createElement(c('XUIPopoverButton.react'),{className:this.props.className,disabled:this.props.disabled,label:this.props.label,onClick:function(){return this.setState({show:!this.state.show});}.bind(this),ref:'colorPicker',size:'large'}),c('React').createElement(c('XUIContextualDialog.react'),{behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:function(){return this.refs.colorPicker;}.bind(this),onToggle:function(k){return this.setState({show:k});}.bind(this),position:this.props.position,shown:this.state.show,width:c('XUIContextualDialog.react').WIDTH.NORMAL},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{style:{height:'200px'}},c('React').createElement(c('color-picker'),{color:this.state.color,onChange:function(k){this.setState({color:k});this.props.onChange(k);}.bind(this)}))))));};j.prototype.componentDidUpdate=function(k,l){'use strict';if(l.show&&!this.state.show)this.props.onClose(this.state.color);};j.defaultProps={disabled:false,initialColor:'#000000',onChange:c('emptyFunction'),onClose:c('emptyFunction'),position:'below'};f.exports=j;}),null);
__d('MediaEffectFrameEditorDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d('MediaEffectEventDataDispatcher',['GraphAPI','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={loadEventData:function i(j){c('GraphAPI')('2.5').object('eventID',j).get({fields:'name, place{name, location{city}}, start_time, end_time'}).then(function(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'event/getSuccess',event:k});}).done();}};f.exports=h;}),null);
__d('MediaEffectEventDataStore',['FluxLoadObjectStore','MediaEffectEventDataDispatcher','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxLoadObjectStore'));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case 'event/getSuccess':return this.__handleOne(k,l.event.id,babelHelpers['extends']({},l.event));default:return k;}};j.prototype.__load=function(k){c('MediaEffectEventDataDispatcher').loadEventData(k);};function j(){h.apply(this,arguments);}f.exports=new j(c('MediaEffectFrameEditorDispatcher'));}),null);
__d('MediaEffectFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={CREATION_FUNNEL_LOGGING_NAME:'CREATIVE_STUDIO_CREATION_FUNNEL',FUNNEL_LOGGING_EVENT:{ADD_DYNAMIC_TEXT:'add_dynamic_text',ADD_TEXT:'add_text',CANCEL:'cancel',CHANGE_CATEGORY:'change_category',CHANGE_EDITOR_BACKGROUND_COLOR:'change_editor_background_color',CHANGE_END_TIME:'change_end_time',CHANGE_LOCATION:'change_location',CHANGE_NAME:'change_name',CHANGE_OWNER:'change_owner',CHANGE_START_TIME:'change_start_time',CHANGE_TAG:'change_tag',CHANGE_TEXT_ALIGNMENT:'change_text_alignment',CHANGE_TEXT_COLOR:'change_text_color',CHANGE_TEXT_FONT:'change_text_font',CHANGE_TEXT_CONTENT:'change_text_content',DELETE_ASSET:'delete_asset',DUPLICATE_ASSET:'duplicate_asset',SAVE_AS_DRAFT:'save_as_draft',SET_SCALE_WITH_WIDTH:'set_scale_with_width',SET_SCALE_WITH_HEIGHT:'set_scale_with_height',SHOW_PREVIEW:'show_preview',SUBMIT:'submit',UPDATE_STEP:'update_step',UPLOAD_FILE:'upload_file',UPLOAD_FINISHED:'upload_finished'},FUNNEL_LOGGING_TIMEOUT:999999,FUNNEL_LOGGING_TAGS:{BROWSER_NAME:'browser_name',CREATION_FLOW_TYPE:'creation_flow_type',EFFECT_ID:'effect_id',FAILURE:'failure',FLOW_TYPE:'flow_type',FRAME_EDITOR_SHOWN:'frame_editor_shown',NEW_EFFECT:'new_effect',SOURCE_ID:'source_id',SUCCESS:'success'},FUNNEL_LOGGING_PAYLOAD:{ALIGNMENT:'alignment',COLOR:'color',EFFECT_ID:'effect_id',FONT:'font',NEW_EFFECT:'new_effect',OWNER_FIRST_PARTY:'owner_first_party',OWNER_ID:'owner_id',OWNER_TYPE:'owner_type',RESULT:'result',SCALE_WITH_HEIGHT:'scale_with_height',SCALE_WITH_WIDTH:'scale_with_width',TEXT:'text',STEP:'step'}};}),null);
__d('MediaEffectMetadataRecord',['DayPartingGrid','FXEntMediaEffectSubmissionStatus','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({effectHasText:false,endTime:null,fbPageLiked:null,fbCatalogGKs:[],fbBoosted:false,fbEligibilityGKs:[],fbRankWeight:null,fbWhitelistCheckEligibility:false,fbWhitelistedUsers:[],humanReadableDescription:null,id:null,locales:[],locationPageID:null,name:null,offlineOnly:false,placeDescription:null,rejectReasons:null,saveAsDraft:false,selectedCategoryID:null,selectedInstructionID:null,selectedOwnerID:null,selectedTemplateCategoryID:null,selfBirthday:false,startTime:null,submissionStatus:c('FXEntMediaEffectSubmissionStatus').DRAFT,tags:[],thumbnail:null,thumbnailURI:null,timezone:null,timingSchedule:null,locationTarget:'everyone',hasFrameNameError:false}));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectMetadataValidationUtils',[],(function a(b,c,d,e,f,g){'use strict';var h={validateName:function i(j){return j!=null&&j.trim()!=='';},validateOwnerID:function i(j){return j!=null&&j.trim()!=='';},validateLocationPageID:function i(j){return j!=null&&j.trim()!=='';},validateTimeRange:function i(j,k){if(j!=null&&k!=null&&j.getTime()>=k.getTime())return false;return true;}};f.exports=h;}),null);
__d('MediaEffectError',['fbt','MediaEffectErrorCode','immutable'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Record,l=k({code:null,message:null,messageItems:[],params:[]});i=babelHelpers.inherits(m,l);j=i&&i.prototype;m.fromObject=function(p){return new m(babelHelpers['extends']({},p,{message:n(p.code,p.params),messageItems:o(p.code,p.params)}));};function m(){i.apply(this,arguments);}function n(p,q){switch(p){case c('MediaEffectErrorCode').HAS_DISALLOWED_LOCATION:if(!q||q.length===0)return null;if(q.length===1){return h._("The location you added is no longer available to use with frames. Select a different location or General for no location.");}else return h._("Some of the locations you added are no longer available to use with frames. Change these locations or select General for no location:");}return null;}function o(p,q){switch(p){case c('MediaEffectErrorCode').HAS_DISALLOWED_LOCATION:if(!q)return null;if(q.length===1){return [];}else return q;}return null;}f.exports=m;}),null);
__d('MediaEffectMetadataViewStore',['FluxReduceStore','immutable','MediaEffectError','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').List,m=c('immutable').Map,n=c('immutable').Record;h=babelHelpers.inherits(o,n({errors:l(),fbRankingStrategy:'DEFAULT',instructions:m(),ownersData:l(),templateCategories:m()}));i=h&&h.prototype;function o(){h.apply(this,arguments);}j=babelHelpers.inherits(p,c('FluxReduceStore'));k=j&&j.prototype;p.prototype.getInitialState=function(){return new o();};p.prototype.reduce=function(q,r){switch(r.type){case 'update/fbRankingStrategy':q=q.set('fbRankingStrategy',r.value);break;case 'init/effectMetadata':var s=r.data,t=s.activationJSData,u=s.instructionsData,v=s.ownersData,w=s.errorsData,x=s.templateCategoryData,y=t.fbBoosted,z=t.fbRankWeight,aa='DEFAULT';if(y){aa='BOOST';}else if(z)aa='MANUAL';var ba=l((w||[]).map(function(ca){return c('MediaEffectError').fromObject(ca);}));q=q.withMutations(function(ca){ca.set('fbRankingStrategy',aa).set('instructions',m(u)).set('ownersData',l(v)).set('errors',ba).set('templateCategories',m(x));});break;}return q;};p.prototype.getOwner=function(q){if(!q)return null;var r=this.getState().get('ownersData'),s=r.filter(function(t){return t.id===q;});if(s.size===1)return s.first();return null;};p.prototype.isFirstParty=function(q){var r=this.getOwner(q);if(!r)return false;return r.isFirstParty;};function p(){j.apply(this,arguments);}f.exports=new p(c('MediaEffectFrameEditorDispatcher'));}),null);
__d('MediaEffectMetadataStore',['FluxReduceStore','MediaEffectFrameEditorDispatcher','MediaEffectMetadataRecord','MediaEffectMetadataValidationUtils','MediaEffectMetadataViewStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return new (c('MediaEffectMetadataRecord'))();};j.prototype.reduce=function(k,l){var m=void 0,n=void 0;switch(l.type){case 'add/tag':m=k.get('tags');m.push(l.data);k=k.set('tags',m);break;case 'remove/tag':var o=l.data;m=k.get('tags');m=m.filter(function(r){return (r.uniqueID!==o.uniqueID&&r.title!==o.title);});k=k.set('tags',m);break;case 'add/fbWhitelistedUser':n=k.get('fbWhitelistedUsers');n.push(l.data);k=k.set('fbWhitelistedUsers',n);break;case 'remove/fbWhitelistedUser':var p=l.data;n=k.get('fbWhitelistedUsers');n=n.filter(function(r){return (r.uniqueID!==p.uniqueID&&r.name!==p.name);});k=k.set('fbWhitelistedUsers',n);break;case 'save/draft':k=k.set('saveAsDraft',true);break;case 'select/instruction':k=k.set('selectedInstructionID',l.instructionID);break;case 'update/category':k=k.set('selectedCategoryID',l.value);break;case 'update/fbRankingStrategy':k=k.set('fbBoosted',l.value==='BOOST');if(l.value!=='MANUAL')k=k.set('fbRankWeight',null);break;case 'update/fbRankWeight':k=k.set('fbRankWeight',l.value);break;case 'update/fbWhitelistCheckEligibility':k=k.set('fbWhitelistCheckEligibility',l.value);break;case 'update/fbCatalogGKs':k=k.set('fbCatalogGKs',l.value);break;case 'update/fbEligibilityGKs':k=k.set('fbEligibilityGKs',l.value);break;case 'update/fbPageLiked':k=k.set('fbPageLiked',l.value);break;case 'update/locales':k=k.set('locales',l.value);break;case 'update/locationPageID':k=k.set('locationPageID',l.value);if(l.value===null)k=k.set('placeDescription',null);break;case 'update/locationTarget':k=k.set('locationTarget',l.value);break;case 'update/name':k=k.set('name',l.value);break;case 'update/offlineOnly':k=k.set('offlineOnly',l.value);break;case 'update/selectedOwnerID':k=k.set('selectedOwnerID',l.value);break;case 'update/selfBirthday':k=k.set('selfBirthday',l.value);break;case 'update/thumbnail':k=k.set('thumbnail',l.thumbnail);break;case 'update/timingSchedule':k=k.set('timingSchedule',l.value);break;case 'update/scheduleRange':k=k.set('startTime',l.startTime).set('endTime',l.endTime).set('timezone',l.timezone);break;case 'update/nameValidation':k=k.set('hasFrameNameError',l.isError);break;case 'init/effectMetadata':var q=Object.assign({},l.data.activationJSData);q=Object.assign(q,l.data.metadataJSData);if(q.startTime)q.startTime=new Date(q.startTime*1000);if(q.endTime)q.endTime=new Date(q.endTime*1000);if(q.locationPageID)q.locationTarget='targeted';k=new (c('MediaEffectMetadataRecord'))(q);break;case 'update/effectHasText':k=k.set('effectHasText',l.value);break;case 'update/humanReadableDescription':k=k.set('humanReadableDescription',l.value);break;case 'set/placeDescription':k=k.set('placeDescription',l.placeDescription);break;case 'select/templateCategoryID':k=k.set('selectedTemplateCategoryID',l.value);break;}return k;};j.prototype.getRequestData=function(k){var l=this.getState(),m=l.get('selectedOwnerID'),n={end_time:l.get('endTime')?Math.floor(l.get('endTime').getTime()/1000):undefined,media_effect_category:l.get('selectedCategoryID'),media_effect_owner:m,media_effect_save_as_draft:l.get('saveAsDraft'),media_effect_tags:l.get('tags').map(function(p){return p.title;}),name:l.get('name'),start_time:l.get('startTime')?Math.floor(l.get('startTime').getTime()/1000):undefined,targeting_place_page:l.get('locationPageID'),timezone:l.get('timezone')};if(!k||!c('MediaEffectMetadataViewStore').isFirstParty(m))return n;var o=l.get('selectedTemplateCategoryID');if(o!==null){o=[o];}else o=[];n=Object.assign(n,{fb_catalog_gks:l.get('fbCatalogGKs').length>0?l.get('fbCatalogGKs'):undefined,fb_eligibility_gks:l.get('fbEligibilityGKs').length>0?l.get('fbEligibilityGKs'):undefined,fb_page_liked:l.get('fbPageLiked')||undefined,fb_ranking_boosted:l.get('fbBoosted'),fb_ranking_weight:l.get('fbRankWeight'),fb_whitelisted_user_ids:l.get('fbWhitelistedUsers').map(function(p){return p.uniqueID;}),fb_whitelist_check_eligibility:l.get('fbWhitelistCheckEligibility'),has_text:l.get('effectHasText'),human_readable_description:l.get('humanReadableDescription'),locales:l.get('locales'),meida_effect_instruction:l.get('selectedInstructionID'),media_effect_template_categories:o,offline_only:!!l.get('offlineOnly'),self_birthday:!!l.get('selfBirthday'),timing_schedule:l.get('timingSchedule'),thumbnail:l.get('thumbnail')});return n;};j.prototype.getIsMetadataValid=function(){var k=this.getState();if(!c('MediaEffectMetadataValidationUtils').validateName(k.get('name')))return false;if(k.get('hasFrameNameError'))return false;if(!c('MediaEffectMetadataValidationUtils').validateOwnerID(k.get('selectedOwnerID')))return false;if(!c('MediaEffectMetadataValidationUtils').validateTimeRange(k.get('startTime'),k.get('endTime')))return false;if(k.get('locationTarget')==='targeted'&&!c('MediaEffectMetadataValidationUtils').validateLocationPageID(k.get('locationPageID')))return false;return true;};function j(){h.apply(this,arguments);}f.exports=new j(c('MediaEffectFrameEditorDispatcher'));}),null);
__d('MediaEffectEditorFunnelLogger',['invariant','FunnelLogger','MediaEffectFunnelLoggingConstants','MediaEffectMetadataStore','MediaEffectMetadataViewStore','mergeDeep'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MediaEffectFunnelLoggingConstants').CREATION_FUNNEL_LOGGING_NAME,j=c('MediaEffectFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,k=c('MediaEffectFunnelLoggingConstants').FUNNEL_LOGGING_TAGS,l=c('MediaEffectFunnelLoggingConstants').FUNNEL_LOGGING_PAYLOAD,m={_funnelStarted:false,_bootstrapData:undefined,startFunnel:function n(o){this._bootstrapData=o;c('FunnelLogger').startFunnel(i);this._funnelStarted=true;},endFunnel:function n(){c('FunnelLogger').endFunnel(i);},logAddDynamicText:function n(o){var p;this._appendAction(j.ADD_DYNAMIC_TEXT,(p={},p[l.TEXT]=o,p));},logAddText:function n(){this._appendAction(j.ADD_TEXT,{});},logCancel:function n(){this._appendAction(j.CANCEL);},logChangeCategory:function n(){this._appendActionIfNew(j.CHANGE_CATEGORY);},logChangeEditorBackgroundColor:function n(o){var p;this._appendAction(j.CHANGE_EDITOR_BACKGROUND_COLOR,(p={},p[l.COLOR]=o,p));},logChangeEndTime:function n(){this._appendActionIfNew(j.CHANGE_END_TIME);},logChangeLocation:function n(){this._appendActionIfNew(j.CHANGE_LOCATION);},logChangeName:function n(){this._appendActionIfNew(j.CHANGE_NAME);},logChangeOwner:function n(){this._appendActionIfNew(j.CHANGE_OWNER);},logChangeStartTime:function n(){this._appendActionIfNew(j.CHANGE_START_TIME);},logChangeTag:function n(){this._appendActionIfNew(j.CHANGE_TAG);},logChangeTextAlignment:function n(o){var p;this._appendAction(j.CHANGE_TEXT_ALIGNMENT,(p={},p[l.ALIGNMENT]=o,p));},logChangeTextColor:function n(o){var p;this._appendAction(j.CHANGE_TEXT_COLOR,(p={},p[l.COLOR]=o,p));},logChangeTextFont:function n(o){var p;this._appendAction(j.CHANGE_TEXT_FONT,(p={},p[l.FONT]=o,p));},logChangeTextContent:function n(o){var p;this._appendAction(j.CHANGE_TEXT_CONTENT,(p={},p[l.TEXT]=o,p));},logDeleteAsset:function n(){this._appendAction(j.DELETE_ASSET);},logDuplicateAsset:function n(){this._appendAction(j.DUPLICATE_ASSET);},logStep:function n(o){var p;this._appendAction(j.UPDATE_STEP,(p={},p[l.STEP]=o,p));},logSaveAsDraft:function n(){this._appendAction(j.SAVE_AS_DRAFT);},logSetScaleWithHeight:function n(o){var p;this._appendAction(j.SET_SCALE_WITH_HEIGHT,(p={},p[l.SCALE_WITH_HEIGHT]=o,p));},logSetScaleWithWidth:function n(o){var p;this._appendAction(j.SET_SCALE_WITH_WIDTH,(p={},p[l.SCALE_WITH_WIDTH]=o,p));},logSubmit:function n(o,p){var q,r=o?k.SUCCESS:k.FAILURE;this._appendAction(j.SUBMIT,(q={},q[l.RESULT]=r,q[l.EFFECT_ID]=p,q));},logUploadFile:function n(){this._appendAction(j.UPLOAD_FILE);},logUploadFinished:function n(o){var p,q=o?k.SUCCESS:k.FAILURE;this._appendAction(j.UPLOAD_FINISHED,(p={},p[l.RESULT]=q,p));},_appendActionIfNew:function n(o,p){if(!this._funnelStarted)return;p=c('mergeDeep')(p,this._getStandardPayload());c('FunnelLogger').appendActionWithPayloadIfNew(i,o,p);},_appendAction:function n(o,p){if(!this._funnelStarted)return;p=c('mergeDeep')(p,this._getStandardPayload());c('FunnelLogger').appendActionWithPayload(i,o,p);},_getStandardPayload:function n(){var o,p=c('MediaEffectMetadataStore').getState(),q=this._bootstrapData.metadataJSData.id,r=p.selectedOwnerID,s=(o={},o[l.NEW_EFFECT]=!q,o);if(q){var t;s=babelHelpers['extends']({},s,(t={},t[l.EFFECT_ID]=q,t));}if(r){var u,v=c('MediaEffectMetadataViewStore').getOwner(r);v||h(0);s=babelHelpers['extends']({},s,(u={},u[l.OWNER_FIRST_PARTY]=v.isFirstParty,u[l.OWNER_ID]=r,u[l.OWNER_TYPE]=v.type,u));}return s;}};f.exports=m;}),null);
__d('mediaEffectGKCheck',['MediaEffectGKConfig','invariant'],(function a(b,c,d,e,f,g){'use strict';var h=c('MediaEffectGKConfig').gk_results;function i(j){return !!h[j];}f.exports=i;}),null);
__d('MediaEffectFrameCreateDialogDataStore',['FluxReduceStore','immutable','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Record;h=babelHelpers.inherits(m,l({currentStep:0,dialogHeight:0,screenWidth:0,validatingStep:-1}));i=h&&h.prototype;function m(){h.apply(this,arguments);}j=babelHelpers.inherits(n,c('FluxReduceStore'));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m();};n.prototype.reduce=function(o,p){switch(p.type){case 'change/step':o=o.set('currentStep',p.step);break;case 'form/validate':o=o.set('validatingStep',p.step);break;case 'init/dialog':o=new m();break;case 'set/screenDimensions':o=o.set('screenWidth',p.screenWidth).set('dialogHeight',p.dialogHeight);break;}return o;};function n(){j.apply(this,arguments);}f.exports=new n(c('MediaEffectFrameEditorDispatcher'));}),null);
__d('MediaEffectHubStrings',['fbt','invariant','FXEntMediaEffectStatus','FXMediaEffectType'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={active:function k(){return h._("Active");},archived:function k(){return h._("Archived");},completed:function k(){return h._("Completed");},inactive:function k(){return h._("Inactive");},draft:function k(){return h._("Draft");},inReview:function k(){return h._("In Review");},notApproved:function k(){return h._("Not Approved");},scheduled:function k(){return h._("Scheduled");},ongoing:function k(){return h._("Ongoing");},frame:function k(){return h._("Frame");},mask:function k(){return h._("Mask");},particleEffect:function k(){return h._("Reactive Effect");},profileFrame:function k(){return h._("Profile Frame");},shaderFilter:function k(){return h._("Filter");},styleTransfer:function k(){return h._("Style Effect");},underlay:function k(){return h._("Underlay");},getNeedsAttention:function k(){return h._("Needs Attention");},getTextForStatus:function k(l){switch(l){case c('FXEntMediaEffectStatus').ACTIVE:return j.active();case c('FXEntMediaEffectStatus').ARCHIVED:return j.archived();case c('FXEntMediaEffectStatus').COMPLETED:return j.completed();case c('FXEntMediaEffectStatus').DRAFT:return j.draft();case c('FXEntMediaEffectStatus').INACTIVE:return j.inactive();case c('FXEntMediaEffectStatus').IN_REVIEW:return j.inReview();case c('FXEntMediaEffectStatus').SCHEDULED:return j.scheduled();case c('FXEntMediaEffectStatus').NOT_APPROVED:default:return j.notApproved();}},getTextForEffectType:function k(l){switch(l){case c('FXMediaEffectType').FRAME:return j.frame();case c('FXMediaEffectType').MSQRD_MASK:return j.mask();case c('FXMediaEffectType').PARTICLE_EFFECT:return j.particleEffect();case c('FXMediaEffectType').PROFILE_FRAME:return j.profileFrame();case c('FXMediaEffectType').SHADER_FILTER:return j.shaderFilter();case c('FXMediaEffectType').STYLE_TRANSFER:return j.styleTransfer();case c('FXMediaEffectType').UNDERLAY:return j.underlay();}i(0);}};f.exports=j;}),null);
__d('MediaEffectReviewMetadataSection.react',['cx','fbt','AdsTargetingAggregatedMap.react','AdsTargetingLocationMapRecord','FBCollapsibleList.react','LocationConstants','MediaEffectHubStrings','React','XUIText.react','formatDate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('FBCollapsibleList.react').Delimiters,k=200;function l(n){return (c('React').createElement('div',{className:"_1d1k"},c('React').createElement('div',{className:"_1d1h"},c('React').createElement(c('XUIText.react'),{weight:'bold'},n.title)),n.children));}var m=function n(o){var p,q=i._("None"),r=o.startTime,s=o.endTime,t=null;if(!r){t=c('MediaEffectHubStrings').ongoing();}else t=i._("{start date} \u2014 {end date}",[i.param('start date',c('formatDate')(r,'M j, Y')),i.param('end date',!s?c('MediaEffectHubStrings').ongoing():c('formatDate')(s,'M j, Y'))]);return (c('React').createElement('div',{className:"_1d1l"},c('React').createElement('div',{className:"_1d1m"},c('React').createElement(l,{title:i._("Schedule")},c('React').createElement(c('XUIText.react'),{display:'block'},t||q)),c('React').createElement(l,{title:i._("Location")},o.placeDescription?c('React').createElement(c('AdsTargetingAggregatedMap.react'),{height:k,locationRecords:c('AdsTargetingLocationMapRecord').fromGeoLocations((p={},p[c('LocationConstants').CUSTOM_LOCATIONS]=[o.placeDescription],p))}):c('React').createElement(c('XUIText.react'),null,i._("Any location"))),c('React').createElement(l,{title:i._("Keyword Tags")},c('React').createElement(c('FBCollapsibleList.react'),{delimiter:j.COMMA,display:'inline',numVisible:3,showLessLink:true},o.tags.length>0?o.tags.map(function(u,v){return (c('React').createElement(c('XUIText.react'),{key:v},u.title));}):[c('React').createElement(c('XUIText.react'),{key:'none'},q)])))));};f.exports=m;}),null);
__d('MediaEffectReactFrameEditorScalarAssetPositionRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:50,asset_pixel_offset:0}));i=h&&h.prototype;k.canonical=function(l,m,n){var o=n-l/2;if(Math.abs(o)<.01)return new k();if(o>0){var p=l-(n+m/2);return new k({anchor_origin:'asset_end',anchor_asset_size_percentage:0,asset_origin:'canvas_end',asset_canvas_size_percentage:100*p/l});}else{var q=n-m/2;return new k({anchor_origin:'asset_start',anchor_asset_size_percentage:0,asset_origin:'canvas_start',asset_canvas_size_percentage:100*q/l});}};k.prototype.getStart=function(l,m){var n=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord1(l),o=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord2(m);return n-o;};k.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord1=function(l){var m=l*this.asset_canvas_size_percentage/100+this.asset_pixel_offset;if(this.asset_origin==='canvas_start'){return m;}else return l-m;};k.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord2=function(l){var m=l*this.anchor_asset_size_percentage/100+this.anchor_pixel_offset;if(this.anchor_origin==='asset_start'){return m;}else return l-m;};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectReactFrameEditorAssetPositionRecord',['immutable','MediaEffectReactFrameEditorScalarAssetPositionRecord','Rect'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({x:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))(),y:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))()}));i=h&&h.prototype;k.fromCenter=function(l,m){return new k({x:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:l,asset_pixel_offset:0}),y:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:m,asset_pixel_offset:0})});};k.canonical=function(l,m){return new k({x:c('MediaEffectReactFrameEditorScalarAssetPositionRecord').canonical(m.x,l.w(),l.w()/2+l.l),y:c('MediaEffectReactFrameEditorScalarAssetPositionRecord').canonical(m.y,l.h(),l.h()/2+l.t)});};k.prototype.toAbsolute=function(l,m){var n=this.x.getStart(l.x,m.x),o=this.y.getStart(l.y,m.y);return new (c('Rect'))(o,n+m.x,o+m.y,n);};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectMetadataActionCreators',['invariant','regeneratorRuntime','MediaEffectFlowType','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorAssetPositionRecord','SimpleXUIDialog','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i={addImage:function j(k,l,m,n){var o={type:'add/image',imageFile:k,enableAsyncUpload:l,position:m&&n?new (c('MediaEffectReactFrameEditorAssetPositionRecord').fromCenter)(m,n):null};c('MediaEffectFrameEditorDispatcher').dispatch(o);},replaceImage:function j(k,l,m){c('MediaEffectFrameEditorDispatcher').dispatch({type:'replace/image',localAssetID:k,imageFile:l,enableAsyncUpload:m});},addTag:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/tag',data:k});},addText:function j(k,l,m){var n={type:'add/text',content:k,position:null};if(l&&m)n.position=new (c('MediaEffectReactFrameEditorAssetPositionRecord').fromCenter)(l,m);c('MediaEffectFrameEditorDispatcher').dispatch(n);},addWhitelistedUser:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/fbWhitelistedUser',data:k});},changeScheduleRange:function j(k,l,m){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/scheduleRange',startTime:k,endTime:l,timezone:m});},changeBackgroundColor:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/backgroundColor',color:k});},changeCategory:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/category',value:k});},changePageLiked:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbPageLiked',value:k});},changeCatalogGKs:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbCatalogGKs',value:k});},changeEligibilityGKs:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbEligibilityGKs',value:k});},changeManualRankWeight:function j(event){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbRankWeight',value:event.target.value});},changeLocales:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locales',value:k});},changeLocationPage:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locationPageID',value:k});},changeLocationTarget:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locationTarget',value:k});},changeName:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/name',value:k});},changeOwner:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/selectedOwnerID',value:k});},updateNameValidation:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/nameValidation',isError:k});},changeRankingStrategy:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbRankingStrategy',value:k});},changeTimingSchedule:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/timingSchedule',value:k});},changeWhitelistCheckEligibility:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbWhitelistCheckEligibility',value:k});},checkOfflineOnly:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/offlineOnly',value:k});},checkSelfBirthday:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/selfBirthday',value:k});},removeWhitelistedUser:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'remove/fbWhitelistedUser',data:k});},removeTag:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'remove/tag',data:k});},updateAssetPosition:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/assetPosition',localAssetID:k,position:l});},setIsDragging:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/isDragging',isDragging:k});},updateAssetSize:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/assetSize',localAssetID:k,size:l});},updateAssetNativeSize:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/assetNativeSize',localAssetID:k,size:l});},updateStickerFBID:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/stickerFBID',localAssetID:k,stickerFBID:l});},updateTextContent:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textContent',localAssetID:k,content:l});},updateTextFonts:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textFonts',localTextIDs:k,font:l});},updateTextColors:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textColors',localTextIDs:k,color:l});},updateTextAlignments:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textAlignments',localTextIDs:k,textAlignment:l});},setFrameFilterID:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/frameFilterID',filterID:k});},setThumbnail:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/thumbnail',thumbnail:k});},save:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'save'});},saveAsDraft:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'save/draft'});},selectAssetOnly:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/assetOnly',localAssetID:k});},selectAsset:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/asset',localAssetID:k});},deselectAsset:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'deselect/asset',localAssetID:k});},editText:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'edit/text',localAssetID:k});},selectAll:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/all'});},deselectAll:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'deselect/all'});},startCamera:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/cameraSource',cameraSource:k});},pauseCamera:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'pause/camera'});},resumeCamera:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'resume/camera'});},stopCamera:function j(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/cameraSource',cameraSource:null});},selectInstruction:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/instruction',instructionID:k});},raiseAsset:function j(k){var l=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/asset/raise',localAssetID:k,toTop:l});},lowerAsset:function j(k){var l=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/asset/lower',localAssetID:k,toBottom:l});},deleteAsset:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'delete/asset',localAssetID:k});},duplicateAsset:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'duplicate/asset',localAssetID:k});},initEffectMetadata:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/effectMetadata',data:k});},initFrameData:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/frameData',data:k});},changeStep:function j(k){if(k>=0)c('MediaEffectFrameEditorDispatcher').dispatch({type:'change/step',step:k});},validate:function j(k){if(k>=0)c('MediaEffectFrameEditorDispatcher').dispatch({type:'form/validate',step:k});},initDialog:function j(k,l,m){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/dialog'});switch(k){case c('MediaEffectFlowType').EVENT:m!==null||h(0);this.changeOwner(c('nullthrows')(m));var n=l.ownersData.find(function(o){return o.id===m;});n||h(0);this.changeName(n.name);break;default:break;}},addFontData:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/fontData',data:k});},addTemplateData:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/templateData',data:k});},applyTemplate:function j(k){var l,m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:l=this;if(k){o.next=5;break;}c('MediaEffectFrameEditorDispatcher').dispatch({type:'clear/template'});o.next=15;break;case 5:o.prev=5;o.next=8;return c('regeneratorRuntime').awrap(k.genFrameData());case 8:m=o.sent;c('MediaEffectFrameEditorDispatcher').dispatch({type:'apply/template',templateFBID:k.templateFBID,frameData:m});o.next=15;break;case 12:o.prev=12;o.t0=o['catch'](5);c('SimpleXUIDialog').showConfirm(o.t0.getErrorDescription(),'Template loading failed. Retry?',function(p){if(p)l.applyTemplate(k);},null);case 15:case 'end':return o.stop();}},null,this,[[5,12]]);},changeEffectHasText:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/effectHasText',value:k});},setScreenDimensions:function j(k,l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/screenDimensions',screenWidth:k,dialogHeight:l});},changeHumanReadableDescription:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/humanReadableDescription',value:k});},setPlaceDescription:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/placeDescription',placeDescription:k});},selectTemplateCategoryID:function j(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/templateCategoryID',value:k});}};f.exports=i;}),null);
__d('MediaEffectReactFrameEditorEditingTextAsset.react',['cx','MediaEffectMetadataActionCreators','React','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectReactFrameEditorEditingTextAsset2=function(q){this.$MediaEffectReactFrameEditorEditingTextAsset1=q.target.value;}.bind(this),this.$MediaEffectReactFrameEditorEditingTextAsset3=function(q){if(q.key==='Enter'){c('MediaEffectMetadataActionCreators').editText(null);}else if(q.key==='Escape'){this.$MediaEffectReactFrameEditorEditingTextAsset1=this.props.assetData.content;c('MediaEffectMetadataActionCreators').editText(null);}}.bind(this),m;}k.prototype.componentWillMount=function(){this.$MediaEffectReactFrameEditorEditingTextAsset1=this.props.assetData.content;};k.prototype.componentDidMount=function(){var l=c('ReactDOM').findDOMNode(this);l.focus();l.setSelectionRange(0,l.value.length);};k.prototype.componentWillUnmount=function(){if(this.props.assetData.content!==this.$MediaEffectReactFrameEditorEditingTextAsset1)c('MediaEffectMetadataActionCreators').updateTextContent(this.props.localAssetID,this.$MediaEffectReactFrameEditorEditingTextAsset1);this.props.onUnmount&&this.props.onUnmount();};k.prototype.render=function(){return (c('React').createElement('input',{className:"_1kg8",defaultValue:this.props.assetData.content,onInput:this.$MediaEffectReactFrameEditorEditingTextAsset2,onKeyDown:this.$MediaEffectReactFrameEditorEditingTextAsset3,style:{color:this.props.assetData.color,fontFamily:this.props.assetData.font.getFontFamily(),fontSize:this.props.textboxHeight,textAlign:this.props.assetData.textHorizontalAlignment,overflow:this.props.readOnly?null:'hidden',backgroundColor:'transparent',border:'none',padding:0},type:'text'}));};f.exports=k;}),null);
__d('MediaEffectReactFrameEditorImageAssetRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({localAssetID:null,file:null,localImageURI:null,hostedImageURI:null,assetSize:null,nativeSize:null,position:null,stickerFBID:null,assetFBID:null,readOnly:false,templateFBID:null}));i=h&&h.prototype;k.prototype.assetType=function(){return 'MediaEffectReactFrameEditorImageAssetRecord';};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectReactFrameEditorImageAsset.react',['cx','Image.react','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorImageAssetRecord','React','ReactDOM','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectReactFrameEditorImageAsset5=function(){this.$MediaEffectReactFrameEditorImageAsset2=true;this.$MediaEffectReactFrameEditorImageAsset1&&this.$MediaEffectReactFrameEditorImageAsset4();}.bind(this),m;}k.prototype.$MediaEffectReactFrameEditorImageAsset4=function(){if(this.$MediaEffectReactFrameEditorImageAsset3)return;this.$MediaEffectReactFrameEditorImageAsset3=true;var l=c('ReactDOM').findDOMNode(this.$MediaEffectReactFrameEditorImageAsset1);c('MediaEffectMetadataActionCreators').updateAssetNativeSize(this.props.localAssetID,new (c('Vector'))(l.width,l.height));};k.prototype.render=function(){return (c('React').createElement(c('Image.react'),{className:"_55jn _4u2a",onLoad:this.$MediaEffectReactFrameEditorImageAsset5,ref:function(l){this.$MediaEffectReactFrameEditorImageAsset1=l;this.$MediaEffectReactFrameEditorImageAsset1&&this.$MediaEffectReactFrameEditorImageAsset2&&this.$MediaEffectReactFrameEditorImageAsset4();}.bind(this),src:this.props.imageRecord.localImageURI||this.props.imageRecord.hostedImageURI}));};f.exports=k;}),null);
__d('MediaEffectReactFrameEditorScalarSizeRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({canvas_size_percentage:50,pixels:0}));i=h&&h.prototype;k.canonical=function(l,m,n){return new k({canvas_size_percentage:100*m/l});};k.prototype.toAbsolute=function(l){return this.canvas_size_percentage/100*l+this.pixels;};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectReactFrameEditorSize',['invariant','immutable','MediaEffectReactFrameEditorScalarSizeRecord','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m,n,o,p,q,r,s=c('immutable').Record;i=babelHelpers.inherits(t,s({width:null,height:null}));j=i&&i.prototype;function t(y,z){j.constructor.call(this,y,z);this.width&&this.height||h(0);}t.canonical=function(y,z){return new t({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.x,y.w(),y.w()/2+y.l),height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.y,y.h(),y.h()/2+y.t)});};t.prototype.toAbsolute=function(y){return new (c('Vector'))(this.width.toAbsolute(y.x),this.height.toAbsolute(y.y));};k=babelHelpers.inherits(u,s({width:null,aspect_ratio:null}));l=k&&k.prototype;function u(y,z){l.constructor.call(this,y,z);this.width&&this.aspect_ratio||h(0);this.aspect_ratio>0||h(0);}u.canonical=function(y,z){return new u({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.x,y.w(),y.w()/2+y.l),aspect_ratio:y.w()/y.h()});};u.prototype.toAbsolute=function(y){var z=this.width.toAbsolute(y.x);return new (c('Vector'))(z,z/this.aspect_ratio);};u.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio;};u.prototype.getDerivedWidth=function(){return this.width;};u.prototype.getDerivedHeight=function(){return new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:this.width.canvas_size_percentage/this.getDerivedAspectRatio()});};u.prototype.getScaledWithWidth=function(){return this;};u.prototype.getNotScaledWithWidth=function(){return new x({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()});};u.prototype.getScaledWithHeight=function(){return new w({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()});};u.prototype.getNotScaledWithHeight=function(){return this;};m=babelHelpers.inherits(v,s({height:null,aspect_ratio:null}));n=m&&m.prototype;function v(y,z){n.constructor.call(this,y,z);this.height&&this.aspect_ratio||h(0);this.aspect_ratio>0||h(0);}v.canonical=function(y,z){return new t({height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.y,y.h(),y.h()/2+y.t),aspect_ratio:y.w()/y.h()});};v.prototype.toAbsolute=function(y){var z=this.height.toAbsolute(y.y);return new (c('Vector'))(z*this.aspect_ratio,z);};v.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio;};v.prototype.getDerivedWidth=function(){return new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:this.height.canvas_size_percentage*this.getDerivedAspectRatio()});};v.prototype.getDerivedHeight=function(){return this.height;};v.prototype.getScaledWithWidth=function(){return new w({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()});};v.prototype.getNotScaledWithWidth=function(){return this;};v.prototype.getScaledWithHeight=function(){return this;};v.prototype.getNotScaledWithHeight=function(){return new x({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()});};o=babelHelpers.inherits(w,s({width:null,height:null,aspect_ratio:null}));p=o&&o.prototype;function w(y,z){p.constructor.call(this,y,z);this.width&&this.height&&this.aspect_ratio||h(0);this.aspect_ratio>0||h(0);}w.canonical=function(y,z){return new t({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.x,y.w(),y.w()/2+y.l),height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.y,y.h(),y.h()/2+y.t),aspect_ratio:y.w()/y.h()});};w.prototype.toAbsolute=function(y){var z=this.width.toAbsolute(y.x),aa=this.height.toAbsolute(y.y),ba=Math.min(z,aa*this.aspect_ratio),ca=Math.min(aa,z/this.aspect_ratio);return new (c('Vector'))(ba,ca);};w.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio;};w.prototype.getDerivedWidth=function(){return this.width;};w.prototype.getDerivedHeight=function(){return this.height;};w.prototype.getScaledWithWidth=function(){return this;};w.prototype.getNotScaledWithWidth=function(){return new v({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()});};w.prototype.getScaledWithHeight=function(){return this;};w.prototype.getNotScaledWithHeight=function(){return new u({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()});};q=babelHelpers.inherits(x,s({width:null,height:null,aspect_ratio:null}));r=q&&q.prototype;function x(y,z){r.constructor.call(this,y,z);this.width&&this.height&&this.aspect_ratio||h(0);this.aspect_ratio>0||h(0);}x.canonical=function(y,z){return new t({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.x,y.w(),y.w()/2+y.l),height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(z.y,y.h(),y.h()/2+y.t),aspect_ratio:y.w()/y.h()});};x.prototype.toAbsolute=function(y){var z=this.width.toAbsolute(y.x),aa=this.height.toAbsolute(y.y),ba=Math.max(z,aa*this.aspect_ratio),ca=Math.max(aa,z/this.aspect_ratio);return new (c('Vector'))(ba,ca);};x.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio;};x.prototype.getDerivedWidth=function(){return this.width;};x.prototype.getDerivedHeight=function(){return this.height;};x.prototype.getScaledWithWidth=function(){return new u({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()});};x.prototype.getNotScaledWithWidth=function(){return this;};x.prototype.getScaledWithHeight=function(){return new v({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()});};x.prototype.getNotScaledWithHeight=function(){return this;};f.exports={Stretch:t,ScaleWidth:u,ScaleHeight:v,Fit:w,Fill:x};}),null);
__d('MediaEffectFrameEditorCardTab.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement('div',null,this.props.children));};function j(){h.apply(this,arguments);}j.defaultProps={activeHeader:null};f.exports=j;}),null);
__d('MediaEffectFrameEditorTabbedCard.react',['cx','Grid.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('Grid.react').GridItem;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$TabHeader1=function(){this.props.onItemClick(this.props.index);}.bind(this),q;}n.prototype.render=function(){return (c('React').createElement('a',{href:'#',onClick:this.$TabHeader1},c('React').createElement('div',{className:"_zn2"+(this.props.active?' '+"_zn4":'')},this.props.active?this.props.activeContent||this.props.content:this.props.content)));};k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$MediaEffectFrameEditorTabbedCard1=function(q){this.setState({activeTabIndex:q});}.bind(this);this.state={activeTabIndex:null};}o.prototype.render=function(){var p=c('React').Children.map(this.props.children,function(r,s){return (c('React').createElement(m,null,c('React').createElement(n,{active:s===this.state.activeTabIndex,activeContent:r.props.activeHeader,content:r.props.header,index:s,onItemClick:this.$MediaEffectFrameEditorTabbedCard1})));}.bind(this)),q=c('React').Children.map(this.props.children,function(r,s){return (c('React').createElement('div',{className:(s===this.state.activeTabIndex?"_zn4":'')+(s!==this.state.activeTabIndex?' '+"_zn8":'')},r));}.bind(this));return (c('React').createElement('div',{className:"_zn9",onMouseDown:this.props.onMouseDown},c('React').createElement(c('Grid.react'),{cols:p.length,style:{margin:'auto'}},p),q));};f.exports=o;}),null);
__d('MediaEffectFrameEditorTextPropertiesDialog.react',['cx','ix','AssetHorizontalAlignmentType','Grid.react','Image.react','MediaEffectEditorFunnelLogger','MediaEffectFrameEditorCardTab.react','MediaEffectFrameEditorTabbedCard.react','MediaEffectMetadataActionCreators','React','XUIContextualDialog.react','color-picker','immutable'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n,o,p=c('Grid.react').GridItem,q=c('immutable').Set,r=i("images\/media_effect\/glyphs\/glyph-align-center.png"),s=i("images\/media_effect\/glyphs\/glyph-align-left.png"),t=i("images\/media_effect\/glyphs\/glyph-align-right.png"),u=i("images\/media_effect\/glyphs\/glyph-align-center-active.png"),v=i("images\/media_effect\/glyphs\/glyph-align-left-active.png"),w=i("images\/media_effect\/glyphs\/glyph-align-right-active.png"),x=i("images\/media_effect\/glyphs\/glyph-font.png"),y=i("images\/media_effect\/glyphs\/glyph-font-active.png"),z=[c('AssetHorizontalAlignmentType').LEFT,c('AssetHorizontalAlignmentType').CENTER,c('AssetHorizontalAlignmentType').RIGHT];j=babelHelpers.inherits(aa,c('React').PureComponent);k=j&&j.prototype;function aa(){var da,ea;for(var fa=arguments.length,ga=Array(fa),ha=0;ha<fa;ha++)ga[ha]=arguments[ha];return ea=(da=k.constructor).call.apply(da,[this].concat(ga)),this.$AlignmentItem1=function(){this.props.onChange(this.props.value);}.bind(this),ea;}aa.prototype.render=function(){return (c('React').createElement('a',{href:'#',onClick:this.$AlignmentItem1},this.props.children));};l=babelHelpers.inherits(ba,c('React').PureComponent);m=l&&l.prototype;function ba(){var da,ea;for(var fa=arguments.length,ga=Array(fa),ha=0;ha<fa;ha++)ga[ha]=arguments[ha];return ea=(da=m.constructor).call.apply(da,[this].concat(ga)),this.$FontMenuItem1=function(){this.props.onChange(this.props.font);}.bind(this),ea;}ba.prototype.render=function(){return (c('React').createElement('div',{onClick:this.$FontMenuItem1},c('React').createElement('div',{className:"_1jhm"},c('React').createElement('div',{className:"_1jhn"},this.props.isSelected?'\u2713':null),c('React').createElement('span',{style:{fontFamily:this.props.font.getFontFamily()}},this.props.font.getName()))));};n=babelHelpers.inherits(ca,c('React').PureComponent);o=n&&n.prototype;function ca(da){o.constructor.call(this,da);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog5=function(ea){c('MediaEffectMetadataActionCreators').updateTextFonts(new q([this.props.localAssetID]),ea);}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog4=function(ea){var fa=this.props.assetData.font.getID()===ea.getID();return (c('React').createElement(p,{key:ea.getID()},c('React').createElement(ba,{font:ea,isSelected:fa,onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog5})));}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9=function(ea){c('MediaEffectMetadataActionCreators').updateTextAlignments(new q([this.props.localAssetID]),ea);}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog12=function(ea){c('MediaEffectMetadataActionCreators').updateTextColors(new q([this.props.localAssetID]),ea);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=ea;}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog13=function(){if(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1){c('MediaEffectEditorFunnelLogger').logChangeTextColor(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=null;}}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog14=function(){return this.props.context;}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=null;}ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog2=function(){return c('React').createElement(c('MediaEffectFrameEditorCardTab.react'),{activeHeader:c('React').createElement('div',{className:"_1jhq"},c('React').createElement(c('Image.react'),{className:"_1jhr",src:y})),header:c('React').createElement('div',{className:"_1jhq"},c('React').createElement(c('Image.react'),{className:"_1jhr",src:x})),key:'fonts'},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog3());};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog3=function(){return c('React').createElement(c('Grid.react'),{alignh:'left',alignv:'middle',cols:1,width:'100%'},this.props.fonts.map(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog4));};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6=function(){return c('React').createElement(c('MediaEffectFrameEditorCardTab.react'),{activeHeader:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7(this.props.assetData.textHorizontalAlignment,true),header:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7(this.props.assetData.textHorizontalAlignment,false),key:'alignment'},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog8());};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7=function(da,ea){return c('React').createElement('div',{className:"_1jhq"},c('React').createElement(c('Image.react'),{className:"_1jhr",src:{center:ea?u:r,left:ea?v:s,right:ea?w:t}[da]}));};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog8=function(){return c('React').createElement(c('Grid.react'),{alignh:'center',alignv:'middle',cols:z.length,style:{margin:'auto'}},z.map(function(da){return c('React').createElement(p,{key:da},c('React').createElement(aa,{onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9,value:da},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7(da,da===this.props.assetData.textHorizontalAlignment)));}.bind(this)));};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog10=function(){return c('React').createElement(c('MediaEffectFrameEditorCardTab.react'),{header:c('React').createElement('div',{className:"_1jhq"},c('React').createElement('div',{className:"_1jhs"},c('React').createElement('div',{className:"_1jht",style:{backgroundColor:this.props.assetData.color}})))},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog11());};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog11=function(){return c('React').createElement('div',{className:"_1jhu",onMouseLeave:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog13,onMouseUp:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog13},c('React').createElement(c('color-picker'),{className:"_1jhv",color:this.props.assetData.color,onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog12}));};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog15=function(da){da.preventDefault();};ca.prototype.render=function(){return (c('React').createElement('div',{className:"_1jhw"},c('React').createElement(c('XUIContextualDialog.react'),{alignment:'center',autoFocus:false,contextRef:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog14,key:'contextualDialog',position:'below',shown:this.props.shown,width:c('XUIContextualDialog.react').WIDTH.NORMAL},c('React').createElement(c('MediaEffectFrameEditorTabbedCard.react'),{onMouseDown:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog15},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog2(),this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(),this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog10()))));};f.exports=ca;}),null);
__d('MediaEffectReactFrameEditorTextAssetRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({assetSize:null,color:null,content:null,font:null,localAssetID:null,position:null,textHorizontalAlignment:null,readOnly:false,templateFBID:null}));i=h&&h.prototype;k.prototype.assetType=function(){return 'MediaEffectReactFrameEditorTextAssetRecord';};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectReactFrameDeserializer',['invariant','immutable','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorScalarAssetPositionRecord','MediaEffectReactFrameEditorScalarSizeRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTextAssetRecord'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Map,j=c('immutable').List;function k(q,r){var s=q;return new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_asset_size_percentage:s.horizontal_alignment==='center'?50:0,anchor_origin:s.horizontal_alignment==='right'?'asset_end':'asset_start',asset_origin:s.horizontal_alignment==='right'?'canvas_end':'canvas_start',asset_canvas_size_percentage:s.horizontal_alignment==='center'?50:s.horizontal_margin}),y:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_asset_size_percentage:s.vertical_alignment==='center'?50:0,anchor_origin:s.vertical_alignment==='bottom'?'asset_end':'asset_start',asset_origin:s.vertical_alignment==='bottom'?'canvas_end':'canvas_start',asset_canvas_size_percentage:s.vertical_alignment==='center'?50:s.vertical_margin})});}function l(q,r,s){var t=r.size_dimension==='width',u=q.size_dimension==='height';if(!t&&!u)return new (c('MediaEffectReactFrameEditorSize').Fill)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:q.size}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:r.size}),aspect_ratio:q.size/r.size});if(t&&u)return new (c('MediaEffectReactFrameEditorSize').Fit)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:r.size}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:q.size}),aspect_ratio:q.size/r.size});if(t)return new (c('MediaEffectReactFrameEditorSize').ScaleWidth)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:r.size}),aspect_ratio:q.size/r.size});return new (c('MediaEffectReactFrameEditorSize').ScaleHeight)({height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:q.size}),aspect_ratio:q.size/r.size});}function m(q,r,s){return new (c('MediaEffectReactFrameEditorSize').Stretch)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:r.textbox_width}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:r.size})});}function n(q){return new (c('MediaEffectReactFrameEditorImageAssetRecord'))({assetFBID:q.asset_id,dynamic_sticker_pack_id:q.dynamic_sticker_pack_id,dynamic_sticker_type:q.dynamic_sticker_type,stickerFBID:q.sticker_id,hostedImageURI:q.sticker_url,position:k(q.landscape_position,q.portrait_position),assetSize:l(q.landscape_position,q.portrait_position,c('MediaEffectReactFrameEditorCanvasDataStore').getState().canvasSize)});}function o(q){var r=q.font_name||q.custom_font_id;!!r||h(0);return new (c('MediaEffectReactFrameEditorTextAssetRecord'))({assetFBID:q.asset_id,content:q.content,font:c('MediaEffectReactFrameEditorCanvasDataStore').getFont(r),color:'#'+q.color,textHorizontalAlignment:q.portrait_position.text_horizontal_alignment,position:k(q.landscape_position,q.portrait_position),assetSize:m(q.landscape_position,q.portrait_position,c('MediaEffectReactFrameEditorCanvasDataStore').getState().canvasSize)});}function p(q){var r=new i(),s=new j().withMutations(function(t){r=r.withMutations(function(u){q.stickers.forEach(function(v,w){var x=n(v);x=x.set('localAssetID',w+1);t.push(x.localAssetID);u.set(x.localAssetID,x);});q.text.forEach(function(v,w){var x=o(v);x=x.set('localAssetID',q.stickers.length+w+1);t.push(x.localAssetID);u.set(x.localAssetID,x);});});});return {assets:r,assetOrder:s,frameFBID:q.fbid,filterID:q.filter_id};}f.exports={deserializeData:p};}),null);
__d('MediaEffectFrameEditorFont',['immutable','TextAssetFontName'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Map,m=c('immutable').Record;h=babelHelpers.inherits(n,m({id:null,name:null,source:null}));i=h&&h.prototype;n.prototype.getName=function(){return this.name;};n.prototype.getFontFamily=function(){return "'"+this.id+"'";};n.prototype.getID=function(){return this.id;};n.prototype.getSystemFontName=function(){return null;};n.prototype.getCustomFontID=function(){return this.id;};n.prototype.getSource=function(){return this.source;};function n(){h.apply(this,arguments);}j=babelHelpers.inherits(o,m({fontFamily:null,name:null}));k=j&&j.prototype;o.prototype.getName=function(){return this.name||this.fontFamily;};o.prototype.getFontFamily=function(){return this.fontFamily;};o.prototype.getID=function(){return this.fontFamily;};o.prototype.getSystemFontName=function(){return this.fontFamily;};o.prototype.getCustomFontID=function(){return null;};o.prototype.getSource=function(){return null;};function o(){j.apply(this,arguments);}var p=new l().withMutations(function(r){Object.values(c('TextAssetFontName')).map(function(s){var t=new o({fontFamily:s});r.set(t.getID(),t);});}),q=p.first();f.exports.CustomFontRecord=n;f.exports.SystemFontRecord=o;f.exports.SYSTEM_FONTS=p;f.exports.DEFAULT_FONT=q;}),null);
__d('MediaEffectFrameEditorConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={EDITOR_BUFFER_SIZE:39};f.exports=h;}),null);
__d('MediaEffectFullscreenFrameEditorSizingUtils',['MediaEffectFrameEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE,i=184,j=12,k=39,l=64,m=24,n=12,o=24,p=40,q=106,r=4,s=70,t=12,u=50,v={getDialogWidth:function w(x,y){return (m+i+n+n+h+j+this.getCanvasSize(x,y)+j+h+n+n+r+this.getPortraitPreviewHeight(x,y)+r+m);},getCanvasSize:function w(x,y){return Math.max(0,Math.min(x-(p+n+i+n+n+h+j+j+h+n+n+q+n+p),y-(k+n+o+2*h+n+l)));},getPortraitPreviewHeight:function w(x,y){return Math.max(q,Math.min(x-(p+n+i+n+h+j+this.getCanvasSize(x,y)+j+h+2*n+p),this.getCanvasSize(x,y)/2));},getPortraitFullPreviewHeight:function w(x,y){return Math.max(0,Math.min(y-64,3*this.getPortraitPreviewHeight(x,y)));},getSquareReviewPreviewWidth:function w(x,y){var z=1+1.1325+1.2849*16/9+.25,aa=120,ba=(x-aa)/z,ca=y-(k+t+s+u+l);return Math.min(9*(ca*.7694174757281553)/16,ba);}};f.exports=v;}),null);
__d('MediaEffectReactFrameEditorCanvasDataStore',['FluxReduceStore','immutable','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorFont','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorTemplateRecord'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Map,m=c('immutable').List,n=c('immutable').OrderedMap,o=c('immutable').Record,p=c('immutable').Set,q=400,r=400,s=2400;h=babelHelpers.inherits(t,o({selectedAssets:new p(),editedTextID:null,isDragging:false,unsavedChanges:false,fullImageSize:s,cameraSource:null,cameraPaused:false,canvasWidth:q,canvasHeight:r,backgroundColor:'#ffffff',fonts:new l(),templates:new l(),templateCategories:new n()}));i=h&&h.prototype;function t(){h.apply(this,arguments);}j=babelHelpers.inherits(u,c('FluxReduceStore'));k=j&&j.prototype;u.prototype.getInitialState=function(){var v=new t();v=v.set('fonts',new l().withMutations(function(w){c('MediaEffectFrameEditorFont').SYSTEM_FONTS.forEach(function(x){w.set(x.getID(),x);});}));return v;};u.prototype.reduce=function(v,w){switch(w.type){case 'select/assetOnly':v=v.set('selectedAssets',new p([w.localAssetID])).set('editedTextID',null);break;case 'select/asset':v=v.set('selectedAssets',v.selectedAssets.add(w.localAssetID)).set('editedTextID',null);break;case 'delete/asset':v=v.set('unsavedChanges',true).set('selectedAssets',v.selectedAssets.remove(w.localAssetID)).set('editedTextID',null);break;case 'duplicate/asset':v=v.set('selectedAssets',new p([c('MediaEffectReactFrameEditorDataStore').getState().assets.map(function(y){return y.localAssetID;}).max()]));break;case 'deselect/asset':v=v.set('selectedAssets',v.selectedAssets.remove(w.localAssetID)).set('editedTextID',null);break;case 'deselect/all':v=v.set('selectedAssets',v.selectedAssets.clear()).set('editedTextID',null);break;case 'edit/text':v=v.set('editedTextID',w.localAssetID);break;case 'select/all':v=v.set('selectedAssets',p.fromKeys(c('MediaEffectReactFrameEditorDataStore').getState().assets));v.set('editedTextID',null);break;case 'init/frameData':v=v.set('selectedAssets',new p()).set('isDragging',false).set('unsavedChanges',false);break;case 'add/fontData':if(w.data)v=v.set('fonts',this.$MediaEffectReactFrameEditorCanvasDataStore1(v.fonts,w.data));break;case 'add/templateData':v=this.$MediaEffectReactFrameEditorCanvasDataStore2(v,w.data);break;case 'set/isDragging':v=v.set('isDragging',w.isDragging);break;case 'save':v=v.set('unsavedChanges',false);break;case 'add/image':case 'add/text':case 'update/assetPosition':case 'update/assetSize':case 'update/asset/raise':case 'update/asset/lower':case 'update/textContent':case 'update/textFonts':v=v.set('unsavedChanges',true);break;case 'set/cameraSource':v=v.set('cameraSource',w.cameraSource);break;case 'pause/camera':v=v.set('cameraPaused',true);break;case 'resume/camera':v=v.set('cameraPaused',false);break;case 'update/backgroundColor':v=v.set('backgroundColor',w.color);break;case 'set/screenDimensions':var x=c('MediaEffectFullscreenFrameEditorSizingUtils').getCanvasSize(w.screenWidth,w.dialogHeight);v=v.set('canvasWidth',x).set('canvasHeight',x);break;case 'apply/template':v=this.$MediaEffectReactFrameEditorCanvasDataStore3(v,w.templateFBID,w.frameData);break;}return v;};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore3=function(v,w,x){return v.setIn(['templates',w,'frameData'],x);};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore1=function(v,w){var x=[],y=v.withMutations(function(z){w.forEach(function(aa){var ba=new (c('MediaEffectFrameEditorFont').CustomFontRecord)({id:aa.id,name:aa.name,source:aa.uri}),ca=z.get(ba.getID());if(!ca||ca.id!==ba.id||ca.name!==ba.name||ca.source!==ba.source){x.push(aa);z.set(ba.getID(),ba);}});});this.$MediaEffectReactFrameEditorCanvasDataStore4(x);return y;};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore2=function(v,w){return v.withMutations(function(x){Object.keys(w).forEach(function(y){var z=w[y];z.forEach(function(ba){if(!x.templates.has(ba.id)){var ca=new (c('MediaEffectReactFrameEditorTemplateRecord'))({templateFBID:ba.id,previewURL:ba.uri});x.setIn(['templates',ba.id],ca);}});var aa=z.map(function(ba){return ba.id;});x.setIn(['templateCategories',y],new m(aa));});});};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore4=function(v){var w=document.getElementById('custom_frame_fonts'),x=w||document.createElement('style');if(!w)x.setAttribute('id','custom_frame_fonts');var y=new p(v.map(function(ca){return ('@font-face { '+'font-family: \''+ca.id+'\'; '+'src: url(\''+ca.uri+'\') format(\'opentype\');'+'}');}));for(var z=0;z<x.childNodes.length;++z){var aa=x.childNodes.item(z);if(aa instanceof Text)y['delete'](aa.data);}y.forEach(function(ca){return x.appendChild(document.createTextNode(ca));});if(!w){var ba=document.head||document.getElementsByTagName('head')[0];ba&&ba.appendChild(x);}};u.prototype.hasUnsavedChanges=function(){return this.getState().unsavedChanges;};u.prototype.getFont=function(v){var w=this.getState().fonts,x=w.get(v);return x||c('MediaEffectFrameEditorFont').DEFAULT_FONT;};u.prototype.getFonts=function(){return this.getState().fonts.toArray().sort(function(v,w){return (v.getName().toLowerCase().localeCompare(w.getName().toLowerCase()));});};u.prototype.getInitialImageScale=function(){var v=this.getState().fullImageSize;return 100/v;};function u(){j.apply(this,arguments);}f.exports=new u(c('MediaEffectFrameEditorDispatcher'));}),null);
__d("XGetUploadedImageForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/upload_poll\/",{job_id:{type:"String",required:true}});}),null);
__d("XUploadImageForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/upload\/",{});}),null);
__d("XUploadImageWithConversionForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/upload_convert\/",{});}),null);
__d('MediaEffectReactFrameEditorDataStore',['fbt','AsyncRequest','AsyncUploadRequest','FluxReduceStore','immutable','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorFont','MediaEffectMetadataActionCreators','MediaEffectReactFrameDeserializer','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorScalarSizeRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTextAssetRecord','Vector','XGetUploadedImageForFrameEditorController','XUploadImageForFrameEditorController','XUploadImageWithConversionForFrameEditorController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('immutable').Record,n=c('immutable').List,o=c('immutable').Map,p=1;function q(){return p++;}i=babelHelpers.inherits(r,m({assets:new o(),assetOrder:new n(),frameFBID:null,filterID:null,templateFBID:null}));j=i&&i.prototype;r.prototype.withNewAsset=function(t,u){return this.withMutations(function(v){v.set('assets',this.assets.set(t,u)).set('assetOrder',this.assetOrder.push(t));}.bind(this));};r.prototype.withDeletedAsset=function(t){var u=this.assetOrder,v=this.assets,w=u.indexOf(t),x=u.splice(w,1),y=v.remove(t);return this.withMutations(function(z){z.set('assets',y).set('assetOrder',x);});};r.prototype.replaceAsset=function(t,u){return this.set('assets',this.assets.set(t,u));};function r(){i.apply(this,arguments);}k=babelHelpers.inherits(s,c('FluxReduceStore'));l=k&&k.prototype;s.prototype.getInitialState=function(){return new r();};s.prototype.$MediaEffectReactFrameEditorDataStore1=function(t){var u=this.getInitialState();if(t){var v=c('MediaEffectReactFrameDeserializer').deserializeData(t);u=u.set('assets',v.assets).set('assetOrder',v.assetOrder).set('frameFBID',v.frameFBID).set('filterID',v.filterID);}var w=u.assets.size>0?Math.max.apply(Math,u.assets.map(function(x){return x.localAssetID;}).toArray()):0;p=w+1;return u;};s.prototype.$MediaEffectReactFrameEditorDataStore2=function(t,u,v){var w=t.assets,x=w.get(u);return t.set('assets',w.set(u,x.withMutations(v)));};s.prototype.$MediaEffectReactFrameEditorDataStore3=function(t,u,v){return this.$MediaEffectReactFrameEditorDataStore4(t,u,v,1);};s.prototype.$MediaEffectReactFrameEditorDataStore5=function(t,u,v){return this.$MediaEffectReactFrameEditorDataStore4(t,u,v,-1);};s.prototype.$MediaEffectReactFrameEditorDataStore4=function(t,u,v,w){var x=t.assetOrder,y=t.assets,z=y.get(u),aa=x.indexOf(u);if(aa===(w>0?x.size-1:0))return t;var ba=v?w>0?x.size:0:aa+w;for(;ba<x.size&&ba>0;ba+=w){var ca=y.get(x.get(ba));if(z.assetType()===ca.assetType())break;}var da=x.splice(aa,1).splice(ba,0,u);return t.set('assetOrder',da);};s.prototype.reduce=function(t,u){var v,w=this;switch(u.type){case 'init/frameData':t=this.$MediaEffectReactFrameEditorDataStore1(u.data);break;case 'add/image':var x=q(),y=new (c('MediaEffectReactFrameEditorImageAssetRecord'))({localAssetID:x,file:u.imageFile,localImageURI:URL.createObjectURL(u.imageFile),position:u.position?u.position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))(),assetSize:null});t=t.withNewAsset(x,y);if(u.enableAsyncUpload){this.$MediaEffectReactFrameEditorDataStore6(x,y);}else this.$MediaEffectReactFrameEditorDataStore7(x,y);break;case 'replace/image':var z=t.assets.get(u.localAssetID)||new (c('MediaEffectReactFrameEditorImageAssetRecord'))(),aa=new (c('MediaEffectReactFrameEditorImageAssetRecord'))({localAssetID:u.localAssetID,file:u.imageFile,localImageURI:URL.createObjectURL(u.imageFile),position:z.position,assetSize:z.assetSize});t=t.replaceAsset(u.localAssetID,aa);if(u.enableAsyncUpload){this.$MediaEffectReactFrameEditorDataStore6(u.localAssetID,aa);}else this.$MediaEffectReactFrameEditorDataStore7(u.localAssetID,aa);break;case 'add/text':var ba=u.content||h._("Enter text here").toString(),ca=!u.content,da=q(),ea=new (c('MediaEffectReactFrameEditorTextAssetRecord'))({localAssetID:da,position:u.position||new (c('MediaEffectReactFrameEditorAssetPositionRecord'))(),font:c('MediaEffectFrameEditorFont').DEFAULT_FONT,fontName:'helvetica',content:ba,assetSize:new (c('MediaEffectReactFrameEditorSize').Stretch)({height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:10}),width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:100})}),color:'#ffffff',textHorizontalAlignment:'center'});if(ca)window.setTimeout(function(){c('MediaEffectMetadataActionCreators').selectAssetOnly(da);c('MediaEffectMetadataActionCreators').editText(da);},0);t=t.withNewAsset(da,ea);break;case 'duplicate/asset':var fa=q(),ga=this.$MediaEffectReactFrameEditorDataStore8(fa,t.assets.get(u.localAssetID));if(ga)t=t.withNewAsset(fa,ga);break;case 'update/assetPosition':var ha=u.position;t=this.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ua){return (ua.set('position',ha));});break;case 'update/assetSize':var ia=u.size;t=this.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ua){return (ua.set('assetSize',ia));});break;case 'update/assetNativeSize':var ja=u.size;t=this.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ua){return (ua.set('nativeSize',ja));});var ka=t.assets.get(u.localAssetID).assetSize;if(ja.y){var la=ja.x/ja.y;if(!ka){var ma=c('MediaEffectReactFrameEditorCanvasDataStore').getInitialImageScale();ka=new (c('MediaEffectReactFrameEditorSize').Fit)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:ja.x*ma}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:ja.y*ma}),aspect_ratio:la});}else ka=ka.set('aspect_ratio',la);}t=this.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ua){return (ua.set('assetSize',ka));});if(!!ka&&!!ka.height&&!!ka.width)(function(){var ua=t.assets.get(u.localAssetID).position,va=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),wa=va.canvasWidth,xa=va.canvasHeight,ya=new (c('Vector'))(wa,xa),za=c('MediaEffectReactFrameEditorAssetPositionRecord').canonical(ua.toAbsolute(ya,ka.toAbsolute(ya)),ya);t=w.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ab){return (ab.set('position',za));});})();break;case 'update/stickerFBID':var na=u.stickerFBID;t=this.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ua){return (ua.set('stickerFBID',na));});break;case 'update/asset/raise':var oa=u.toTop;t=this.$MediaEffectReactFrameEditorDataStore3(t,u.localAssetID,oa);break;case 'update/asset/lower':var pa=u.toBottom;t=this.$MediaEffectReactFrameEditorDataStore5(t,u.localAssetID,pa);break;case 'delete/asset':t=t.withDeletedAsset(u.localAssetID);break;case 'update/textContent':var qa=u.content;t=this.$MediaEffectReactFrameEditorDataStore2(t,u.localAssetID,function(ua){return (ua.set('content',qa));});break;case 'update/textFonts':var ra=u.font;u.localTextIDs.forEach(function(ua){return (t=this.$MediaEffectReactFrameEditorDataStore2(t,ua,function(va){return va.set('font',ra);}));}.bind(this));break;case 'update/textColors':var sa=u.color;u.localTextIDs.forEach(function(ua){return (t=this.$MediaEffectReactFrameEditorDataStore2(t,ua,function(va){return va.set('color',sa);}));}.bind(this));break;case 'update/textAlignments':var ta=u.textAlignment;u.localTextIDs.forEach(function(ua){return (t=this.$MediaEffectReactFrameEditorDataStore2(t,ua,function(va){return va.set('textHorizontalAlignment',ta);}));}.bind(this));break;case 'update/frameFilterID':t=t.set('filterID',u.filterID);break;case 'apply/template':t=this.$MediaEffectReactFrameEditorDataStore9(t,u.templateFBID,u.frameData);break;case 'clear/template':t=this.$MediaEffectReactFrameEditorDataStore10(t);break;}return t;};s.prototype.$MediaEffectReactFrameEditorDataStore10=function(t){t.assets.forEach(function(u){if(u.templateFBID!==null)t=t.withDeletedAsset(u.localAssetID);});return t.set('templateFBID',null);};s.prototype.$MediaEffectReactFrameEditorDataStore9=function(t,u,v){t=this.$MediaEffectReactFrameEditorDataStore10(t);t=t.set('templateFBID',v.frameFBID).set('filterID',v.filterID);v.assetOrder.forEach(function(w){var x=q(),y=v.assets.get(w),z=y.set('localAssetID',x).set('templateFBID',v.frameFBID).set('readOnly',y instanceof c('MediaEffectReactFrameEditorImageAssetRecord'));t=t.withNewAsset(x,z);});return t;};s.prototype.$MediaEffectReactFrameEditorDataStore7=function(t,u){var v=c('XUploadImageForFrameEditorController').getURIBuilder().getURI(),w=new (c('AsyncUploadRequest'))(v).setFiles({flist:[u.file]}).setAllowCrossOrigin(false);w.subscribe('failure',function(){this.$MediaEffectReactFrameEditorDataStore7(t,u);}.bind(this));w.subscribe('success',function(x,y){c('MediaEffectMetadataActionCreators').updateStickerFBID(t,y.getResponse().payload.id.toString());});w.send();};s.prototype.$MediaEffectReactFrameEditorDataStore6=function(t,u){var v=c('XUploadImageWithConversionForFrameEditorController').getURIBuilder().getURI(),w=new (c('AsyncUploadRequest'))(v).setFiles({flist:[u.file]}).setAllowCrossOrigin(false);w.subscribe('failure',function(){this.$MediaEffectReactFrameEditorDataStore7(t,u);}.bind(this));w.subscribe('success',function(x,y){this.$MediaEffectReactFrameEditorDataStore11(t,y.getResponse().payload.job_id.toString());}.bind(this));w.send();};s.prototype.$MediaEffectReactFrameEditorDataStore11=function(t,u){var v=c('XGetUploadedImageForFrameEditorController').getURIBuilder().setString('job_id',u).getURI(),w=new (c('AsyncRequest'))(v).setAllowCrossOrigin(false);w.setErrorHandler(function(){});w.setHandler(function(x){var y=x.getPayload();if(y&&y.id){c('MediaEffectMetadataActionCreators').updateStickerFBID(t,y.id.toString());}else setTimeout(function(){return this.$MediaEffectReactFrameEditorDataStore11(t,u);}.bind(this),1000);}.bind(this));w.send();};s.prototype.$MediaEffectReactFrameEditorDataStore8=function(t,u){if(u.assetType()==='MediaEffectReactFrameEditorImageAssetRecord'){if(!u.stickerFBID)return null;return new (c('MediaEffectReactFrameEditorImageAssetRecord'))({assetSize:u.assetSize,file:u.file,hostedImageURI:u.hostedImageURI,localImageURI:u.localImageURI,nativeSize:u.nativeSize,stickerFBID:u.stickerFBID,assetFBID:null,localAssetID:t,position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))()});}else return new (c('MediaEffectReactFrameEditorTextAssetRecord'))({assetSize:u.assetSize,color:u.color,content:u.content,font:u.font,textHorizontalAlignment:u.textHorizontalAlignment,assetFBID:null,localAssetID:t,position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))()});};s.prototype.isValidForSubmit=function(){var t=this.getState().assets;return t.size>0&&t.every(function(u){return (!(u instanceof c('MediaEffectReactFrameEditorImageAssetRecord'))||u.stickerFBID!==null);});};function s(){k.apply(this,arguments);}f.exports=new s(c('MediaEffectFrameEditorDispatcher'));}),null);
__d("XMediaEffectAsyncTemplateLoadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/template\/load\/",{template_id:{type:"FBID"}});}),null);
__d('MediaEffectReactFrameEditorTemplateRecord',['regeneratorRuntime','AsyncRequest','immutable','MediaEffectReactFrameDeserializer','XMediaEffectAsyncTemplateLoadController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({templateFBID:null,previewURL:null,frameData:null}));i=h&&h.prototype;k.prototype.genFrameData=function l(){var m,n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:if(!this.frameData){q.next=2;break;}return q.abrupt('return',this.frameData);case 2:m=c('XMediaEffectAsyncTemplateLoadController').getURIBuilder().getURI();q.next=5;return c('regeneratorRuntime').awrap(new (c('AsyncRequest'))().setURI(m).setData({template_id:this.templateFBID}).exec());case 5:n=q.sent;o=n.payload.frameData;return q.abrupt('return',c('MediaEffectReactFrameDeserializer').deserializeData(o));case 8:case 'end':return q.stop();}},null,this);};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectFrameEditorTextPropertiesDialogContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorTextPropertiesDialog.react','MediaEffectReactFrameEditorCanvasDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorCanvasDataStore')];};j.calculateState=function(k,l){return {fonts:c('MediaEffectReactFrameEditorCanvasDataStore').getFonts()};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectFrameEditorTextPropertiesDialog.react'),k));};function j(){h.apply(this,arguments);}j.defaultProps={};f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectReactFrameEditorTextAsset.react',['cx','MediaEffectFrameEditorTextPropertiesDialogContainer.react','MediaEffectMetadataActionCreators','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_1kg8",ref:function(l){if(l)this.$MediaEffectReactFrameEditorTextAsset1=l;}.bind(this)},c('React').createElement('span',{className:"_1kg8",style:{color:this.props.assetData.color,fontFamily:this.props.assetData.font.getFontFamily(),fontSize:this.props.textboxHeight,textAlign:this.props.assetData.textHorizontalAlignment,overflow:this.props.readOnly?null:'hidden'}},this.props.assetData.content),this.props.readOnly||!this.$MediaEffectReactFrameEditorTextAsset1||!this.props.enableFontSettingsDialog?null:c('React').createElement(c('MediaEffectFrameEditorTextPropertiesDialogContainer.react'),{assetData:this.props.assetData,context:this.$MediaEffectReactFrameEditorTextAsset1,localAssetID:this.props.localAssetID,shown:this.props.selected})));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectReactFrameEditorAsset.react',['cx','fbt','DOMQuery','FBDragHandle.react','FBToggleSwitch.react','FileInput.react','InputLabel.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorEditingTextAsset.react','MediaEffectReactFrameEditorImageAsset.react','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTextAsset.react','MediaEffectReactFrameEditorTextAssetRecord','MountedContextMenu.react','PopoverMenu.react','React','ReactDOM','ReactXUIMenu','MenuSeparator.react','SimpleXUIDialog','XUIPopoverButton.react','emptyFunction','immutable'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactXUIMenu').Item,m=c('ReactXUIMenu').ItemNoAction,n=c('immutable').Map;function o(q){return {top:q.t,left:q.l,width:q.w(),height:q.h(),position:'absolute'};}j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MediaEffectReactFrameEditorAsset1=[],this.$MediaEffectReactFrameEditorAsset2=[],this.$MediaEffectReactFrameEditorAsset3=null,this.$MediaEffectReactFrameEditorAsset4=null,this.$MediaEffectReactFrameEditorAsset5=function(){if(this.props.assetData instanceof c('MediaEffectReactFrameEditorTextAssetRecord')&&!this.props.readOnly&&this.props.enableEditorFreeText)c('MediaEffectMetadataActionCreators').editText(this.props.localAssetID);}.bind(this),this.$MediaEffectReactFrameEditorAsset8=function(event){if(this.props.readOnly)return;if(event.button===0)if(!this.props.selected){if(!event.shiftKey)c('MediaEffectMetadataActionCreators').deselectAll();c('MediaEffectMetadataActionCreators').selectAsset(this.props.localAssetID);}else if(event.shiftKey)c('MediaEffectMetadataActionCreators').deselectAsset(this.props.localAssetID);}.bind(this),r;}p.prototype.render=function(){var q=this.getAbsolutePosition(),r=q?o(q):{display:'none'};if(q){if(!this.$MediaEffectReactFrameEditorAsset3)this.$MediaEffectReactFrameEditorAsset3=this.$MediaEffectReactFrameEditorAsset6();if(!this.$MediaEffectReactFrameEditorAsset4)this.$MediaEffectReactFrameEditorAsset4=this.$MediaEffectReactFrameEditorAsset6();}var s=c('React').createElement('div',{style:r},this.$MediaEffectReactFrameEditorAsset7(q));if(!this.props.readOnly&&this.props.editedTextID!==this.props.localAssetID){return c('React').createElement('div',{onDoubleClick:this.$MediaEffectReactFrameEditorAsset5,onMouseDown:this.$MediaEffectReactFrameEditorAsset8},c('React').createElement(c('FBDragHandle.react'),{horizontal:true,initialData:function(){return this.props.initialPositionMap;}.bind(this),key:this.props.localAssetID,onChange:function(){var t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return (t=this.props).onDrag.apply(t,[this.props.localAssetID].concat(v));}.bind(this),onEnd:this.props.onDrop,stopOnLeave:false,vertical:true},s,c('React').createElement('div',{className:"_sdt",ref:function(t){return t&&this.$MediaEffectReactFrameEditorAsset4&&this.$MediaEffectReactFrameEditorAsset9(t,this.$MediaEffectReactFrameEditorAsset4);}.bind(this),style:r},c('React').createElement('div',null),c('React').createElement('div',{className:"_1ytk"},c('React').createElement('div',{className:"_1ytl"}),this.$MediaEffectReactFrameEditorAsset3?c('React').createElement(c('PopoverMenu.react'),{alignh:'center',alignv:'top',className:"_1ytm",menu:this.$MediaEffectReactFrameEditorAsset3,onMouseDown:this.$MediaEffectReactFrameEditorAsset10},c('React').createElement(c('XUIPopoverButton.react'),null)):null))));}else return s;};p.prototype.$MediaEffectReactFrameEditorAsset10=function(q){if(q.button===0){q.stopPropagation();q.preventDefault();}};p.prototype.getAbsolutePosition=function(q,r){var s=q||this.props.assetData.assetSize,t=r||this.props.assetData.position;if(!s)return null;var u=s.toAbsolute(this.props.canvasSize),v=t.toAbsolute(this.props.canvasSize,u);return v;};p.prototype.$MediaEffectReactFrameEditorAsset7=function(q){return this.props.assetData instanceof c('MediaEffectReactFrameEditorImageAssetRecord')?this.$MediaEffectReactFrameEditorAsset11(this.props.assetData):this.$MediaEffectReactFrameEditorAsset12(this.props.assetData,q&&q.h());};p.prototype.$MediaEffectReactFrameEditorAsset11=function(q){return (c('React').createElement(c('MediaEffectReactFrameEditorImageAsset.react'),{imageRecord:q,key:this.props.localAssetID,localAssetID:this.props.localAssetID}));};p.prototype.$MediaEffectReactFrameEditorAsset12=function(q,r){var s=this.props.editedTextID===this.props.localAssetID;if(s){return (c('React').createElement(c('MediaEffectReactFrameEditorEditingTextAsset.react'),{assetData:q,key:this.props.localAssetID,localAssetID:this.props.localAssetID,onUnmount:this.props.focusCanvas,readOnly:this.props.readOnly,textboxHeight:r}));}else return (c('React').createElement(c('MediaEffectReactFrameEditorTextAsset.react'),{assetData:q,enableFontSettingsDialog:this.props.enableFontSettingsDialog,key:this.props.localAssetID,localAssetID:this.props.localAssetID,readOnly:this.props.readOnly,selected:this.props.selected,textboxHeight:r}));};p.prototype.$MediaEffectReactFrameEditorAsset9=function(q,r){if(this.props.readOnly)return;var s=c('ReactDOM').findDOMNode(q),t=c('React').createElement(c('MountedContextMenu.react'),{mountedTriggerElem:s,menu:r}),u=s.children[0];c('ReactDOM').render(t,u);};p.prototype.$MediaEffectReactFrameEditorAsset6=function(){var q=this.$MediaEffectReactFrameEditorAsset13(),r=q?i._("Are you sure you want to delete this text?"):i._("Are you sure you want to delete this art?");return (c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(l,{onclick:function(){return c('MediaEffectMetadataActionCreators').raiseAsset(this.props.localAssetID);}.bind(this)},i._("Bring forward")),c('React').createElement(l,{onclick:function(){return c('MediaEffectMetadataActionCreators').raiseAsset(this.props.localAssetID,true);}.bind(this)},i._("Bring to front")),c('React').createElement(l,{onclick:function(){return c('MediaEffectMetadataActionCreators').lowerAsset(this.props.localAssetID);}.bind(this)},i._("Send backward")),c('React').createElement(l,{onclick:function(){return c('MediaEffectMetadataActionCreators').lowerAsset(this.props.localAssetID,true);}.bind(this)},i._("Send to back")),c('React').createElement(c('MenuSeparator.react'),null),!q&&c('React').createElement(l,{renderas:'label'},c('React').createElement(c('FileInput.react'),{accept:'image/x-png, image/jpeg, image/png',multiple:false,onChange:function(s){return s.target.files[0]&&c('MediaEffectMetadataActionCreators').replaceImage(this.props.localAssetID,s.target.files[0],this.props.enableAsyncUpload);}.bind(this)},c('React').createElement('a',{style:{color:'inherit',textDecoration:'none'}},i._("Replace Art")))),c('React').createElement(l,{onclick:function(){return c('MediaEffectMetadataActionCreators').duplicateAsset(this.props.localAssetID);}.bind(this)},i._("Duplicate")),c('React').createElement(l,{onclick:function(){return (c('SimpleXUIDialog').showConfirm(r,null,function(s){return s?c('MediaEffectMetadataActionCreators').deleteAsset(this.props.localAssetID):null;}.bind(this)));}.bind(this)},i._("Delete")),c('React').createElement(c('MenuSeparator.react'),null),c('React').createElement(m,{onclick:function(){if(!q){this.$MediaEffectReactFrameEditorAsset14();c('MediaEffectEditorFunnelLogger').logSetScaleWithWidth((!this.$MediaEffectReactFrameEditorAsset15()).toString());}}.bind(this)},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:this.$MediaEffectReactFrameEditorAsset15(),disabled:q,ref:function(s){return s&&this.$MediaEffectReactFrameEditorAsset1.push(c('DOMQuery').find(c('ReactDOM').findDOMNode(s),'input'));}.bind(this)}),c('React').createElement('label',null,i._("Shrink with width")))),c('React').createElement(m,{onclick:function(){if(!q){this.$MediaEffectReactFrameEditorAsset16();c('MediaEffectEditorFunnelLogger').logSetScaleWithHeight((!this.$MediaEffectReactFrameEditorAsset17()).toString());}}.bind(this)},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:this.$MediaEffectReactFrameEditorAsset17(),disabled:q,ref:function(s){return s&&this.$MediaEffectReactFrameEditorAsset2.push(c('DOMQuery').find(c('ReactDOM').findDOMNode(s),'input'));}.bind(this)}),c('React').createElement('label',null,i._("Shrink with height"))))));};p.prototype.$MediaEffectReactFrameEditorAsset15=function(){var q=this.props.assetData.assetSize;if(this.$MediaEffectReactFrameEditorAsset13()||!q)return false;if(!q)return true;return (q instanceof c('MediaEffectReactFrameEditorSize').Fit||q instanceof c('MediaEffectReactFrameEditorSize').ScaleWidth);};p.prototype.$MediaEffectReactFrameEditorAsset17=function(){var q=this.props.assetData.assetSize;if(this.$MediaEffectReactFrameEditorAsset13())return true;if(!q)return true;return (q instanceof c('MediaEffectReactFrameEditorSize').Fit||q instanceof c('MediaEffectReactFrameEditorSize').ScaleHeight);};p.prototype.$MediaEffectReactFrameEditorAsset14=function(){var q=this.props.assetData.assetSize;if(!q)return;var r=this.$MediaEffectReactFrameEditorAsset15()?q.getNotScaledWithWidth():q.getScaledWithWidth();if(r===q)return;c('MediaEffectMetadataActionCreators').updateAssetSize(this.props.localAssetID,r);};p.prototype.$MediaEffectReactFrameEditorAsset16=function(){var q=this.props.assetData.assetSize;if(!q)return;var r=this.$MediaEffectReactFrameEditorAsset17()?q.getNotScaledWithHeight():q.getScaledWithHeight();if(r===q)return;c('MediaEffectMetadataActionCreators').updateAssetSize(this.props.localAssetID,r);};p.prototype.$MediaEffectReactFrameEditorAsset13=function(){return (this.props.assetData.assetType()==='MediaEffectReactFrameEditorTextAssetRecord');};p.prototype.componentDidUpdate=function(){this.$MediaEffectReactFrameEditorAsset1.forEach(function(q){return q.checked=this.$MediaEffectReactFrameEditorAsset15();}.bind(this));this.$MediaEffectReactFrameEditorAsset2.forEach(function(q){return q.checked=this.$MediaEffectReactFrameEditorAsset17();}.bind(this));};p.defaultProps={onDrag:c('emptyFunction'),onDrop:c('emptyFunction'),initialPositionMap:new n(),readOnly:false,selected:false,editedTextID:null,enableFontSettingsDialog:false,enableEditorFreeText:false};f.exports=p;}),null);
__d('MediaEffectReactFrameEditorPreviewCanvas.react',['cx','MediaEffectReactFrameEditorAsset.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_5mqu",style:{backgroundColor:this.props.backgroundColor,width:this.props.previewSize.x,height:this.props.previewSize.y,backgroundSize:this.props.previewSize.x>this.props.previewSize.y?this.props.previewSize.x/10:this.props.previewSize.y/10,backgroundImage:this.props.disableCheckerboard?'none':null}},this.props.assetOrder.map(function(l){return (c('React').createElement(c('MediaEffectReactFrameEditorAsset.react'),{assetData:this.props.assets.get(l),canvasSize:this.props.previewSize,enableAsyncUpload:false,key:l,localAssetID:l,readOnly:true}));}.bind(this))));};function k(){i.apply(this,arguments);}k.defaultProps={disableCheckerboard:false};f.exports=k;}),null);
__d('MediaEffectFramePhonePreview.react',['cx','ix','Image.react','immutable','MediaEffectReactFrameEditorPreviewCanvas.react','React','Vector'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').List,m=c('immutable').Map,n=1.2849,o=1.1727,p=1.1325,q=1.307;j=babelHelpers.inherits(r,c('React').PureComponent);k=j&&j.prototype;r.prototype.render=function(){var s=this.props,t=s.previewWidth,u=s.previewHeight,v=u>t,w=v?p:n,x=v?q:o;return (c('React').createElement('div',{className:"_3076"},c('React').createElement(c('Image.react'),{height:u*x,src:v?i("images\/media_effect\/frame_preview\/portrait_trimmed.png"):i("images\/media_effect\/frame_preview\/landscape_trimmed.png"),width:t*w}),c('React').createElement('div',{className:(v?"_5znd":'')+(!v?' '+"_5znl":'')},c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvas.react'),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.backgroundColor,previewSize:new (c('Vector'))(t,u)}))));};function r(){j.apply(this,arguments);}f.exports=r;}),null);
__d('MediaEffectFramePhonePreviewContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectFramePhonePreview.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')];};j.calculateState=function(){var k=c('MediaEffectReactFrameEditorDataStore').getState(),l=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:k.assets,assetOrder:k.assetOrder,backgroundColor:l.backgroundColor};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.prototype.render=function(){return (c('React').createElement(c('MediaEffectFramePhonePreview.react'),{assetOrder:this.state.assetOrder,assets:this.state.assets,backgroundColor:this.state.backgroundColor,previewHeight:this.props.previewHeight,previewWidth:this.props.previewWidth}));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectEventOwnerTile.react',['ix','cx','fbt','Image.react','React','XUIText.react','fbglyph','formatDate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;m.prototype.$MediaEffectEventOwnerTile1=function(n,o){var p='';if(n)p+=c('formatDate')(new Date(n),'D M j');if(o)p+=' - '+c('formatDate')(new Date(o),'D M j');return p;};m.prototype.$MediaEffectEventOwnerTile2=function(n){var o='';if(n){o+=n.name;if(n.location)o+=', '+n.location.city;}return o;};m.prototype.render=function(){var n=this.props,o=n.start_time,p=n.end_time,q=n.place,r=this.$MediaEffectEventOwnerTile1(o,p),s=this.$MediaEffectEventOwnerTile2(q);return (c('React').createElement('div',{className:"_5zsm"},c('React').createElement(c('Image.react'),{src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_24_fig-red.png")}),c('React').createElement('div',{className:"_5zsn"},c('React').createElement(c('XUIText.react'),{size:'large',weight:'bold'},j._("Event:")),c('React').createElement(c('XUIText.react'),{className:"_3-99",size:'large'},j._("{date range}",[j.param('date range',r)]),r!==''&&s!==''?', ':null,j._("{location}",[j.param('location',s)])))));};function m(){k.apply(this,arguments);}f.exports=m;}),null);
__d('MediaEffectEventOwnerTileContainer.react',['FluxContainer','LoadingIndicator.react','MediaEffectEventDataStore','MediaEffectEventOwnerTile.react','MediaEffectFrameEditorDispatcher','MediaEffectMetadataStore','React','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectEventDataStore'),c('MediaEffectMetadataStore')];};j.calculateState=function(){var k=c('MediaEffectMetadataStore').getState().selectedOwnerID;if(k)return {event:c('MediaEffectEventDataStore').get(k)};return {};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(j.getStores());};j.prototype.render=function(){var event=this.state.event;return event&&event.hasValue()?c('React').createElement(c('MediaEffectEventOwnerTile.react'),c('nullthrows')(this.state.event).getValueEnforcing()):c('React').createElement(c('LoadingIndicator.react'),{color:'white',size:'medium'});};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('MediaEffectOwnerByline.react',['cx','MediaEffectEventOwnerTileContainer.react','ProfileTile.react','React','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){switch(k.owner.type){case 'event':return c('React').createElement(c('MediaEffectEventOwnerTileContainer.react'),null);default:return (c('React').createElement(c('ProfileTile.react'),{id:c('nullthrows')(k.owner).id,imageProps:{className:"_3fc8"},name:c('nullthrows')(k.owner).name,tileProps:{className:"_5zs5"},titleProps:{className:"_loe"}}));}};f.exports=i;}),null);
__d('MediaEffectReactFrameEditorPreviewCanvasContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorPreviewCanvas.react','React','Vector'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')];};j.calculateState=function(k,l){var m=c('MediaEffectReactFrameEditorDataStore').getState(),n=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:m.assets,assetOrder:m.assetOrder,backgroundColor:n.backgroundColor,cameraEnabled:n.cameraSource!=null,previewSize:new (c('Vector'))(l.previewWidth,l.previewHeight)};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.prototype.render=function(){return (c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvas.react'),this.state));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectReviewPreviewSection.react',['cx','MediaEffectFramePhonePreviewContainer.react','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectOwnerByline.react','MediaEffectReactFrameEditorPreviewCanvasContainer.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=c('MediaEffectFullscreenFrameEditorSizingUtils').getSquareReviewPreviewWidth(k.dialogWidth,k.dialogHeight),m=16*l/9;return (c('React').createElement('div',{className:"_2pio",style:{position:'relative'}},c('React').createElement('div',{style:{position:'absolute',width:'100%'}},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_1d1g"},k.frameName)),k.owner?c('React').createElement(c('MediaEffectOwnerByline.react'),{owner:k.owner}):null),c('React').createElement('div',{className:"_3s-9"},c('React').createElement('div',{className:"_5gzu _fh0 _3-98"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvasContainer.react'),{previewHeight:l,previewWidth:l})),c('React').createElement('div',{className:"_fh0"},c('React').createElement(c('MediaEffectFramePhonePreviewContainer.react'),{previewHeight:l,previewWidth:m})),c('React').createElement('div',{className:"_fh0"},c('React').createElement(c('MediaEffectFramePhonePreviewContainer.react'),{previewHeight:m,previewWidth:l})))));};f.exports=i;}),null);
__d('MediaEffectReviewStepConfig',['MediaEffectFlowType','MediaEffectReviewMetadataSection.react','MediaEffectReviewPreviewSection.react'],(function a(b,c,d,e,f,g){'use strict';var h,i=(h={},h[c('MediaEffectFlowType').BASIC_HUB]=[c('MediaEffectReviewPreviewSection.react'),c('MediaEffectReviewMetadataSection.react')],h[c('MediaEffectFlowType').EVENT]=[c('MediaEffectReviewPreviewSection.react')],h);f.exports=i;}),null);
__d('MediaEffectFrameCreationReview.react',['cx','fbt','Link.react','MediaEffectReviewStepConfig','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=c('React').createElement('div',{className:"_2pio _3s-b"},c('React').createElement(c('XUIText.react'),{weight:'normal'},i._("By clicking \"Submit\" you agree to the Camera Effects Platform {terms} and {policies} Frames are public for anyone to use.",[i.param('terms',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_terms',target:'_blank'},i._("terms"))),i.param('policies',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_policies',target:'_blank'},i._("policies.")))])));return (c('React').createElement('div',{className:"_1d1n"},c('MediaEffectReviewStepConfig')[this.props.flowType].map(function(n,o){return (c('React').createElement(n,babelHelpers['extends']({},this.props,{key:o})));}.bind(this)),m));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('MediaEffectFrameCreationReviewContainer.react',['FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationReview.react','MediaEffectFrameEditorDispatcher','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectMetadataStore','MediaEffectMetadataViewStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectMetadataStore'),c('MediaEffectMetadataViewStore'),c('MediaEffectFrameCreateDialogDataStore')];};j.calculateState=function(){var k=c('MediaEffectMetadataStore').getState(),l=k.get('selectedOwnerID'),m=c('MediaEffectFrameCreateDialogDataStore').getState(),n=m.screenWidth,o=m.dialogHeight,p=c('MediaEffectFullscreenFrameEditorSizingUtils').getDialogWidth(n,o);return {name:k.get('name'),selectedOwner:c('MediaEffectMetadataViewStore').getOwner(l),tags:k.get('tags'),startTime:k.startTime,endTime:k.endTime,placeDescription:k.placeDescription,dialogWidth:p,dialogHeight:o};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.prototype.render=function(){return (c('React').createElement(c('MediaEffectFrameCreationReview.react'),{dialogHeight:this.state.dialogHeight,dialogWidth:this.state.dialogWidth,endTime:this.state.endTime,flowType:this.props.flowType,frameName:this.state.name,owner:this.state.selectedOwner,placeDescription:this.state.placeDescription,startTime:this.state.startTime,tags:this.state.tags}));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectFrameCreationStepsConfig',['fbt','invariant','immutable','MediaEffectEditingStep.react','MediaEffectFlowType','MediaEffectFrameCreationReviewContainer.react','MediaEffectTargetingStep.react','keyMirror'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('keyMirror')({NONE:'',EDITING:'',TARGETING:'',REVIEW:''}),m=(j={},j[c('MediaEffectFlowType').BASIC_HUB]=[l.EDITING,l.TARGETING,l.REVIEW],j[c('MediaEffectFlowType').EVENT]=[l.EDITING,l.REVIEW],j),n=(k={},k[l.EDITING]={component:c('MediaEffectEditingStep.react'),label:h._("Design")},k[l.TARGETING]={component:c('MediaEffectTargetingStep.react'),label:h._("Targeting")},k[l.REVIEW]={component:c('MediaEffectFrameCreationReviewContainer.react'),label:h._("Review")},k);function o(r,s){var t=q(r).indexOf(s);t>=0||i(0);return t;}function p(r,s){if(s>=0)return q(r).get(s);return l.NONE;}function q(r){return new (c('immutable').List)(m[r]);}f.exports={ComponentConfigs:n,CreationSteps:l,getStepIndex:o,getSteps:q,StepsConfigs:m,getStep:p};}),null);
__d('MediaEffectReactFrameEditorCamera.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement('div',{style:{position:'absolute',overflow:'hidden',left:'50%',top:'50%',marginLeft:-(this.props.width/2),marginTop:-(this.props.height/2)}},c('React').createElement('video',{autoPlay:true,ref:'video',style:{width:this.props.width,height:this.props.height,objectFit:'cover'},src:this.props.videoSrc})));};j.prototype.componentDidUpdate=function(k){if(k.cameraPaused&&!this.props.cameraPaused){this.refs.video.play();}else if(!k.cameraPaused&&this.props.cameraPaused)this.refs.video.pause();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MediaEffectReactFrameEditorCameraContainer.react',['FluxContainer','MediaEffectReactFrameEditorCamera.react','MediaEffectReactFrameEditorCanvasDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorCanvasDataStore')];};j.calculateState=function(k,l){var m=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {cameraPaused:m.cameraPaused,videoSrc:m.cameraSource};};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectReactFrameEditorCamera.react'),k));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectReactFrameEditorGridlines.react',['cx','fbt','AssetHorizontalAlignmentType','AssetVerticalAlignmentType','MediaEffectFrameEditorConstants','React','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.asset.get('assetSize').toAbsolute(this.props.canvasSize),o=this.props.asset.get('position').toAbsolute(this.props.canvasSize,n),p=this.$MediaEffectReactFrameEditorGridlines1(this.props.asset,this.props.canvasSize);return this.props.type==='vertical'?this.$MediaEffectReactFrameEditorGridlines2(o,n,p):this.$MediaEffectReactFrameEditorGridlines3(o,n,p);};m.prototype.$MediaEffectReactFrameEditorGridlines2=function(n,o,p){var q={},r={};q.left=-5+l+n.l+o.x/2+'px';q.height=Math.max(p.vMargin-2,0)+'px';if(q.height==='0px')q.borderBottom='0px';if(p.vMargin<40){if(p.assetVAlign===c('AssetVerticalAlignmentType').TOP){r.top='-20px';}else r.bottom='-20px';r.left='-3px';}else{r.right='10px';r.top=p.vMargin/2-8+'px';}if(p.assetVAlign===c('AssetVerticalAlignmentType').CENTER)return (c('React').createElement('div',null,this.$MediaEffectReactFrameEditorGridlines4(babelHelpers['extends']({},q,{top:l}),r,'Centered'),this.$MediaEffectReactFrameEditorGridlines4(babelHelpers['extends']({},q,{bottom:l}),r,'Centered')));if(p.assetVAlign===c('AssetVerticalAlignmentType').TOP){q.top=l;}else q.bottom=l;return this.$MediaEffectReactFrameEditorGridlines4(q,r,p.relativeVMargin.toFixed(0)+'%');};m.prototype.$MediaEffectReactFrameEditorGridlines4=function(n,o,p){return (c('React').createElement('div',{style:n,className:"_4ro5"},c('React').createElement('div',{className:"_4ro6"}),c('React').createElement('div',{className:"_4ro7"}),c('React').createElement('div',{style:o,className:"_4ro8"},p==='Centered'?i._("Centered"):p)));};m.prototype.$MediaEffectReactFrameEditorGridlines3=function(n,o,p){var q={},r={};q.top=-5+l+n.t+o.y/2+'px';q.width=Math.max(p.hMargin-2,0)+'px';if(q.width==='0px')q.borderRight='0px';if(p.hMargin<40){if(p.assetHAlign===c('AssetHorizontalAlignmentType').LEFT){r.left='-23px';}else r.right='-23px';r.top='-3px';}else{r.top='-15px';r.left=p.hMargin/3+'px';}if(p.assetHAlign===c('AssetHorizontalAlignmentType').CENTER)return (c('React').createElement('div',null,this.$MediaEffectReactFrameEditorGridlines5(babelHelpers['extends']({},q,{left:l}),r,'Centered'),this.$MediaEffectReactFrameEditorGridlines5(babelHelpers['extends']({},q,{right:l}),r,'Centered')));if(p.assetHAlign===c('AssetHorizontalAlignmentType').LEFT){q.left=l;}else q.right=l;return this.$MediaEffectReactFrameEditorGridlines5(q,r,p.relativeHMargin.toFixed(0)+'%');};m.prototype.$MediaEffectReactFrameEditorGridlines5=function(n,o,p){return (c('React').createElement('div',{style:n,className:"_4ro9"},c('React').createElement('div',{className:"_4roa"}),c('React').createElement('div',{className:"_4rob"}),c('React').createElement('div',{style:o,className:"_4ro8"},p==='Centered'?i._("Centered"):p)));};m.prototype.$MediaEffectReactFrameEditorGridlines1=function(n,o){var p=c('nullthrows')(n.assetSize).toAbsolute(o),q=n.position,r=q.toAbsolute(o,p);return {assetHAlign:q.x.asset_origin==='canvas_start'?q.x.anchor_asset_size_percentage===50?c('AssetHorizontalAlignmentType').CENTER:c('AssetHorizontalAlignmentType').LEFT:c('AssetHorizontalAlignmentType').RIGHT,assetVAlign:q.y.asset_origin==='canvas_start'?q.y.anchor_asset_size_percentage===50?c('AssetVerticalAlignmentType').CENTER:c('AssetVerticalAlignmentType').TOP:c('AssetVerticalAlignmentType').BOTTOM,hMargin:q.x.asset_origin==='canvas_start'?r.l:o.x-r.r,vMargin:q.y.asset_origin==='canvas_start'?r.t:o.y-r.b,relativeHMargin:q.x.asset_canvas_size_percentage,relativeVMargin:q.y.asset_canvas_size_percentage};};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('MediaEffectReactFrameEditorSelectionBox.react',['cx','FBDragHandle.react','immutable','MediaEffectFrameEditorConstants','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorAssetPositionRecord','React','Rect'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Map,l=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE;function m(q,r,s,t){var u=(q*s+r*t)/(s*s+t*t);return [s*u,t*u];}function n(event){return event&&(event.metaKey||event.ctrlKey);}function o(q,r){var s=(r.r+r.l)/2,t=(r.t+r.b)/2;q.t=Math.min(q.t,t-1);q.r=Math.max(q.r,s+1);q.b=Math.max(q.b,t+1);q.l=Math.min(q.l,s-1);}i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$MediaEffectReactFrameEditorSelectionBox3=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,aa.w(),aa.h());v=ba[0];w=ba[1];}var ca=aa.add(0,0);ca.l+=v;ca.t+=w;ca.l=Math.min(ca.r-1,ca.l);ca.t=Math.min(ca.b-1,ca.t);if(n(event)){ca.r-=v;ca.b-=w;o(ca,aa);}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects);}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox4=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,-aa.w(),aa.h());v=ba[0];w=ba[1];}var ca=aa.add(0,0);ca.r+=v;ca.t+=w;ca.r=Math.max(ca.l+1,ca.r);ca.t=Math.min(ca.b-1,ca.t);if(n(event)){ca.l-=v;ca.b-=w;o(ca,aa);}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects);}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox5=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,aa.w(),-aa.h());v=ba[0];w=ba[1];}var ca=aa.add(0,0);ca.l+=v;ca.b+=w;ca.l=Math.min(ca.r-1,ca.l);ca.b=Math.max(ca.t+1,ca.b);if(n(event)){ca.r-=v;ca.t-=w;o(ca,aa);}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects);}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox6=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,-aa.w(),-aa.h());v=ba[0];w=ba[1];}var ca=aa.add(0,0);ca.r+=v;ca.b+=w;ca.r=Math.max(ca.l+1,ca.r);ca.b=Math.max(ca.t+1,ca.b);if(n(event)){ca.l-=v;ca.t-=w;o(ca,aa);}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects);}.bind(this),r;}p.prototype.render=function(){if(this.props.assets.size===0)return null;var q=this.$MediaEffectReactFrameEditorSelectionBox1(),r=c('Rect').minimumBoundingBox(q.toArray());if(r.x===0||r.y===0)return null;var s={assetRects:q,boundingRect:r},t=function u(){return s;};return c('React').createElement('div',{className:"_2z_m",style:{top:l-1,left:l-1},onMouseDown:this.$MediaEffectReactFrameEditorSelectionBox2},c('React').createElement('div',{className:"_2z_n",style:{top:r.t,left:r.l,width:r.w(),height:r.h()}},c('React').createElement(c('FBDragHandle.react'),{cursor:'nwse-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox3,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_o"})),c('React').createElement(c('FBDragHandle.react'),{cursor:'nesw-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox4,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_p"})),c('React').createElement(c('FBDragHandle.react'),{cursor:'nesw-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox5,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_t"})),c('React').createElement(c('FBDragHandle.react'),{cursor:'nwse-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox6,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_u"}))));};p.prototype.$MediaEffectReactFrameEditorSelectionBox2=function(event){event.stopPropagation();};p.prototype.$MediaEffectReactFrameEditorSelectionBox1=function(){var q=this.props.assets,r=new k();r=r.withMutations(function(s){q.forEach(function(t){s.set(t.localAssetID,t.position.toAbsolute(this.props.canvasSize,t.assetSize.toAbsolute(this.props.canvasSize)));}.bind(this));}.bind(this));return r;};p.prototype.$MediaEffectReactFrameEditorSelectionBox7=function(q,r,s){var t=function v(w){return (r.r*(w-q.l)/q.w()+r.l*(q.r-w)/q.w());},u=function v(w){return (r.b*(w-q.t)/q.h()+r.t*(q.b-w)/q.h());};s.forEach(function(v,w){var x=this.props.assets.get(w);if(!x)return;var y=new (c('Rect'))(u(v.t),t(v.r),u(v.b),t(v.l)),z=x.assetSize;if(z){if(z.width&&z.width.pixels!==0){z=z.set('width',z.width.set('pixels',y.w()));}else if(z.width)z=z.set('width',z.width.set('canvas_size_percentage',y.w()*100/this.props.canvasSize.x));if(z.height&&z.height.pixels!==0){z=z.set('height',z.height.set('pixels',y.h()));}else if(z.height)z=z.set('height',z.height.set('canvas_size_percentage',y.h()*100/this.props.canvasSize.y));}c('MediaEffectMetadataActionCreators').updateAssetSize(w,z);var aa=c('MediaEffectReactFrameEditorAssetPositionRecord').canonical(y,this.props.canvasSize);c('MediaEffectMetadataActionCreators').updateAssetPosition(w,aa);}.bind(this));};f.exports=p;}),null);
__d('MediaEffectReactFrameEditorSelectionBoxContainer.react',['FluxContainer','immutable','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorSelectionBox.react','React','Vector'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')];};k.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};k.calculateState=function(l,m){var n=c('MediaEffectReactFrameEditorDataStore').getState().get('assets'),o=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),p=new j(m.selectedAssets.map(function(r){return [r,n.get(r)];})),q=p.some(function(r){return r.assetSize&&r.assetSize.aspect_ratio!=null;});return {assets:p,canvasSize:new (c('Vector'))(o.canvasWidth,o.canvasHeight),fixedAspectRatio:q};};k.prototype.render=function(){var l=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectReactFrameEditorSelectionBox.react'),l));};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MediaEffectReactFrameEditorCanvas.react',['cx','fbt','immutable','LayerAutoFocusReact','LayerFadeOnHide','LayerHideOnBlur','LayerHideOnEscape','MediaEffectFrameEditorConstants','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorAsset.react','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorCameraContainer.react','MediaEffectReactFrameEditorGridlines.react','MediaEffectReactFrameEditorSelectionBoxContainer.react','MountedContextMenu.react','React','ReactDOM','ReactXUIMenu','nullthrows','Rect','SimpleXUIDialog','Vector','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').Map,m=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE,n=c('ReactXUIMenu').Item,o=10,p=new l({Delete:'DELETE',Backspace:'DELETE',Escape:'UNSELECT',ArrowLeft:'NUDGELEFT',ArrowRight:'NUDGERIGHT',ArrowUp:'NUDGEUP',ArrowDown:'NUDGEDOWN'}),q=new l({'?':'SHOWKEY_BINDINGS'});function r(t){return (c('React').createElement('div',{style:{margin:'0 auto 8px auto',width:t.width+2*m}},c('React').createElement(c('XUIText.react'),{className:"_38wf"},i._("Artboard"))));}j=babelHelpers.inherits(s,c('React').PureComponent);k=j&&j.prototype;function s(){var t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];(t=k.constructor).call.apply(t,[this].concat(v));this.state={showKeyBindings:false};this.$MediaEffectReactFrameEditorCanvas29=function(){if(!this.$MediaEffectReactFrameEditorCanvas13&&!this.props.editedTextID)c('MediaEffectMetadataActionCreators').deselectAll();}.bind(this);this.$MediaEffectReactFrameEditorCanvas30=function(x){setTimeout(!x&&this.$MediaEffectReactFrameEditorCanvas27(),0);}.bind(this);this.$MediaEffectReactFrameEditorCanvas33=function(){c('MediaEffectMetadataActionCreators').addText(null,this.$MediaEffectReactFrameEditorCanvas16,this.$MediaEffectReactFrameEditorCanvas17);}.bind(this);this.$MediaEffectReactFrameEditorCanvas24=function(event){if(event.button===0&&this.$MediaEffectReactFrameEditorCanvas25&&(event.target===this.$MediaEffectReactFrameEditorCanvas14||event.target===this.$MediaEffectReactFrameEditorCanvas25)){c('MediaEffectMetadataActionCreators').deselectAll();}else if(this.props.editedTextID){return;}else if(event.button===2&&event.target===this.$MediaEffectReactFrameEditorCanvas14){var x=c('ReactDOM').findDOMNode(this.$MediaEffectReactFrameEditorCanvas14).getBoundingClientRect(),y=event.clientX-x.left,z=event.clientY-x.top;this.$MediaEffectReactFrameEditorCanvas16=y/this.props.canvasWidth*100;this.$MediaEffectReactFrameEditorCanvas17=z/this.props.canvasHeight*100;}this.$MediaEffectReactFrameEditorCanvas28();event.preventDefault();}.bind(this);this.$MediaEffectReactFrameEditorCanvas28=function(){if(this.$MediaEffectReactFrameEditorCanvas25)this.$MediaEffectReactFrameEditorCanvas25.focus();}.bind(this);this.$MediaEffectReactFrameEditorCanvas21=function(event){var x=p.get(event.key);this.$MediaEffectReactFrameEditorCanvas34(x,event);}.bind(this);this.$MediaEffectReactFrameEditorCanvas22=function(event){var x=q.get(event.key);this.$MediaEffectReactFrameEditorCanvas34(x,event);}.bind(this);this.$MediaEffectReactFrameEditorCanvas18=function(x,y,z,aa,ba,ca){return this.$MediaEffectReactFrameEditorCanvas36(x,null,null,y,z,aa,ba,ca);}.bind(this);this.$MediaEffectReactFrameEditorCanvas20=function(x){x.preventDefault();if(!x.dataTransfer||this.props.readOnly)return;var y=x.dataTransfer.files;if(y)for(var z=0;z<y.length;z++){var aa=y.item(z);aa&&c('MediaEffectMetadataActionCreators').addImage(aa,this.props.enableAsyncUpload);}}.bind(this);this.$MediaEffectReactFrameEditorCanvas1=new l({DELETE:function(event){return this.$MediaEffectReactFrameEditorCanvas2(event);}.bind(this),UNSELECT:function(event){return this.$MediaEffectReactFrameEditorCanvas3(event);}.bind(this),NUDGELEFT:function(event){return this.$MediaEffectReactFrameEditorCanvas4(event);}.bind(this),NUDGERIGHT:function(event){return this.$MediaEffectReactFrameEditorCanvas5(event);}.bind(this),NUDGEUP:function(event){return this.$MediaEffectReactFrameEditorCanvas6(event);}.bind(this),NUDGEDOWN:function(event){return this.$MediaEffectReactFrameEditorCanvas7(event);}.bind(this),SHOWKEY_BINDINGS:function(event){return this.$MediaEffectReactFrameEditorCanvas8(event);}.bind(this)});this.$MediaEffectReactFrameEditorCanvas9=this.$MediaEffectReactFrameEditorCanvas9.bind(this);this.$MediaEffectReactFrameEditorCanvas10=this.$MediaEffectReactFrameEditorCanvas10.bind(this);this.$MediaEffectReactFrameEditorCanvas11=this.$MediaEffectReactFrameEditorCanvas12();this.$MediaEffectReactFrameEditorCanvas13=false;}s.prototype.$MediaEffectReactFrameEditorCanvas10=function(t){this.$MediaEffectReactFrameEditorCanvas26(t.target);};s.prototype.$MediaEffectReactFrameEditorCanvas27=function(){this.setState({showKeyBindings:false});this.$MediaEffectReactFrameEditorCanvas28();};s.prototype.$MediaEffectReactFrameEditorCanvas31=function(){if(!this.state.showKeyBindings)return null;return c('React').createElement(c('XUIDialog.react'),{autohide:5000,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerAutoFocusReact:c('LayerAutoFocusReact'),LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape')},onToggle:this.$MediaEffectReactFrameEditorCanvas30,shown:this.state.showKeyBindings,titleID:'frame-editor-key-bindings',width:445},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,'Keyboard Shortcut Help')),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('ul',null,c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'\u2190'),',',c('React').createElement('span',{className:"_5hbk"},'\u2192'),',',c('React').createElement('span',{className:"_5hbk"},'\u2191'),',',c('React').createElement('span',{className:"_5hbk"},'\u2193'),'\u2014 move selected items'),c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'Ctrl'),'+',c('React').createElement('span',{className:"_5hbk"},'\u2190'),',',c('React').createElement('span',{className:"_5hbk"},'\u2192'),',',c('React').createElement('span',{className:"_5hbk"},'\u2191'),',',c('React').createElement('span',{className:"_5hbk"},'\u2193'),'\u2014 move selected items by 10%'),c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'Delete'),',',c('React').createElement('span',{className:"_5hbk"},'Backspace'),'\u2014 delete selected items'),c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'Escape'),'\u2014 unselect all'))));};s.prototype.$MediaEffectReactFrameEditorCanvas26=function(t){var u=t.files;if(u)for(var v=0;v<u.length;v++){var w=u.item(v);w&&c('MediaEffectMetadataActionCreators').addImage(w,this.props.enableAsyncUpload,this.$MediaEffectReactFrameEditorCanvas16,this.$MediaEffectReactFrameEditorCanvas17);}t.value='';};s.prototype.$MediaEffectReactFrameEditorCanvas32=function(t,u){var v=c('ReactDOM').findDOMNode(t),w=c('React').createElement(c('MountedContextMenu.react'),{menu:u,mountedTriggerElem:v}),x=v.children[0];c('ReactDOM').render(w,x);};s.prototype.$MediaEffectReactFrameEditorCanvas12=function(){return c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorCanvas9},i._("Add new art here")),this.props.enableEditorFreeText?c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorCanvas33},i._("Insert Text")):null);};s.prototype.$MediaEffectReactFrameEditorCanvas9=function(){var t=new MouseEvent('click');c('nullthrows')(this.$MediaEffectReactFrameEditorCanvas15).dispatchEvent(t);};s.prototype.$MediaEffectReactFrameEditorCanvas19=function(event){event.preventDefault();};s.prototype.$MediaEffectReactFrameEditorCanvas34=function(t,event){if(t&&!this.props.editedTextID){var u=this.$MediaEffectReactFrameEditorCanvas1.get(t);if(u){u(event);event.preventDefault();}}};s.prototype.$MediaEffectReactFrameEditorCanvas23=function(event){var t=p.get(event.key);if(t)switch(t){case 'NUDGELEFT':case 'NUDGERIGHT':case 'NUDGEUP':case 'NUDGEDOWN':c('MediaEffectMetadataActionCreators').setIsDragging(false);break;default:break;}};s.prototype.$MediaEffectReactFrameEditorCanvas3=function(event){c('MediaEffectMetadataActionCreators').deselectAll();};s.prototype.$MediaEffectReactFrameEditorCanvas2=function(event){if(this.props.selectedAssets.size===0)return;var t=this.props.selectedAssets,u=t.count(function(x){return this.props.assets.get(x).assetType()==='MediaEffectReactFrameEditorTextAssetRecord';}.bind(this)),v=t.count(function(x){return this.props.assets.get(x).assetType()==='MediaEffectReactFrameEditorImageAssetRecord';}.bind(this)),w=null;if(v===0){w=u>1?i._("Are you sure you want to delete these text items?"):i._("Are you sure you want to delete this text item?");}else if(u===0){w=v>1?i._("Are you sure you want to delete these art assets?"):i._("Are you sure you want to delete this art asset?");}else w=i._("Are you sure you want to delete these assets?");this.$MediaEffectReactFrameEditorCanvas13=true;c('SimpleXUIDialog').showConfirm(w,null,function(x){if(x)t.forEach(function(y){c('MediaEffectMetadataActionCreators').deleteAsset(y);});this.$MediaEffectReactFrameEditorCanvas13=false;this.$MediaEffectReactFrameEditorCanvas28();}.bind(this),null);};s.prototype.$MediaEffectReactFrameEditorCanvas6=function(event){this.$MediaEffectReactFrameEditorCanvas35(new (c('Vector'))(0,-1),event);};s.prototype.$MediaEffectReactFrameEditorCanvas7=function(event){this.$MediaEffectReactFrameEditorCanvas35(new (c('Vector'))(0,1),event);};s.prototype.$MediaEffectReactFrameEditorCanvas4=function(event){this.$MediaEffectReactFrameEditorCanvas35(new (c('Vector'))(-1,0),event);};s.prototype.$MediaEffectReactFrameEditorCanvas5=function(event){this.$MediaEffectReactFrameEditorCanvas35(new (c('Vector'))(1,0),event);};s.prototype.$MediaEffectReactFrameEditorCanvas35=function(t,event){var u=event.ctrlKey?10:1,v=t.mul(u).mul(this.props.canvasWidth/100,this.props.canvasHeight/100);this.$MediaEffectReactFrameEditorCanvas36(null,true,u!==1,v.x,v.y,null,null,this.$MediaEffectReactFrameEditorCanvas37());};s.prototype.$MediaEffectReactFrameEditorCanvas8=function(event){this.setState({showKeyBindings:true});};s.prototype.$MediaEffectReactFrameEditorCanvas36=function(t,u,v,w,x,y,z,aa){var ba=new l().withMutations(function(ga){aa.forEach(function(ha,ia){if(ia===t||this.props.selectedAssets.has(ia))ga.set(ia,ha);}.bind(this));}.bind(this)),ca=c('Rect').minimumBoundingBox(ba.toArray());if(!u){var da=this.$MediaEffectReactFrameEditorCanvas38(w,x,ca);w=da[0];x=da[1];}else if(!v){var ea=this.$MediaEffectReactFrameEditorCanvas39(w,x,ca);w=ea[0];x=ea[1];}var fa=this.$MediaEffectReactFrameEditorCanvas40(w,x,ba);w=fa[0];x=fa[1];aa.forEach(function(ga,ha){if(ha!==t&&!this.props.selectedAssets.has(ha))return;var ia=ga.add(w,x),ja=c('MediaEffectReactFrameEditorAssetPositionRecord').canonical(ia,this.$MediaEffectReactFrameEditorCanvas41());['x','y'].map(function(ka){return ja=ja.set(ka,ja[ka].set('asset_canvas_size_percentage',Math.round(ja[ka].asset_canvas_size_percentage)));});c('MediaEffectMetadataActionCreators').updateAssetPosition(ha,ja);}.bind(this));c('MediaEffectMetadataActionCreators').setIsDragging(true);};s.prototype.$MediaEffectReactFrameEditorCanvas42=function(){c('MediaEffectMetadataActionCreators').setIsDragging(false);};s.prototype.$MediaEffectReactFrameEditorCanvas38=function(t,u,v){var w=v.getCenter(),x=v.add(t,u),y=this.$MediaEffectReactFrameEditorCanvas41().div(2),z=x.getCenter(),aa=z.sub(y);if(Math.abs(aa.x)<o)t=y.x-w.x;if(Math.abs(aa.y)<o)u=y.y-w.y;return [t,u];};s.prototype.$MediaEffectReactFrameEditorCanvas39=function(t,u,v){var w=v.getCenter(),x=v.add(t,u),y=this.$MediaEffectReactFrameEditorCanvas41().div(2),z=x.getCenter(),aa=w.sub(y),ba=z.sub(y);if(ba.x*aa.x<0)t=-aa.x;if(ba.y*aa.y<0)u=-aa.y;if(aa.x===0){var ca=100*v.l/this.props.canvasWidth;t=this.props.canvasWidth/100*Math.sign(t)*(1+ca-Math.ceil(ca));}if(aa.y===0){var da=100*v.t/this.props.canvasHeight;u=this.props.canvasHeight/100*Math.sign(u)*(1+da-Math.ceil(da));}return [t,u];};s.prototype.$MediaEffectReactFrameEditorCanvas40=function(t,u,v){v.forEach(function(w,x){var y=w.add(t,u);if(y.l>this.props.canvasWidth)t-=y.l-this.props.canvasWidth;if(y.t>this.props.canvasHeight)u-=y.t-this.props.canvasHeight;if(y.l+y.w()<0)t-=y.l+y.w();if(y.t+y.h()<0)u-=y.t+y.h();}.bind(this));return [t,u];};s.prototype.$MediaEffectReactFrameEditorCanvas37=function(){return this.props.assets.map(function(t){return t.assetSize&&t.position.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41(),t.assetSize.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41()));}.bind(this));};s.prototype.$MediaEffectReactFrameEditorCanvas43=function(){return new l().withMutations(function(t){this.props.selectedAssets.forEach(function(u){if(this.props.assets.has(u)){var v=this.props.assets.get(u);if(v.assetSize&&v.position)t.set(u,v.position.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41(),v.assetSize.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41())));}}.bind(this));}.bind(this));};s.prototype.$MediaEffectReactFrameEditorCanvas41=function(){return new (c('Vector'))(this.props.canvasWidth,this.props.canvasHeight);};s.prototype.render=function(){return (c('React').createElement('div',null,this.$MediaEffectReactFrameEditorCanvas31(),this.props.showTitle?c('React').createElement(r,{width:this.props.canvasWidth}):null,c('React').createElement('div',{className:"_384m",onBlur:this.$MediaEffectReactFrameEditorCanvas29,onDragOver:this.$MediaEffectReactFrameEditorCanvas19,onDrop:this.$MediaEffectReactFrameEditorCanvas20,onKeyDown:this.$MediaEffectReactFrameEditorCanvas21,onKeyPress:this.$MediaEffectReactFrameEditorCanvas22,onKeyUp:this.$MediaEffectReactFrameEditorCanvas23,onMouseDown:this.$MediaEffectReactFrameEditorCanvas24,ref:function(t){if(t)this.$MediaEffectReactFrameEditorCanvas25=t;}.bind(this),style:{width:this.props.canvasWidth+2*m,height:this.props.canvasHeight+2*m},tabIndex:0},c('React').createElement('div',{className:"_ymq _2z_m",style:{backgroundColor:this.props.backgroundColor,width:this.props.canvasWidth,height:this.props.canvasHeight,left:m-1,top:m-1}},this.props.cameraEnabled?c('React').createElement(c('MediaEffectReactFrameEditorCameraContainer.react'),{height:this.props.canvasHeight,width:this.props.canvasWidth}):null,c('React').createElement('div',{className:"_384n",ref:function(t){if(t&&!this.props.readOnly){this.$MediaEffectReactFrameEditorCanvas14=t;this.$MediaEffectReactFrameEditorCanvas32(t,this.$MediaEffectReactFrameEditorCanvas11);}}.bind(this),style:{background:'',width:this.props.canvasWidth,height:this.props.canvasHeight}},c('React').createElement('div',null),this.props.assetOrder.map(function(t){var u=this.props.assets.get(t);return (c('React').createElement(c('MediaEffectReactFrameEditorAsset.react'),{assetData:u,canvasSize:this.$MediaEffectReactFrameEditorCanvas41(),editedTextID:this.props.editedTextID,enableAsyncUpload:this.props.enableAsyncUpload,enableEditorFreeText:this.props.enableEditorFreeText,enableFontSettingsDialog:this.props.enableFontSettingsDialog,focusCanvas:this.$MediaEffectReactFrameEditorCanvas28,initialPositionMap:this.$MediaEffectReactFrameEditorCanvas37(),key:t,localAssetID:t,onDrag:this.$MediaEffectReactFrameEditorCanvas18,onDrop:this.$MediaEffectReactFrameEditorCanvas42,readOnly:this.props.readOnly||u.readOnly,selected:this.props.selectedAssets.has(t)}));}.bind(this)))),c('React').createElement(c('MediaEffectReactFrameEditorSelectionBoxContainer.react'),{selectedAssets:this.props.selectedAssets}),c('React').createElement('div',{className:"_34j2 _34j3",style:{top:m-1,width:m-1,height:this.props.canvasHeight+2}}),c('React').createElement('div',{className:"_34j2 _34j4",style:{top:m-1,width:m-1,height:this.props.canvasHeight+2}}),c('React').createElement('div',{className:"_34j2 _34j6",style:{width:this.props.canvasWidth+2*m,height:m-1}}),c('React').createElement('div',{className:"_34j2 _34j7",style:{width:this.props.canvasWidth+2*m,height:m-1}}),this.props.isDragging?this.props.selectedAssets.map(function(t){var u=this.props.assets.get(t);return (c('React').createElement('div',{key:t},c('React').createElement(c('MediaEffectReactFrameEditorGridlines.react'),{asset:u,canvasSize:this.$MediaEffectReactFrameEditorCanvas41(),type:'vertical'}),c('React').createElement(c('MediaEffectReactFrameEditorGridlines.react'),{asset:u,canvasSize:this.$MediaEffectReactFrameEditorCanvas41(),type:'horizontal'})));}.bind(this)):null),c('React').createElement('input',{accept:'image/x-png, image/jpeg, image/png',multiple:true,onChange:this.$MediaEffectReactFrameEditorCanvas10,ref:function(t){this.$MediaEffectReactFrameEditorCanvas15=t;}.bind(this),style:{display:'none'},type:'file'})));};f.exports=s;}),null);
__d('MediaEffectReactFrameEditorCanvasContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorCanvas.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')];};j.calculateState=function(k,l){var m=c('MediaEffectReactFrameEditorDataStore').getState(),n=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:m.assets,assetOrder:m.assetOrder,backgroundColor:n.backgroundColor,cameraEnabled:!!n.cameraSource,canvasHeight:n.canvasHeight,canvasWidth:n.canvasWidth,editedTextID:n.editedTextID,selectedAssets:n.selectedAssets,isDragging:n.isDragging};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectReactFrameEditorCanvas.react'),k));};function j(){h.apply(this,arguments);}j.defaultProps={readOnly:false,enableAsyncUpload:false,enableFontSettingsDialog:false,enableEditorFreeText:false,showTitle:false};f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectReactFrameEditorPreview.react',['cx','fbt','LayerHideOnBlur','MediaEffectReactFrameEditorCameraContainer.react','MediaEffectReactFrameEditorPreviewCanvas.react','React','Vector','XUIContextualDialog.react','XUIContextualDialogBody.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectReactFrameEditorPreview3=function(){return this.setState({showFullPreview:true});}.bind(this);this.$MediaEffectReactFrameEditorPreview2=function(){return this.setState({showFullPreview:false});}.bind(this);this.$MediaEffectReactFrameEditorPreview5=function(){return this.thumbnailRoot;}.bind(this);this.$MediaEffectReactFrameEditorPreview6=function(n){if(n!==this.state.showFullPreview)this.setState({showFullPreview:n});}.bind(this);this.state={showFullPreview:false};}l.prototype.$MediaEffectReactFrameEditorPreview1=function(m){var n=this.props.previewSize.x*m,o=this.props.previewSize.y*m;return c('React').createElement('div',{className:"_5gzu",onMouseOut:this.$MediaEffectReactFrameEditorPreview2,onMouseOver:this.$MediaEffectReactFrameEditorPreview3,style:{backgroundColor:this.props.backgroundColor,width:n,height:o}},this.props.cameraEnabled?c('React').createElement(c('MediaEffectReactFrameEditorCameraContainer.react'),{height:o,width:n}):null,c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvas.react'),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.cameraEnabled?'transparent':this.props.backgroundColor,disableCheckerboard:this.props.cameraEnabled,previewSize:new (c('Vector'))(n,o)}));};l.prototype.$MediaEffectReactFrameEditorPreview4=function(){var m=i._("Landscape preview"),n=i._("Portrait preview");return c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:this.$MediaEffectReactFrameEditorPreview5,focusContextOnHide:false,key:'contextualDialog',onToggle:this.$MediaEffectReactFrameEditorPreview6,position:'left',shown:this.state.showFullPreview,width:this.props.previewSize.x+32},c('React').createElement(c('XUIContextualDialogBody.react'),null,this.$MediaEffectReactFrameEditorPreview1(1),c('React').createElement('div',{className:"_4qx4"},this.props.previewSize.x>this.props.previewSize.y?m:n)));};l.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement('div',{ref:function(m){return this.thumbnailRoot=m;}.bind(this)},this.$MediaEffectReactFrameEditorPreview1(this.props.previewScale)),this.$MediaEffectReactFrameEditorPreview4()));};f.exports=l;}),null);
__d('MediaEffectReactFrameEditorPreviewContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorPreview.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')];};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.calculateState=function(k){var l=c('MediaEffectReactFrameEditorDataStore').getState(),m=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:l.assets,assetOrder:l.assetOrder,backgroundColor:m.backgroundColor,cameraEnabled:m.cameraSource!=null};};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectReactFrameEditorPreview.react'),k));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('MediaEffectEditingStep.react',['cx','FXEntMediaEffectSubmissionStatus','MediaEffectFullscreenFrameEditorContainer.react','MediaEffectReactFrameEditorCanvasContainer.react','MediaEffectReactFrameEditorPreviewContainer.react','React','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.$MediaEffectEditingStep1=function(){return this.props.bootstrapData.metadataJSData.id;};k.prototype.$MediaEffectEditingStep2=function(){return !this.$MediaEffectEditingStep1();};k.prototype.$MediaEffectEditingStep3=function(){return this.$MediaEffectEditingStep2()||!!this.props.frameEditorBootstrapData.frameData;};k.prototype.$MediaEffectEditingStep4=function(){var l=this.props.bootstrapData.metadataJSData.submissionStatus;return l===c('FXEntMediaEffectSubmissionStatus').DRAFT||l===c('FXEntMediaEffectSubmissionStatus').DENIED;};k.prototype.render=function(){var l=this.props,m=l.context,n=l.frameEditorBootstrapData,o=null,p=null;if(this.$MediaEffectEditingStep3()){o=this.$MediaEffectEditingStep4()?c('React').createElement(c('MediaEffectFullscreenFrameEditorContainer.react'),{context:{includesFBOnly:m.includesFBOnly,enableAsyncUpload:m.enableAsyncUpload,enableEditorCamera:m.enableEditorCamera,enableFontSettingsDialog:m.enableFontSettingsDialog,enableEditorFreeText:m.enableEditorFreeText},filtersData:n.filtersData,flowType:this.props.flowType,frameData:n.frameData}):c('React').createElement('div',{className:"_14bw _4a4u"},c('React').createElement(c('MediaEffectReactFrameEditorCanvasContainer.react'),{bootstrapData:n.frameData,readOnly:true}));p=this.$MediaEffectEditingStep4()?null:c('React').createElement('div',{className:"_2odg"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,225)}),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(225,400)})));}return (c('React').createElement('div',{className:"_3iei"},o,p));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectFrameEditorTemplateGrid.react',['cx','ix','Grid.react','MediaEffectMetadataActionCreators','Image.react','React','ScrollableArea.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n=c('Grid.react').GridItem;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$TemplateButton1=function(){c('MediaEffectMetadataActionCreators').applyTemplate(this.props.template);}.bind(this),r;}o.prototype.render=function(){var q=this.props.template?this.props.template.previewURL:i("images\/media_effect\/glyphs\/glyph-stop.png");return (c('React').createElement('a',{className:"_2cls"+(this.props.selected?' '+"_tzx":'')+(!this.props.template?' '+"_tzy":''),href:'#',onClick:this.$TemplateButton1},c('React').createElement(c('Image.react'),{className:"_3aff",src:q})));};l=babelHelpers.inherits(p,c('React').PureComponent);m=l&&l.prototype;p.prototype.render=function(){var q=98*this.props.rows+6;return (c('React').createElement('div',{className:"_3zu_"},c('React').createElement(c('ScrollableArea.react'),{height:q},c('React').createElement('div',{className:"_3zv0"},c('React').createElement(c('Grid.react'),{cols:2},c('React').createElement(n,null,c('React').createElement(o,{selected:this.props.activeTemplate===null})),this.props.templates.toArray().map(function(r){return (c('React').createElement(n,{key:r.templateFBID},c('React').createElement(o,{selected:this.props.activeTemplate===r.templateFBID,template:r})));}.bind(this)))))));};function p(){l.apply(this,arguments);}p.defaultProps={rows:3};f.exports=p;}),null);
__d('MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react',['ix','cx','Image.react','MediaEffectFrameEditorTemplateGrid.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector1=function(){this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2('Birthdays');}.bind(this);this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector3=function(){this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2('Celebrations');}.bind(this);this.state={selectedCategory:'Birthdays'};}l.prototype.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2=function(m){this.setState({selectedCategory:m});};l.prototype.render=function(){var m=this.state.selectedCategory==='Birthdays'?this.props.birthdayTemplates:this.props.celebrationTemplates;return (c('React').createElement('div',null,c('React').createElement('div',{className:"_3-94"},c('React').createElement('a',{className:"_2cls"+(' '+"_ols")+(' '+"_1-k5")+(this.state.selectedCategory==='Birthdays'?' '+"_olt":''),href:'#',onClick:this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector1},c('React').createElement(c('Image.react'),{className:"_3-8x _3-94",src:this.state.selectedCategory==='Birthdays'?h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cake_24_fig-white.png"):h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cake_24_fig-light-50.png")}),c('React').createElement('div',null,'Birthdays')),c('React').createElement('a',{className:"_2cls"+(' '+"_ols")+(' '+"_1-k6")+(this.state.selectedCategory==='Celebrations'?' '+"_olt":''),href:'#',onClick:this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector3},c('React').createElement(c('Image.react'),{className:"_3-8x _3-94",src:this.state.selectedCategory==='Celebrations'?h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cocktail_24_fig-white.png"):h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cocktail_24_fig-light-50.png")}),c('React').createElement('div',null,'Celebrations'))),c('React').createElement(c('MediaEffectFrameEditorTemplateGrid.react'),{activeTemplate:this.props.activeTemplate,templates:m})));};f.exports=l;}),null);
__d('MediaEffectFrameEditorMultiCategoryTemplateSelector.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement('div',null));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MediaEffectFrameEditorTemplatePanel.react',['cx','fbt','immutable','MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react','MediaEffectFrameEditorMultiCategoryTemplateSelector.react','MediaEffectFrameEditorTemplateGrid.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').List;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.$MediaEffectFrameEditorTemplatePanel1=function(n){var o=this.props.categories.reduce(function(s,t){return s+t.size;},0);if(n===1||o<=5){var p=this.props.categories.reduce(function(s,t){return s.concat(t);},new l());return (c('React').createElement(c('MediaEffectFrameEditorTemplateGrid.react'),{activeTemplate:this.props.activeTemplate,templates:p}));}if(n===2&&this.props.categories.has('Birthdays')&&this.props.categories.has('Celebrations')){var q=this.props.categories.get('Birthdays'),r=this.props.categories.get('Celebrations');return (c('React').createElement(c('MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react'),{activeTemplate:this.props.activeTemplate,birthdayTemplates:q,celebrationTemplates:r}));}return (c('React').createElement(c('MediaEffectFrameEditorMultiCategoryTemplateSelector.react'),{activeTemplate:this.props.activeTemplate,categories:this.props.categories}));};m.prototype.render=function(){var n=this.props.categories.count();if(n===0)return null;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Template")),this.$MediaEffectFrameEditorTemplatePanel1(n)));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('MediaEffectFrameEditorTemplatePanelContainer.react',['FluxContainer','immutable','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorTemplatePanel.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')];};k.calculateState=function(l,m){var n=c('MediaEffectReactFrameEditorDataStore').getState(),o=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {activeTemplate:n.templateFBID,categories:o.templateCategories.map(function(p){return (new j(p.map(function(q){return o.templates.get(q);})));})};};k.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};k.prototype.render=function(){var l=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectFrameEditorTemplatePanel.react'),l));};function k(){h.apply(this,arguments);}k.defaultProps={};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MediaEffectFullscreenFrameEditorControls.react',['cx','fbt','ix','FileInput.react','FrameEditorSupportedGeneratedText','Image.react','MediaEffectFlowType','MediaEffectFrameEditorTemplatePanelContainer.react','MediaEffectMetadataActionCreators','PopoverMenu.react','React','ReactXUIMenu','SimpleNUXMessage','SimpleNUXMessageTypes','XUIError.react','XUIText.react','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactXUIMenu').Item;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(o){var p=o.frameData||{};l.constructor.call(this,o);this.$MediaEffectFullscreenFrameEditorControls3=function(q){var r=q.target;if(r instanceof HTMLInputElement)this.$MediaEffectFullscreenFrameEditorControls4(r);}.bind(this);this.state={filterQuery:p.filter_id?p.filter_id.toString():'',showBgColorPicker:false,nuxShown:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').CREATIVE_CANVAS_TEMPLATE_NUX)};}n.prototype.$MediaEffectFullscreenFrameEditorControls1=function(){return c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$MediaEffectFullscreenFrameEditorControls2},this.props.context.enableEditorFreeText?c('React').createElement(m,{key:'freetext',value:null},'Free text'):null,Object.keys(c('FrameEditorSupportedGeneratedText')).map(function(o){return c('React').createElement(m,{key:o,value:o},c('FrameEditorSupportedGeneratedText')[o]);}));};n.prototype.$MediaEffectFullscreenFrameEditorControls2=function(o,p){c('MediaEffectMetadataActionCreators').addText(p.item.getValue());};n.prototype.$MediaEffectFullscreenFrameEditorControls4=function(o){var p=o.files;if(p)for(var q=0;q<p.length;q++){var r=p.item(q);r&&c('MediaEffectMetadataActionCreators').addImage(r,this.props.context.enableAsyncUpload);}o.value='';};n.prototype.$MediaEffectFullscreenFrameEditorControls5=function(){navigator.getUserMedia&&navigator.getUserMedia({video:true},function(o){return c('MediaEffectMetadataActionCreators').startCamera(window.URL.createObjectURL(o));},function(o){return false;});};n.prototype.$MediaEffectFullscreenFrameEditorControls6=function(){var o=this.props,p=o.isValidating,q=o.isFrameValid;if(p&&!q)return i._("Please insert an art asset to continue");return null;};n.prototype.$MediaEffectFullscreenFrameEditorControls7=function(){c('MediaEffectMetadataActionCreators').addText(null,null,null);};n.prototype.$MediaEffectFullscreenFrameEditorControls8=function(){return (c('React').createElement(c('FileInput.react'),{accept:'image/x-png, image/jpeg, image/png',multiple:true,onChange:this.$MediaEffectFullscreenFrameEditorControls3},c('React').createElement('a',{className:"_2cls",href:'#'},c('React').createElement(c('Image.react'),{className:"_3-8x",src:j("images\/media_effect\/glyphs\/glyph-insert-art.png"),width:'44'}),c('React').createElement('div',null,i._("Art")))));};n.prototype.$MediaEffectFullscreenFrameEditorControls9=function(){return (c('React').createElement('a',{className:"_2cls",href:'#',onClick:this.$MediaEffectFullscreenFrameEditorControls7},c('React').createElement(c('Image.react'),{className:"_3-8x",src:j("images\/media_effect\/glyphs\/glyph-insert-text.png"),width:'44'}),c('React').createElement('div',null,i._("Text"))));};n.prototype.$MediaEffectFullscreenFrameEditorControls10=function(){return (c('React').createElement(c('PopoverMenu.react'),{alignv:'baseline',menu:this.$MediaEffectFullscreenFrameEditorControls1()},c('React').createElement('a',{className:"_2cls",href:'#'},c('React').createElement(c('Image.react'),{className:"_3-8x",src:j("images\/media_effect\/glyphs\/glyph-insert-text.png"),width:'44'}),c('React').createElement('div',null,'Text'))));};n.prototype.$MediaEffectFullscreenFrameEditorControls11=function(){return this.props.context.includesFBOnly?this.$MediaEffectFullscreenFrameEditorControls10():this.$MediaEffectFullscreenFrameEditorControls9();};n.prototype.render=function(){var o=c('mediaEffectGKCheck')('media_effect_template')&&this.props.flowType!==c('MediaEffectFlowType').EVENT;return (c('React').createElement('div',{className:"_2j1s"},c('React').createElement(c('XUIError.react'),{xuiError:this.$MediaEffectFullscreenFrameEditorControls6()},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Insert")),this.$MediaEffectFullscreenFrameEditorControls8(),this.props.context.enableEditorFreeText||this.props.context.includesFBOnly?this.$MediaEffectFullscreenFrameEditorControls11():null,o?c('React').createElement(c('MediaEffectFrameEditorTemplatePanelContainer.react'),null):null))));};f.exports=n;}),null);
__d('MediaEffectFullscreenFrameEditorPreviewPanel.react',['cx','fbt','ColorPickerPopover.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorPreviewContainer.react','React','Vector','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectFullscreenFrameEditorPreview2=function(){c('MediaEffectEditorFunnelLogger').logChangeEditorBackgroundColor(this.props.backgroundColor);}.bind(this),n;}l.prototype.$MediaEffectFullscreenFrameEditorPreview1=function(m){c('MediaEffectMetadataActionCreators').changeBackgroundColor(m);};l.prototype.render=function(){var m=this.props.portraitCanvasWidth/this.props.popoverPortraitCanvasWidth;return (c('React').createElement('div',null,c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Preview")),c('React').createElement(c('ColorPickerPopover.react'),{initialColor:'#ffffff',label:i._("Background"),onChange:this.$MediaEffectFullscreenFrameEditorPreview1,onClose:this.$MediaEffectFullscreenFrameEditorPreview2,position:'left'}),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:m,previewSize:new (c('Vector'))(this.props.popoverPortraitCanvasHeight,this.props.popoverPortraitCanvasWidth)})),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:m,previewSize:new (c('Vector'))(this.props.popoverPortraitCanvasWidth,this.props.popoverPortraitCanvasHeight)})))));};f.exports=l;}),null);
__d('MediaEffectFullscreenFrameEditorPreviewPanelContainer.react',['FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameEditorDispatcher','MediaEffectFullscreenFrameEditorPreviewPanel.react','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore'),c('MediaEffectFrameCreateDialogDataStore')];};j.calculateState=function(k){var l=c('MediaEffectReactFrameEditorDataStore').getState(),m=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),n=c('MediaEffectFrameCreateDialogDataStore').getState(),o=n.screenWidth,p=n.dialogHeight,q=c('MediaEffectFullscreenFrameEditorSizingUtils').getPortraitPreviewHeight(o,p),r=9/16*q,s=c('MediaEffectFullscreenFrameEditorSizingUtils').getPortraitFullPreviewHeight(o,p),t=9/16*s;return {assets:l.assets,assetOrder:l.assetOrder,backgroundColor:m.backgroundColor,cameraEnabled:m.cameraSource!=null,portraitCanvasWidth:r,portraitCanvasHeight:q,popoverPortraitCanvasWidth:t,popoverPortraitCanvasHeight:s};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectFullscreenFrameEditorPreviewPanel.react'),k));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('MediaEffectFullscreenFrameEditor.react',['cx','ix','Image.react','MediaEffectFullscreenFrameEditorControls.react','MediaEffectFullscreenFrameEditorPreviewPanelContainer.react','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorCanvasContainer.react','React','Vector'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.$MediaEffectFullscreenFrameEditor1=function(m){var n=m.files;if(n)for(var o=0;o<n.length;o++){var p=n.item(o);p&&c('MediaEffectMetadataActionCreators').addImage(p,this.props.context.enableAsyncUpload);}m.value='';};l.prototype.$MediaEffectFullscreenFrameEditor2=function(){navigator.getUserMedia&&navigator.getUserMedia({video:true},function(m){return c('MediaEffectMetadataActionCreators').startCamera(window.URL.createObjectURL(m));},function(m){return false;});};l.prototype.render=function(){return (c('React').createElement('div',{className:"_1skh"},c('React').createElement('div',null,c('React').createElement(c('MediaEffectFullscreenFrameEditorControls.react'),{cameraEnabled:this.props.cameraEnabled,cameraPaused:this.props.cameraPaused,canvasBgColor:this.props.canvasBgColor,context:this.props.context,filterID:this.props.filterID,filtersData:this.props.filtersData,flowType:this.props.flowType,fontColor:this.props.fontColor,frameData:this.props.frameData,isFrameValid:this.props.isFrameValid,isValidating:this.props.isValidating,loading:this.props.loading,selectedTextIDs:this.props.selectedTextIDs})),c('React').createElement('div',{className:"_2yvx"},c('React').createElement(c('MediaEffectReactFrameEditorCanvasContainer.react'),{bootstrapData:this.props.frameData,enableAsyncUpload:this.props.context.enableAsyncUpload,enableEditorFreeText:this.props.context.enableEditorFreeText,enableFontSettingsDialog:this.props.context.enableFontSettingsDialog,showTitle:true})),c('React').createElement('div',{className:"_1skk"},c('React').createElement(c('MediaEffectFullscreenFrameEditorPreviewPanelContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,225)})),c('React').createElement('div',{className:"_zn8"},c('React').createElement(c('Image.react'),{src:i("images\/media_effect\/frame_preview\/landscape_trimmed.png")}),c('React').createElement(c('Image.react'),{src:i("images\/media_effect\/frame_preview\/portrait_trimmed.png")}))));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('MediaEffectFullscreenFrameEditorContainer.react',['FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationStepsConfig','MediaEffectFullscreenFrameEditor.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MediaEffectFrameCreationStepsConfig').CreationSteps;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore'),c('MediaEffectReactFrameEditorDataStore')];};k.calculateState=function(l,m){var n=c('MediaEffectReactFrameEditorDataStore').getState(),o=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),p=o.selectedAssets.filter(function(t){return (n.assets.get(t).assetType()==='MediaEffectReactFrameEditorTextAssetRecord');}),q=n.assets.some(function(t){return (t.assetType()==='MediaEffectReactFrameEditorImageAssetRecord'&&!t.stickerFBID);}),r=c('MediaEffectFrameCreationStepsConfig').getStep(m.flowType,c('MediaEffectFrameCreateDialogDataStore').getState().get('validatingStep')),s=r!==j.NONE;return {canvasBgColor:o.backgroundColor,filterID:n.filterID,fontColor:p.size>0?n.assets.get(p.first()).color:'#ffffff',loading:q,selectedTextIDs:p,cameraEnabled:o.cameraSource!=null,cameraPaused:o.cameraPaused,isFrameValid:c('MediaEffectReactFrameEditorDataStore').isValidForSubmit(),isValidating:s};};k.prototype.render=function(){var l=babelHelpers['extends']({},this.props,this.state);return (c('React').createElement(c('MediaEffectFullscreenFrameEditor.react'),l));};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MediaEffectCard.react',['cx','React','Tooltip.react','XUICard.react','XUICardHeader.react','XUICardHeaderTitle.react','XUICardSection.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.multistep?"_5zes _190n":"_2ex6 _3-8x _190n",n=this.props.tooltip?c('React').createElement(c('Tooltip.react'),{className:"_3-99",tooltip:this.props.tooltip},c('React').createElement('span',{className:"_3o-c"})):null;return (c('React').createElement(c('XUICard.react'),{className:c('joinClasses')(m,this.props.className)},c('React').createElement(c('XUICardHeader.react'),{className:this.props.multistep===true?"_5zet":'',type:'primary'},c('React').createElement(c('XUICardHeaderTitle.react'),{className:this.props.multistep!==true?"_4jw6":''},this.props.title,n)),c('React').createElement(c('XUICardSection.react'),{background:'transparent',className:(this.props.multistep!==true?"_4w_3":'')+(this.props.multistep===true?' '+"_5zeu":'')+(' '+"_190n"),style:{borderTop:'none'}},this.props.children)));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('MediaEffectFBOnlyPermissionExplanationCard.react',['cx','DOMContainer.react','MediaEffectCard.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{className:c('joinClasses')("_3-8z _2pip",this.props.className),title:'[FB-Only]'},c('React').createElement(c('DOMContainer.react'),null,this.props.explanationLink)));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d("XMediaEffectTagsDataSourceController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/datasource\/tags\/",{is_featured:{type:"Bool",defaultValue:false},value:{type:"String"}});}),null);
__d('MediaEffectMetadataTagsTypeahead.react',['fbt','MediaEffectEditorFunnelLogger','React','SearchableEntry','WebAsyncSearchSource','XMediaEffectTagsDataSourceController','XUITokenizer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=10;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false});};function m(n){j.constructor.call(this,n);this.searchSource=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:c('XMediaEffectTagsDataSourceController').getURIBuilder().setBool('is_featured',false).getURI()}]});this.state={resetQueryString:false};}m.prototype.render=function(){return (c('React').createElement(c('XUITokenizer.react'),{disabled:this.props.disabled,entries:this.props.tags.map(function(n){return new (c('SearchableEntry'))({title:n.title,uniqueID:n.uniqueID||n.title});}),onAddEntryAttempt:this.$MediaEffectMetadataTagsTypeahead1.bind(this),onEnterWithoutSelection:this.$MediaEffectMetadataTagsTypeahead2.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataTagsTypeahead3.bind(this),placeholder:h._("Add tags"),queryString:this.state.resetQueryString?'':undefined,searchSource:this.searchSource,tokenizeQueryStringOnBlur:this.$MediaEffectMetadataTagsTypeahead2.bind(this)}));};m.prototype.$MediaEffectMetadataTagsTypeahead1=function(n){this.$MediaEffectMetadataTagsTypeahead2();if(this.props.tags.length>=l)return;var o=n.getTitle();if(!o||!o.length)return;var p=this.props.tags.map(function(r){return r.title;});if(p.includes(o))return;var q=n.getUniqueID();this.$MediaEffectMetadataTagsTypeahead4();this.props.onAddTag({uniqueID:q,title:o});};m.prototype.$MediaEffectMetadataTagsTypeahead3=function(n){this.$MediaEffectMetadataTagsTypeahead2();var o=n.getUniqueID(),p=n.getTitle();this.$MediaEffectMetadataTagsTypeahead4();this.props.onRemoveTag({uniqueID:o,title:p});};m.prototype.$MediaEffectMetadataTagsTypeahead2=function(){this.setState({resetQueryString:true});};m.prototype.$MediaEffectMetadataTagsTypeahead4=function(){c('MediaEffectEditorFunnelLogger').logChangeTag();};m.propTypes={disabled:k.bool,multistep:k.bool,tags:k.array,onAddTag:k.func.isRequired,onRemoveTag:k.func.isRequired};m.defaultProps={tags:[]};f.exports=m;}),null);
__d('MediaEffectMetadataCategoryAndTags.react',['fbt','MediaEffectCard.react','MediaEffectMetadataTagsTypeahead.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{multistep:this.props.multistep,title:h._("Keyword Tags"),tooltip:h._("You can add up to 10 tags, which make it easy for people to find your frame. Tags must meet the Camera Effects Platform terms and policies.")},c('React').createElement(c('MediaEffectMetadataTagsTypeahead.react'),this.props)));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectMetadataFBOnlyRanking.react',['cx','MediaEffectCard.react','React','XUIRadioList.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('XUIRadioList.react').Item,m=/^\+?(0|[1-9]\d*)$/;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){var o=this.props,p=o.onManualRankWeightChange,q=o.onRankingStrategyChange,r=o.rankingStrategy,s=o.rankWeight;return (c('React').createElement(c('MediaEffectCard.react'),{title:'Select Ranking'},c('React').createElement(c('XUIRadioList.react'),{onValueChange:q,selectedValue:r},c('React').createElement(l,{value:'DEFAULT'},'Default'),c('React').createElement(l,{value:'BOOST'},'Boost'),c('React').createElement(l,{value:'MANUAL'},'Enter a manual rank')),r==='MANUAL'?c('React').createElement('div',{className:"_2piv"},c('React').createElement(c('XUITextInput.react'),{placeholder:'Enter an Integer',className:"_3_kx",height:'tall',onChange:p,value:s,xuiError:!s||m.test(s)?null:'Not an integer'})):null));};function n(){i.apply(this,arguments);}n.propTypes={onManualRankWeightChange:k.func.isRequired,onRankingStrategyChange:k.func.isRequired,rankingStrategy:k.string,rankWeight:k.string};f.exports=n;}),null);
__d('MediaEffectMetadataFeatureGroupsCheckList.react',['Grid.react','InputLabel.react','MediaEffectCard.react','React','Tooltip.react','XUICheckboxInput.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('Grid.react').GridItem;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{title:'Effect Group',tooltip:'choose the feature group the effect belongs to'},c('React').createElement(c('Grid.react'),{cols:1},c('React').createElement(j,null,c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('XUICheckboxInput.react'),{checked:this.props.offlineOnly,onChange:function(event){this.props.onOfflineOnlyChange(event.target.checked);}.bind(this)}),c('React').createElement('label',null,c('React').createElement(c('Tooltip.react'),{tooltip:'only available when camera is offline'},'Offline Only')))),c('React').createElement(j,null,c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('XUICheckboxInput.react'),{checked:this.props.selfBirthday,onChange:function(event){this.props.onselfBirthdayChange(event.target.checked);}.bind(this)}),c('React').createElement('label',null,c('React').createElement(c('Tooltip.react'),{tooltip:'can see only when self birthday'},'Self Birthday Only')))))));};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectGKSearchSource',['AbstractAsyncSearchSource','AbstractSearchSource','AsyncRequest','WebAsyncSearchSourceUtils'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$MediaEffectGKSearchSource1=new (c('AbstractAsyncSearchSource'))(k,this.$MediaEffectGKSearchSource2,c('WebAsyncSearchSourceUtils').normalizeResponse);}j.prototype.bootstrapImpl=function(k){this.$MediaEffectGKSearchSource1.bootstrap(k);};j.prototype.searchImpl=function(k,l,m){this.$MediaEffectGKSearchSource1.search(k,l,m);};j.prototype.getBootstrappedEntries=function(k){return this.$MediaEffectGKSearchSource1.getBootstrappedEntries(k);};j.prototype.getAllEntriesMap=function(){return this.$MediaEffectGKSearchSource1.getAllEntriesMap();};j.prototype.setRequestData=function(k){this.$MediaEffectGKSearchSource1.setRequestData(k);};j.prototype.$MediaEffectGKSearchSource2=function(k,l,m,n){new (c('AsyncRequest'))().setData(babelHelpers['extends']({},k,l.data)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(m).setErrorHandler(n).setAllowCrossOrigin(true).setURI(l.uri).send();};f.exports=j;}),null);
__d('MediaEffectMetadataGKsTypeahead.react',['MediaEffectGKSearchSource','React','SearchableEntry','URI','XUITokenizer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=[',',';',' '],l=new (c('URI'))('/intern/perflab/ajax/select_gk/typeahead').setSubdomain('our');h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;m.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false});};function m(n){i.constructor.call(this,n);this.searchSource=new (c('MediaEffectGKSearchSource'))({queryRequests:[{uri:l}]});this.state={resetQueryString:false};}m.prototype.render=function(){return (c('React').createElement(c('XUITokenizer.react'),{entries:this.$MediaEffectMetadataGKsTypeahead1(),onAddEntryAttempt:this.$MediaEffectMetadataGKsTypeahead2.bind(this),onEnterWithoutSelection:this.$MediaEffectMetadataGKsTypeahead3.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataGKsTypeahead4.bind(this),placeholder:this.props.placeholder,queryString:this.state.resetQueryString?'':undefined,searchSource:this.searchSource,tokenizeQueryString:this.$MediaEffectMetadataGKsTypeahead5.bind(this),tokenizeQueryStringOnBlur:this.$MediaEffectMetadataGKsTypeahead3.bind(this)}));};m.prototype.$MediaEffectMetadataGKsTypeahead1=function(){return this.props.GKs.map(function(n){return new (c('SearchableEntry'))({title:n,uniqueID:n});});};m.prototype.$MediaEffectMetadataGKsTypeahead2=function(n){this.$MediaEffectMetadataGKsTypeahead6();var o=n.getTitle();if(!o||!o.length)return;if(this.props.GKs.indexOf(o)!==-1)return;var p=this.props.GKs.slice();p[p.length]=o;this.props.onGKsChanged(p);};m.prototype.$MediaEffectMetadataGKsTypeahead4=function(n){this.$MediaEffectMetadataGKsTypeahead6();var o=n.getTitle(),p=this.props.GKs.indexOf(o);if(p===-1)return;var q=this.props.GKs.slice();q.splice(p,1);this.props.onGKsChanged(q);};m.prototype.$MediaEffectMetadataGKsTypeahead3=function(n){this.$MediaEffectMetadataGKsTypeahead6();};m.prototype.$MediaEffectMetadataGKsTypeahead5=function(n){return null;};m.prototype.$MediaEffectMetadataGKsTypeahead6=function(){this.setState({resetQueryString:true});};m.propTypes={GKs:j.array,onGKsChanged:j.func.isRequired,placeholder:j.string};f.exports=m;}),null);
__d('MediaEffectMetadataInstructions.react',['fbt','MediaEffectCard.react','React','XUISingleSelector.react','immutable'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUISingleSelector.react').Option,l=c('immutable').Map,m=c('React').PropTypes,n='0',o=c('React').createElement(k,{key:n,value:n},h._("No Instructions"));i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;p.prototype.render=function(){var q=this.props,r=q.instructions,s=q.onInstructionSelected,t=q.selectedInstructionID,u=r.entrySeq().map(function(v){var w=v[0],x=v[1];return (c('React').createElement(k,{value:w,key:w},x));}).toArray();u.unshift(o);return (c('React').createElement(c('MediaEffectCard.react'),{title:'Interactivity Instructions'},c('React').createElement(c('XUISingleSelector.react'),{onChange:function v(w){s(w.value===n?null:w.value);},size:'large',value:t||n},u)));};function p(){i.apply(this,arguments);}p.propTypes={instructions:m.object.isRequired,onInstructionSelected:m.func.isRequired,selectedInstructionID:m.string};f.exports=p;}),null);
__d('MediaEffectMetadataLocale.react',['fbt','AdsTargetingLanguageSelector.react','MediaEffectCard.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{title:h._("Languages"),tooltip:h._("Only select a language if the people you want to reach use a language that's uncommon in your set location.")},c('React').createElement(c('AdsTargetingLanguageSelector.react'),{disabled:this.props.disabled,selectedLanguages:this.props.locales,onDataUpdate:function(m,n){this.props.onLocaleChanged(n);}.bind(this)})));};function l(){i.apply(this,arguments);}l.propTypes={disabled:k.bool,locales:k.array,onLocaleChanged:k.func.isRequired};f.exports=l;}),null);
__d('MediaEffectMetadataPageTypeahead.react',['cx','fbt','CurrentUser','React','SearchableEntry','WebAsyncSearchSource','XUITypeahead.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.searchSource=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/typeahead/search.php',data:{filter:['page'],viewer:c('CurrentUser').getID()}}]});this.state={queryString:''};}m.prototype.render=function(){var n=this.props.pageLiked;return (c('React').createElement(c('XUITypeahead.react'),{className:"_3_kx",clearable:true,onBlur:this.$MediaEffectMetadataPageTypeahead1.bind(this),onChange:function(o){return this.setState({queryString:o.target.value});}.bind(this),onClear:this.$MediaEffectMetadataPageTypeahead2.bind(this),onSelectAttempt:this.$MediaEffectMetadataPageTypeahead3.bind(this),placeholder:i._("Enter a page name or leave it in blank"),queryString:n?n.title:this.state.queryString,searchSource:this.searchSource,selectedEntry:n?new (c('SearchableEntry'))({title:n.title,uniqueID:n.uniqueID}):null}));};m.prototype.$MediaEffectMetadataPageTypeahead3=function(n){this.props.onPageLikedChange({title:n.getTitle(),uniqueID:n.getUniqueID()});};m.prototype.$MediaEffectMetadataPageTypeahead1=function(){if(!this.props.pageLiked)this.setState({queryString:''});};m.prototype.$MediaEffectMetadataPageTypeahead2=function(){this.setState({queryString:''});this.props.onPageLikedChange(null);};m.propTypes={onPageLikedChange:l.func.isRequired,pageLiked:l.oneOfType([l.oneOf([null]),l.instanceOf(Object)])};f.exports=m;}),null);
__d('MediaEffectMetadataPageLiked.react',['MediaEffectCard.react','MediaEffectMetadataPageTypeahead.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{title:'Select a page'},c('React').createElement(c('MediaEffectMetadataPageTypeahead.react'),this.props)));};function k(){h.apply(this,arguments);}k.propTypes={onPageLikedChange:j.func.isRequired,pageLiked:j.oneOfType([j.oneOf([null]),j.instanceOf(Object)])};f.exports=k;}),null);
__d('MediaEffectMetadataTemplateCategories.react',['cx','fbt','React','XUISingleSelector.react','immutable'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option,m=c('immutable').Map,n='0';j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MediaEffectMetadataTemplateCategories1=function(event){this.props.onTemplateCategorySelected(event.value===n?null:event.value);}.bind(this),q;}o.prototype.render=function(){var p=this.props,q=p.selectedTemplateCategoryID,r=p.templateCategories,s=r.entrySeq().map(function(t){var u=t[0],v=t[1];return (c('React').createElement(l,{key:u,value:u},v));}).toArray();s.unshift(c('React').createElement(l,{key:n,value:n},i._("Not a template")));return (c('React').createElement('div',null,'Select the template category',c('React').createElement(c('XUISingleSelector.react'),{className:"_3-9a",onChange:this.$MediaEffectMetadataTemplateCategories1,size:'medium',value:q||n},s)));};f.exports=o;}),null);
__d('MediaEffectMetadataTiming.react',['fbt','AdsDayPartingTable.react','DayPartingGrid','DayPartingUtils','React','XUIRadioList.react','MediaEffectCard.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUIRadioList.react').Item,l=c('React').PropTypes,m=60*60;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{title:h._("Timing")},c('React').createElement(c('XUIRadioList.react'),{onValueChange:this.$MediaEffectMetadataTiming1.bind(this),selectedValue:this.$MediaEffectMetadataTiming2()},c('React').createElement(k,{value:'no_constrain'},h._("All the time")),c('React').createElement(k,{value:'specified'},h._("During set days and hours"))),this.$MediaEffectMetadataTiming3()));};n.prototype.$MediaEffectMetadataTiming1=function(o){if(o==='specified'){this.props.onScheduleChange([]);}else this.props.onScheduleChange(null);};n.prototype.$MediaEffectMetadataTiming2=function(){if(!this.props.timingSchedule)return 'no_constrain';return 'specified';};n.prototype.$MediaEffectMetadataTiming3=function(){if(!this.props.timingSchedule)return null;return (c('React').createElement(c('AdsDayPartingTable.react'),{grid:this.$MediaEffectMetadataTiming4(),reducedWidth:true,onGridChange:this.$MediaEffectMetadataTiming5.bind(this)}));};n.prototype.$MediaEffectMetadataTiming4=function(){var o=new (c('DayPartingGrid'))();if(!this.props.timingSchedule||this.props.timingSchedule.length===0)return o;var p=0,q=0;for(var r=0;r<c('DayPartingUtils').DAYS_IN_WEEK;r++)for(var s=0;s<c('DayPartingUtils').HOURS_IN_DAY;s++){var t=this.props.timingSchedule[p];if(!t)return o;o.hours[r][s]=t.start_time<=q&&q<t.end_time;if(q>=t.end_time)p++;q+=m;}return o;};n.prototype.$MediaEffectMetadataTiming5=function(o){var p=null,q=[],r=0;for(var s=0;s<c('DayPartingUtils').DAYS_IN_WEEK;s++)for(var t=0;t<c('DayPartingUtils').HOURS_IN_DAY;t++){if(p===null){if(o.hours[s][t])p=r;}else if(!o.hours[s][t]){q[q.length]={start_time:p,end_time:r-1};p=null;}r+=m;}if(p)q[q.length]={start_time:p,end_time:r-1};this.props.onScheduleChange(q);};function n(){i.apply(this,arguments);}n.propTypes={timingSchedule:l.oneOfType([l.oneOf([null]),l.instanceOf(Array)]),onScheduleChange:l.func.isRequired};f.exports=n;}),null);
__d('MediaEffectMetadataUserTypeahead.react',['fbt','CurrentUser','React','SearchableEntry','WebAsyncSearchSource','XUITokenizer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false});};function l(m){j.constructor.call(this,m);this.searchSource=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/typeahead/search.php',data:{filter:['user'],viewer:c('CurrentUser').getID()}}]});this.state={resetQueryString:false};}l.prototype.render=function(){var m=this.props.whitelistedUsers;return (c('React').createElement(c('XUITokenizer.react'),{entries:m.map(function(n){return new (c('SearchableEntry'))({title:n.name,uniqueID:n.uniqueID});}),onAddEntryAttempt:this.$MediaEffectMetadataUserTypeahead1.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataUserTypeahead2.bind(this),placeholder:h._("Enter a user's name that you want to whitelist"),queryString:this.state.resetQueryString?'':undefined,searchSource:this.searchSource}));};l.prototype.$MediaEffectMetadataUserTypeahead1=function(m){this.setState({resetQueryString:true});this.props.onAddEntry({name:m.getTitle(),uniqueID:m.getUniqueID()});};l.prototype.$MediaEffectMetadataUserTypeahead2=function(m){this.setState({resetQueryString:true});this.props.onRemoveEntry({name:m.getTitle(),uniqueID:m.getUniqueID()});};l.propTypes={onAddEntry:k.func.isRequired,onRemoveEntry:k.func.isRequired,whitelistedUsers:k.array};l.defaultProps={whitelistedUsers:[]};f.exports=l;}),null);
__d('MediaEffectMetadataFBOnly.react',['cx','FileInput.react','Image.react','immutable','InlineBlock.react','LeftRight.react','MediaEffectCard.react','MediaEffectMetadataActionCreators','MediaEffectMetadataFBOnlyRanking.react','MediaEffectMetadataFeatureGroupsCheckList.react','MediaEffectMetadataGKsTypeahead.react','MediaEffectMetadataInstructions.react','MediaEffectMetadataLocale.react','MediaEffectMetadataPageLiked.react','MediaEffectMetadataTemplateCategories.react','MediaEffectMetadataTiming.react','MediaEffectMetadataUserTypeahead.react','React','XUIButton.react','XUICheckboxInput.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Map,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){var n=this.props,o=n.catalogGKs,p=n.effectHasText,q=n.eligibilityGKs,r=n.humanReadableDescription,s=n.instructions,t=n.locales,u=n.offlineOnly,v=n.pageLiked,w=n.selfBirthday,x=n.rankingStrategy,y=n.rankWeight,z=n.selectedInstructionID,aa=n.selectedTemplateCategoryID,ba=n.templateCategories,ca=n.thumbnailName,da=n.thumbnailURI,ea=n.timingSchedule,fa=n.whitelistCheckEligibility,ga=n.whitelistedUsers;return (c('React').createElement(c('MediaEffectCard.react'),{title:'[First Party]',className:"_2ex3"},c('React').createElement(c('MediaEffectCard.react'),{title:'Thumbnail'},c('React').createElement(c('LeftRight.react'),{direction:'left'},c('React').createElement(c('Image.react'),{className:"_3-91",height:99,src:da,width:74}),c('React').createElement('div',null,c('React').createElement('div',{className:"_2phz",style:{width:220}},'Upload a 288 x 384 thumbnail that will be displayed in the camera tray.'),c('React').createElement('div',null,c('React').createElement('div',{className:"_2phz"},c('React').createElement(c('FileInput.react'),{accept:'image/*',name:'thumbnail_file',onChange:function ha(event){c('MediaEffectMetadataActionCreators').setThumbnail(event.target.files[0]);}},c('React').createElement(c('XUIButton.react'),{label:'Upload PNG',href:{url:'#'}}))),c('React').createElement(c('InlineBlock.react'),{alignv:'middle'},ca))))),c('React').createElement(c('MediaEffectCard.react'),{title:'Human Readable Description',tooltip:'If your effect contains text, please input the same exact text here. If your effect does not contain text, please input a description which is understandable to any user. Your description here will be translated and read out to user on the client with the user\'s locale.'},c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",height:'tall',name:'humanReadableDescription',onChange:this.$MediaEffectMetadataFBOnly1,placeholder:'Add an understandable description here',value:r},r)),c('React').createElement(c('MediaEffectCard.react'),{title:'Asset Properties'},c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('MediaEffectMetadataTemplateCategories.react'),{onTemplateCategorySelected:c('MediaEffectMetadataActionCreators').selectTemplateCategoryID,selectedTemplateCategoryID:aa,templateCategories:ba})),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('XUICheckboxInput.react'),{checked:p,name:'effectHasText',onChange:this.$MediaEffectMetadataFBOnly2}),'Effect contains literal text')),c('React').createElement(c('MediaEffectCard.react'),{title:'Eligibility Gate Keepers Project'},c('React').createElement(c('MediaEffectMetadataGKsTypeahead.react'),{GKs:q,onGKsChanged:c('MediaEffectMetadataActionCreators').changeEligibilityGKs,placeholder:'Enter a project name or leave it blank'})),c('React').createElement(c('MediaEffectCard.react'),{title:'Catalog Gate Keepers Project'},c('React').createElement(c('MediaEffectMetadataGKsTypeahead.react'),{GKs:o,onGKsChanged:c('MediaEffectMetadataActionCreators').changeCatalogGKs,placeholder:'Enter a project name or leave it blank'})),c('React').createElement(c('MediaEffectCard.react'),{title:'Whitelisted Users'},c('React').createElement(c('MediaEffectMetadataUserTypeahead.react'),{onAddEntry:c('MediaEffectMetadataActionCreators').addWhitelistedUser,onRemoveEntry:c('MediaEffectMetadataActionCreators').removeWhitelistedUser,whitelistedUsers:ga}),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('XUICheckboxInput.react'),{checked:fa,name:'whitelistCheckEligibility',onChange:function ha(ia){c('MediaEffectMetadataActionCreators').changeWhitelistCheckEligibility(ia.target.checked);},ref:'whitelistCheckEligibility'}),'Check eligibility for whitelisted users.')),c('React').createElement(c('MediaEffectMetadataLocale.react'),{locales:t,onLocaleChanged:c('MediaEffectMetadataActionCreators').changeLocales}),c('React').createElement(c('MediaEffectMetadataTiming.react'),{timingSchedule:ea,onScheduleChange:c('MediaEffectMetadataActionCreators').changeTimingSchedule}),c('React').createElement(c('MediaEffectMetadataFBOnlyRanking.react'),{onManualRankWeightChange:c('MediaEffectMetadataActionCreators').changeManualRankWeight,onRankingStrategyChange:c('MediaEffectMetadataActionCreators').changeRankingStrategy,rankingStrategy:x||'DEFAULT',rankWeight:y}),c('React').createElement(c('MediaEffectMetadataInstructions.react'),{instructions:s,onInstructionSelected:c('MediaEffectMetadataActionCreators').selectInstruction,selectedInstructionID:z}),c('React').createElement(c('MediaEffectMetadataPageLiked.react'),{onPageLikedChange:c('MediaEffectMetadataActionCreators').changePageLiked,pageLiked:v}),c('React').createElement(c('MediaEffectMetadataFeatureGroupsCheckList.react'),{offlineOnly:u,selfBirthday:w,onOfflineOnlyChange:c('MediaEffectMetadataActionCreators').checkOfflineOnly,onselfBirthdayChange:c('MediaEffectMetadataActionCreators').checkSelfBirthday})));};m.prototype.$MediaEffectMetadataFBOnly2=function(event){c('MediaEffectMetadataActionCreators').changeEffectHasText(event.target.checked);};m.prototype.$MediaEffectMetadataFBOnly1=function(event){c('MediaEffectMetadataActionCreators').changeHumanReadableDescription(event.target.value);};function m(){i.apply(this,arguments);}m.propTypes={catalogGKs:l.array,effectHasText:l.bool,eligibilityGKs:l.array,humanReadableDescription:l.string,instructions:l.object.isRequired,locales:l.array,offlineOnly:l.bool,pageLiked:l.oneOfType([l.oneOf([null]),l.instanceOf(Object)]),selfBirthday:l.bool,rankingStrategy:l.string,rankWeight:l.string,selectedInstructionID:l.string,selectedTemplateCategoryID:l.string,templateCategories:l.object.isRequired,timingSchedule:l.oneOfType([l.oneOf([null]),l.instanceOf(Array)]),thumbnailName:l.string,thumbnailURI:l.string,whitelistCheckEligibility:l.bool,whitelistedUsers:l.array};f.exports=m;}),null);
__d('MediaEffectPlaceDescriptionRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({name:null,key:null,type:null,latitude:null,longitude:null}));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MediaEffectMetadataLocation.react',['cx','fbt','AdInterfacesUiLogger','AdsTargetingAggregatedMap.react','AdsTargetingLocationMapRecord','CameraEffectsPOITypeaheadSearchGK','GeoCoordinates','GraphAPI','LeafletView','LocationConstants','Log','MediaEffectCard.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataValidationUtils','MediaEffectPlaceDescriptionRecord','MediaEffectProfilePolicy','PlaceSearchConstants','PlaceSearchSuppressionVersion','React','ReactComposerLocationSearchSource','SearchableEntry','Tooltip.react','WebAsyncSearchSourceWithMetrics','XUIGrayText.react','XUIRadioList.react','XUIText.react','XUITypeahead.react','XUITypeaheadView.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes,n={everyone:'everyone',targeted:'targeted'},o=200,p={selectedPlace:null,selectedPlaceLocation:{},view:c('LeafletView').DEFAULT,query:''};j=babelHelpers.inherits(q,c('React').PureComponent);k=j&&j.prototype;function q(r){k.constructor.call(this,r);this.onSelectTypeahead=function(s,event){var t=s.getUniqueID();c('MediaEffectEditorFunnelLogger').logChangeLocation();this.props.onLocationPageSelected(t);this.updateStateByLocationPageID(t);}.bind(this);this.$MediaEffectMetadataLocation8=function(s){this.setState({view:s});}.bind(this);this.state=Object.assign({},p);c('AdInterfacesUiLogger').setAccountID('0');c('AdInterfacesUiLogger').setAppName('CameraMediaEffectAudience');}q.prototype.componentDidMount=function(){if(this.props.locationPageID)this.updateStateByLocationPageID(this.props.locationPageID);};q.prototype.componentWillReceiveProps=function(r){if(r.selectedOwner!==this.props.selectedOwner){this.setState(p);this.props.onLocationPageSelected(null);}};q.prototype.$MediaEffectMetadataLocation2=function(){var r=this.$MediaEffectMetadataLocation3()?i._("The location of your Page"):i._("City, neighborhood, landmark, etc."),s=this.props.multistep?null:c('React').createElement(c('XUIGrayText.react'),{display:'block',key:'subtitle'},r),t=this.props.multistep?i._("People in set locations"):i._("Location"),u=[c('React').createElement(c('XUIText.react'),{display:'block',key:'title'},t),s],v=this.$MediaEffectMetadataLocation4()?c('React').createElement(c('Tooltip.react'),{tooltip:i._("This option is unavailable")},u):u,w=this.props.multistep?i._("People in any location"):i._("General"),x=this.props.multistep?null:c('React').createElement(c('XUIGrayText.react'),{display:'block'},i._("Cause, event, team, for fun, etc."));return c('React').createElement(c('XUIRadioList.react'),{disabled:this.props.disabled,onValueChange:function(y){if(y===n.everyone){this.props.onLocationPageSelected(null);this.setState(p);}if(y===n.targeted){var z=this.props.selectedOwner;if(z&&this.$MediaEffectMetadataLocation3()){this.props.onLocationPageSelected(z.id);this.updateStateByLocationPageID(z.id);}}this.props.onLocationTargetSelected(y);}.bind(this),selectedValue:this.props.locationTarget},c('React').createElement(l,{disabled:this.props.disabled,value:n.everyone},c('React').createElement(c('XUIText.react'),{display:'block'},w),x),c('React').createElement(l,{disabled:this.props.disabled||this.$MediaEffectMetadataLocation4(),value:n.targeted},v));};q.prototype.$MediaEffectMetadataLocation5=function(){var r=this.props,s=r.isValidating,t=r.locationPageID,u=c('MediaEffectMetadataValidationUtils').validateLocationPageID(t);if(s&&this.props.locationTarget===n.targeted&&!u)return i._("Please select a location");return null;};q.prototype.$MediaEffectMetadataLocation6=function(){var r=this.getSearchSource();if(this.props.locationTarget===n.everyone)return null;if(this.$MediaEffectMetadataLocation3())return null;return c('React').createElement(c('XUITypeahead.react'),{className:"_3_kx",clearable:true,disabled:this.props.disabled,highlightOnSelect:true,initialEntry:null,onChange:function(event){this.setState({query:event.target.value});}.bind(this),onClear:function(){this.setState({query:'',selectedPlace:null});}.bind(this),onSelectAttempt:this.onSelectTypeahead,placeholder:i._("Choose a location"),presenter:{ViewRenderer:c('XUITypeaheadView.react'),useLayer:true},queryString:this.state.query,searchSource:r,selectedEntry:this.state.selectedPlace,showEntriesOnFocus:true,tallInput:true,xuiError:this.$MediaEffectMetadataLocation5()});};q.prototype.$MediaEffectMetadataLocation7=function(){var r=this.state.selectedPlace,s=this.state.selectedPlaceLocation,t=this.props.locationTarget;if(r&&s&&t===n.targeted){var u,v={name:r.getTitle(),key:r.getUniqueID(),type:r.getType()==='city'?c('LocationConstants').CITY:c('LocationConstants').CUSTOM_LOCATION,latitude:s.latitude,longitude:s.longitude},w=c('AdsTargetingLocationMapRecord').fromGeoLocations((u={},u[c('LocationConstants').CUSTOM_LOCATIONS]=[v],u));if(w&&w.size>0)return c('React').createElement(c('AdsTargetingAggregatedMap.react'),{disableCollapseButton:true,height:o,locationRecords:w,onViewChange:this.$MediaEffectMetadataLocation8,view:this.state.view});}return null;};q.prototype.getSearchSource=function(){var r={event_name:c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,event_specific_data:{context:'places_typeahead:'+c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,source:c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,ref:'MediaEffectMetadataLocation.react'}};return c('ReactComposerLocationSearchSource')({},{hide_geo:false,allow_poi:c('CameraEffectsPOITypeaheadSearchGK').gkResult,allow_country:this.props.selectedOwner.isFirstParty,suppression_version:c('PlaceSearchSuppressionVersion').CAMERA_LOCATION_FRAMES},r);};q.prototype.updateStateByLocationPageID=function(r){c('GraphAPI')('2.5').object('page',r).get({fields:'name, location, place_type'}).done(function(s){var t=new (c('GeoCoordinates'))(s.location.latitude,s.location.longitude),u=new (c('LeafletView'))({center:t,zoom:5});this.setState({selectedPlace:new (c('SearchableEntry'))({uniqueID:s.id,title:s.name,type:s.place_type}),selectedPlaceLocation:s.location,query:s.name,view:u});this.props.onLocationDescriptionLoaded(new (c('MediaEffectPlaceDescriptionRecord'))({name:s.name,key:s.id,type:s.place_type==='city'?c('LocationConstants').CITY:c('LocationConstants').CUSTOM_LOCATION,latitude:s.location.latitude,longitude:s.location.longitude}));}.bind(this),function(){this.props.onLocationPageSelected(null);c('Log').info('Failed to fetch Page %s',r);this.setState(p);}.bind(this));};q.prototype.$MediaEffectMetadataLocation3=function(){var r=this.props.selectedOwner;if(!r)return false;return r.policies.includes(c('MediaEffectProfilePolicy').SELF_LOCATION_ONLY);};q.prototype.$MediaEffectMetadataLocation4=function(){var r=this.props.selectedOwner;if(!r)return false;return r.policies.includes(c('MediaEffectProfilePolicy').LOCATION_PROHIBITED);};q.prototype.render=function(){var r=this.$MediaEffectMetadataLocation3()?i._("General frames can be for causes, events and just for fun, while location frames visually represent your Page's location."):i._("General frames can be for causes, events and just for fun, while location frames visually represent places like points of interest."),s=this.props.multistep?i._("Locations"):i._("Frame Type");return (c('React').createElement(c('MediaEffectCard.react'),{multistep:this.props.multistep,title:s,tooltip:r},this.$MediaEffectMetadataLocation2(),this.$MediaEffectMetadataLocation6(),this.$MediaEffectMetadataLocation7()));};q.propTypes={locationPageID:m.string,selectedOwner:m.object,onLocationPageSelected:m.func.isRequired,multistep:m.bool};f.exports=q;}),null);
__d('MediaEffectMetadataOwner.react',['cx','fbt','Image.react','MediaEffectCard.react','MediaEffectMetadataValidationUtils','MediaEffectWebdriverIDs','React','XUIError.react','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataOwner1=function(s){this.props.onOwnerChange(s.value);}.bind(this),o;}m.prototype.$MediaEffectMetadataOwner2=function(){var n=this.props,o=n.isValidating,p=n.selectedOwnerID,q=c('MediaEffectMetadataValidationUtils').validateOwnerID(p);if(o&&!q)return i._("Please select an owner");return null;};m.prototype.render=function(){var n=0,o=this.props.selectedOwnerID||n,p=c('React').createElement(l,{value:n},i._("Select Owner")),q=this.props.ownersData.map(function(s){return (c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{className:"_5hh3",src:s.src}),key:s.id,value:s.id},s.name));}),r=i._("The owner can be yourself or a Page. The owner's name and profile picture may appear next to the frame.");return (c('React').createElement(c('MediaEffectCard.react'),{multistep:this.props.multistep,title:i._("Owner"),tooltip:r},c('React').createElement('div',{className:"_2pin"},i._("Select the profile or Page that will appear with your frame.")),c('React').createElement(c('XUIError.react'),{xuiError:this.$MediaEffectMetadataOwner2()},c('React').createElement(c('XUISingleSelector.react'),{'data-testid':c('MediaEffectWebdriverIDs').LWE_EFFECT_OWNER_POPOVER_BUTTON,defaultValue:o,disabled:!!this.props.disabled,maxwidth:268,onChange:this.$MediaEffectMetadataOwner1,size:'xlarge',value:o},o===n?p:null,q))));};f.exports=m;}),null);
__d('OzConfig',['immutable','Reflux'],(function a(b,c,d,e,f,g){var h=c('immutable').Map,i=c('Reflux').createAction({sync:true}),j=c('Reflux').createAction({sync:true}),k=c('Reflux').createStore({init:function n(){this.data=h();this.listenTo(i,this._onSetConfig);this.listenTo(j,this._onUpdateConfig);},getInitialState:function n(){return this.data;},_onSetConfig:function n(o){this.data=o;this.trigger(this.data);},_onUpdateConfig:function n(o){this.data=this.data.mergeDeep(o);this.trigger(this.data);}});function l(n){return k.data.get(n);}function m(n){return k.data.getIn(n);}f.exports={ConfigStore:k,getInStaticConfig:m,getStaticConfig:l,setConfig:i,updateConfig:j};}),null);
__d('OzActions',['Reflux'],(function a(b,c,d,e,f,g){var h={};h.activateThread=c('Reflux').createAction();h.scrollThreadToTimestamp=c('Reflux').createAction();h.doneScrollingToTimestamp=c('Reflux').createAction();h.updateThreads=c('Reflux').createAction();h.maybeUpdateThreads=c('Reflux').createAction();h.clearReassignState=c('Reflux').createAction();h.deleteTask=c('Reflux').createAction();h.updateMerchants=c('Reflux').createAction();h.deleteMerchants=c('Reflux').createAction();h.updateWitIntents=c('Reflux').createAction();h.updateReps=c('Reflux').createAction();h.replaceReps=c('Reflux').createAction();h.replaceHumans=c('Reflux').createAction();h.updateRequirements=c('Reflux').createAction();h.showDialog=c('Reflux').createAction();h.hideDialog=c('Reflux').createAction();h.updateComposer=c('Reflux').createAction();h.addBubble=c('Reflux').createAction();h.addAutopilot=c('Reflux').createAction();h.isActive=c('Reflux').createAction();h.isInactive=c('Reflux').createAction();h.sendPulse=c('Reflux').createAction();h.updateQueueFilters=c('Reflux').createAction();h.intentCreator=c('Reflux').createActions(['toggle','select','clear']);h.emailComposer=c('Reflux').createActions(['delete','add']);h.emailComposer.update=c('Reflux').createAction({sync:true});h.inviteComposer=c('Reflux').createActions(['delete','add','create']);h.inviteComposer.update=c('Reflux').createAction({sync:true});h.twilio=c('Reflux').createActions(['connect','endCall','hangUp','incoming','incomingAccept','incomingReject','mute','ready','setup','startCall','unmute','updateIncomingInfo','useIntent','updateRating','dialAgain']);h.twilio.changeTo=c('Reflux').createAction({sync:true});h.twilio.sendDigits=c('Reflux').createAction({sync:true});h.sendMessageStart=c('Reflux').createAction();h.sendMessageFinish=c('Reflux').createAction();h.addHandledEvents=c('Reflux').createAction();h.updateServerOffset=c('Reflux').createAction();h.updateLoadingState=c('Reflux').createAction();h.updateCalendarEvents=c('Reflux').createAction();h.skywalkerMessage=c('Reflux').createAction();h.skywalkerStalled=c('Reflux').createAction();h.selectAIPick=c('Reflux').createAction();f.exports=h;}),null);
__d('OzNotify',['cx','immutable','OzImmutablePureRenderMixin','React','ReactCSSTransitionGroup','Reflux','joinClasses'],(function a(b,c,d,e,f,g,h){var i=c('immutable').OrderedMap,j=c('immutable').Map,k={addNotif:c('Reflux').createAction({sync:true}),removeNotif:c('Reflux').createAction({sync:true})},l=c('Reflux').createStore({init:function s(){this.data=i();this.listenTo(k.addNotif,this._onAddNotif);this.listenTo(k.removeNotif,this._onRemoveNotif);},getInitialState:function s(){return this.data;},_onAddNotif:function s(t){this.data=this.data.set(t.get('id'),t);this.trigger(this.data);},_onRemoveNotif:function s(t){this.data=this.data['delete'](t);this.trigger(this.data);}}),m=j({info:"_4nqo",warn:"_4nqp",error:"_4nqq"}),n=c('React').createClass({displayName:'OzNotify',mixins:[c('Reflux').connect(l,'notifs'),c('OzImmutablePureRenderMixin')],render:function s(){return (c('React').createElement(c('ReactCSSTransitionGroup'),{component:'div',transitionName:'oz-fade-in-out',className:"_4nqr",transitionEnterTimeout:500,transitionLeaveTimeout:500},this.state.notifs.reverse().map(function(t,u){return (c('React').createElement('div',{key:u,className:c('joinClasses')("_4nqs",m.get(t.get('level')))},t.get('msg'),c('React').createElement('span',{className:"_ok9",onClick:function v(){return k.removeNotif(u);},role:'button',tabIndex:'0'},'\u00D7')));}).valueSeq()));}}),o=7000,p=0;function q(s){return function(t){p+=1;k.addNotif(j({id:p,level:s,msg:t}));(function(u){window.setTimeout(function(v){return k.removeNotif(u);},o);})(p);};}var r={Component:n,info:q('info'),warn:q('warn'),error:q('error')};f.exports=r;}),null);
__d('OzAPI',['invariant','OzHelpers','OzNotify','Arbiter','ChannelConstants','ChannelManager','immutable','OzActions','OzAJAX','OzConfig','OzStores','promiseFinally','RTISubscriptionManager'],(function a(b,c,d,e,f,g,h){var i=c('immutable').List,j=c('immutable').Map,k=c('OzAJAX').ajax,l=c('OzAJAX').beacon,m=c('OzAJAX').buildURI,n=c('OzStores').ActiveThreadStore,o=c('OzStores').ThreadStore;c('ChannelManager').startChannelManager();function p(aa){if(aa.attachment&&!aa.attachments)aa.attachments=[aa.attachment];var ba=c('immutable').fromJS(aa);return ba;}function q(aa){return i(aa.map(function(ba){ba=p(ba);return [c('OzHelpers').msgID(ba),ba];})).fromEntrySeq().toMap();}function r(aa){if(!aa.messages)aa.messages=(aa['last-events']||[]).map(function(ca){ca.sender=ca.from;return ca;});aa.messages=q(aa.messages);var ba=c('immutable').fromJS(aa);return ba;}function s(aa){return i(aa.map(r));}function t(aa){var ba=s([aa]);c('OzActions').updateThreads(ba);c('OzActions').addHandledEvents(ba.first().get('handled-events',i()));ba.count()===1||h(0);return ba.first();}function u(aa){Number.isSafeInteger(aa.offset)||h(0);Number.isSafeInteger(aa.limit)||h(0);return k({type:'GET',url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID')),params:aa}).then(function(ba){var ca=ba.threads,da=s(ca);c('OzActions').updateThreads(da);return da;});}function v(aa){var ba=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],ca=arguments.length<=2||arguments[2]===undefined?null:arguments[2];typeof aa==='string'||h(0);typeof ba==='object'||h(0);var da,ea=false;if(ba instanceof FormData){da=ba;}else{da=JSON.stringify(ba);ea=true;}var fa=function ha(){var ia=n.data.get('activeIntent'),ja=n.data.get('threadID'),ka=ia&&ja&&o.data.getIn([ja,'intents'],i()).findLast(function(la){return la.get('id')===ia;},null,j()).get('state');return ka==='open'&&ia;},ga={type:'PUT',url:m('sync'),params:{t:aa,'intent-id':ca||fa(),page:c('OzConfig').getStaticConfig('PAGE_ID')},body:da};if(ea){ga.headers=ga.headers||{};ga.headers['content-type']='application/json';}c('OzHelpers').info('[sync] '+aa,ba);return k(ga);}function w(aa){return function(ba){return v(aa,{tid:ba}).then(function(ca){var da=r(ca);c('OzActions').updateThreads(i([da]));return da;});};}function x(aa){var ba=aa['user-id'],ca=aa['owner-id'],da=aa['last-owner-id'],ea=c('OzConfig').getStaticConfig('uid');return o.data.get(ba)||ca===ea||da===ea;}var y={metrics:j({}),bumpMetric:function aa(ba){y.metrics=y.metrics.updateIn(ba,function(ca){return (ca||0)+1;});},setMetric:function aa(ba,ca){y.metrics=y.metrics.setIn(ba,ca);},_witIntentCSV:function aa(){y.witIntents().done(function(ba){var ca='data:text/csv;charset=utf-8,';ba.forEach(function(da){return ca+='"'+da.get('name')+'","'+da.get('id')+'","'+da.get('doc')+'"\n';});window.open(window.encodeURI(ca));});},grab:w('grab'),release:w('release'),ready:w('ready'),notready:w('notready'),ack:w('ack'),lockThread:w('lock-thread'),markRead:w('mark-read'),unlockThread:function aa(ba,ca){return v('unlock-thread',{tid:ba,'locked-at':ca}).then(t);},assignTo:function aa(ba,ca){return v('assign-to',{tid:ba,id:ca});},escalate:function aa(ba){return y.createTag(ba,'escalated');},escalateTo:function aa(ba,ca){return y.escalate(ba).then(function(){return y.assignTo(ba,ca);});},typing:function aa(ba){return v('rep-typing',{tid:ba});},notTyping:function aa(ba){return v('rep-not-typing',{tid:ba});},createReminder:function aa(ba,ca){return v('create-reminder',babelHelpers['extends']({tid:ba},ca.toJS()));},createTask:function aa(ba,ca){return v('create-task',{tid:ba,task:ca.toJS()});},completeTask:function aa(ba,ca){return v('complete-task',{tid:ba,task:ca.toJS()}).then(t);},editTask:function aa(ba,ca){return v('edit-task',{tid:ba,task:ca.toJS()}).then(t);},cancelTask:function aa(ba,ca){var da=arguments.length<=2||arguments[2]===undefined?false:arguments[2];c('OzActions').deleteTask(ba,ca.get('id'));return v('cancel-task',{tid:ba,task:ca.toJS(),'cancel-future':da}).then(t);},openTask:function aa(ba,ca){return v('open-task',{tid:ba,task:ca.toJS()}).then(t);},closeReminder:function aa(ba,ca,da){return v('close-reminder',{tid:ba,id:ca,all:da}).then(t);},editReminder:function aa(ba,ca){return v('edit-reminder',{tid:ba,reminder:ca.toJS()}).then(t);},snoozeReminder:function aa(ba,ca){return v('snooze-reminder',{tid:ba,id:ca}).then(t);},deleteIntentRequirement:function aa(ba,ca,da){return v('delete-intent-requirement',{tid:ba,'intent-id':ca,'requirement-id':da},ca).then(t);},deleteThreadRequirement:function aa(ba,ca){return v('delete-thread-requirement',{tid:ba,'requirement-id':ca}).then(t);},createIntentRequirement:function aa(ba,ca,da){return v('create-intent-requirement',{tid:ba,'intent-id':ca,'requirement-name':da},ca).then(t);},createThreadRequirement:function aa(ba,ca){return v('create-thread-requirement',{tid:ba,'requirement-name':ca}).then(t);},createIntent:function aa(ba,ca){return v('create-intent',babelHelpers['extends']({tid:ba},ca.toJS())).then(t);},openIntent:function aa(ba,ca){return v('open-intent',{tid:ba,id:ca},ca).then(t);},triggerAIForIntent:function aa(ba,ca){return v('trigger-ai-for-intent',{tid:ba,id:ca},ca);},closeIntent:function aa(ba,ca,da,ea,fa){var ga={tid:ba,id:ca,'close-state':da,feedback:ea,'send-survey':fa};return v('close-intent',ga,ca).then(t);},blockIntent:function aa(ba,ca){return v('block-intent',{tid:ba,id:ca},ca).then(t);},unblockIntent:function aa(ba,ca){return v('unblock-intent',{tid:ba,id:ca},ca).then(t);},addPhoneNumber:function aa(ba,ca){return v('add-phone-number',{tid:ba,'intent-id':ca},ca);},editIntent:function aa(ba,ca){return v('edit-intent',babelHelpers['extends']({tid:ba},ca.toJS()),ca.get('id')).then(t);},createTag:function aa(ba,ca){return v('add-thread-tag',{tid:ba,tag:ca}).then(t);},deleteTag:function aa(ba,ca){return v('remove-thread-tag',{tid:ba,tag:ca}).then(t);},view:w('create-subscription'),unview:function aa(ba){return v('delete-subscription',{tid:ba});},updateMessage:function aa(ba,ca){return v('update-message',{tid:ba,message:ca.toJS()}).then(t);},everstoreUpload:function aa(ba){var ca=new FormData();ba.forEach(function(da,ea){return ca.append(ea,da);});return v('everstore-upload',ca);},upload:function aa(ba){var ca=new FormData();ba.forEach(function(da,ea){return ca.append(ea,da);});return v('upload',ca).then(function(da){return c('immutable').fromJS(da);});},sendMessage:function aa(ba){var ca=v('send',ba).then(function(da){return t({'user-id':ba.tid,'last-events':da});});c('promiseFinally')(ca,function(da){return c('OzActions').sendMessageFinish(ba.tid);});window.setTimeout(function(){return c('OzActions').sendMessageStart(ba.tid);},200);return ca;},scheduleMessage:function aa(ba){return v('schedule-send',ba);},suggest:function aa(ba){return v('suggest',ba).then(t);},scheduleSuggest:function aa(ba){return v('schedule-suggest',ba);},deleteScheduled:function aa(ba,ca){return v('delete-scheduled',{tid:ba,id:ca}).then(t);},saveNote:function aa(ba,ca){var da={tid:ba,infos:{notes:ca}};return v('update-infos',da).then(t);},saveMeta:function aa(ba,ca){var da={tid:ba,infos:{'metadata-json':ca.toJS()}};return v('update-infos',da).then(t);},saveMuted:function aa(ba,ca){var da={tid:ba,infos:{muted:ca}};return v('update-infos',da).then(t);},createMerchant:function aa(ba){return v('create-merchant',ba.toJS()).then(function(ca){var da=i([j(ca)]);c('OzActions').updateMerchants(da);return da;});},editMerchant:function aa(ba){return v('edit-merchant',ba.toJS()).then(function(ca){var da=i([j(ca)]);c('OzActions').updateMerchants(da);return da;});},deleteMerchant:function aa(ba){return v('delete-merchant',ba.toJS()).then(function(ca){if(ca&&ca.id){var da=i([ca.id]);c('OzActions').deleteMerchants(da);return da;}else c('OzHelpers').warn('[api] unexpected delete-merchant response',ca);});},sendEmail:function aa(ba,ca){var da=n.data.get('threadID');return v('send-email',babelHelpers['extends']({tid:da},ba.toJS()),ca);},sendInvite:function aa(ba,ca){var da=n.data.get('threadID');return v('send-calendar',babelHelpers['extends']({tid:da},ba.toJS()),ca);},fetchCalendar:function aa(ba){return k({type:'GET',url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID'),ba,'calendar')}).then(function(ca){c('OzActions').updateCalendarEvents({tid:ba,calendarEvents:ca});return ca;});},bookOpenTable:function aa(ba,ca,da,ea,fa){return v('book-reservation',{tid:ba,rid:da,ts:ea,covers:fa},ca);},everstoreURI:function aa(ba){return v('everstore-uri',{handle:ba});},witIntents:function aa(){return k({type:'GET',url:m('wit-intents',c('OzConfig').getStaticConfig('PAGE_ID'))}).then(function(ba){var ca=c('immutable').fromJS(ba);c('OzActions').updateWitIntents(ca);return ca;});},merchants:function aa(){return k({type:'GET',url:m('merchants')}).then(function(ba){c('OzActions').updateMerchants(i(ba).map(function(ca){return j(ca);}));});},repsSync:function aa(){return k({type:'GET',url:m('reps-sync')});},requirements:function aa(){return k({type:'GET',url:m('requirements')}).then(function(ba){c('OzActions').updateRequirements(c('immutable').fromJS(ba));});},AIModules:function aa(){return k({type:'GET',url:m('ai-modules')}).then(function(ba){return i(ba);});},authorFeedback:function aa(ba){return k({type:'GET',url:m('author-feedback'),params:{author_id:ba}}).then(function(ca){return j(ca.map(function(da){da=c('immutable').fromJS(da);return [c('OzHelpers').msgID(da),da];}));});},myThreads:function aa(){var ba=c('OzConfig').getStaticConfig('PAGE_ID');return k({type:'GET',params:{page:ba},url:m('mythreads')}).then(function(ca){var da=ca.mythreads;c('OzActions').updateThreads(s(da));});},allThreads:function aa(ba,ca,da,ea){var fa={all:true,first_tags:ba.toJS(),last_tags:ca.toJS(),offset:da,limit:ea};if(ba.has('ready')){ba=ba['delete']('ready');fa.ready=true;}else if(ca.has('ready')){ca=ca['delete']('ready');fa.ready=false;}return u(fa);},thread:function aa(ba){return k({type:'GET',url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID'),ba)}).then(t);},handledEvents:function aa(ba){return k({type:'GET',params:{'intent-id':ba},url:m('handled-events')}).then(function(ca){c('OzActions').addHandledEvents(c('immutable').fromJS(ca['handled-events']));});},tasksForIntent:function aa(ba,ca){var da=c('OzConfig').getStaticConfig('PAGE_ID');return k({type:'GET',params:{page:da},url:m('tasks',ba)}).then(function(ea){t({'user-id':ca,tasks:ea});});},history:function aa(ba,ca,da){return k({type:'GET',params:{timestamp:ca,limit:da},url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID'),ba,'history')}).then(function(ea){var fa=t({'user-id':ba,messages:ea});return fa.get('messages');});},topIntents:function aa(){return k({type:'GET',url:m('top-intents')}).then(function(ba){return c('immutable').fromJS(ba);});},intentsDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','intent',c('OzConfig').getStaticConfig('PAGE_ID'))}).then(function(ca){return c('immutable').fromJS(ca);});},aiDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','ai',c('OzConfig').getStaticConfig('PAGE_ID'))}).then(function(ca){return c('immutable').fromJS(ca);});},statsDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','trainer',ba['trainer-id'])}).then(function(ca){return c('immutable').fromJS(ca);});},teamStatsDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','trainer-team-stats')}).then(function(ca){return c('immutable').fromJS(ca);});},humans:function aa(){return k({type:'GET',url:m('humans')}).then(function(ba){return c('OzActions').replaceHumans(c('immutable').fromJS(ba));});},search:function aa(ba){return k({params:ba,type:'GET',url:m('search')}).then(function(ca){return c('immutable').fromJS(ca).flatten(true);});},requestAutopilot:function aa(ba){window.postMessage(ba,'*');},notifyExtension:function aa(ba){c('OzHelpers').debug('[oz-ext] notifying toto',ba);window.postMessage(babelHelpers['extends']({type:'notification'},{data:ba}),'*');},recordActivity:function aa(ba,ca){return v('activity',babelHelpers['extends']({tid:ba},{activity:ca}));},sendPulse:function aa(ba,ca){return k({type:'POST',url:m('pulse'),headers:{'content-type':'application/json'},params:{page:c('OzConfig').getStaticConfig('PAGE_ID'),duration:ba},body:JSON.stringify(ca)});},sendDisconnectPulse:function aa(ba,ca){return l({url:m('pulse'),params:{page:c('OzConfig').getStaticConfig('PAGE_ID'),duration:ba},body:JSON.stringify(ca)});},threadFocus:function aa(ba,ca){return v('thread-focus',{tid:ba,intentID:ca},ca);},away:function aa(ba){return v('away',{away:ba});},coachMode:function aa(ba){return v('coach-mode',{'coach-mode':ba});},timestamp:function aa(){var ba=Date.now();return k({type:'POST',url:m('timestamp')}).then(function(ca){var da=ca.timestamp,ea=Date.now();if(ea-ba>1000){c('OzHelpers').warn('[oz-api] timestamp took over 1 second, not updating offset');}else{var fa=ea-(da+(ea-ba)/2);c('OzActions').updateServerOffset({offsetMs:fa});}});},init:function aa(){return k({type:'GET',url:m('init')}).then(function(ba){ba['twilio-token']&&c('OzActions').twilio.setup(ba['twilio-token']);c('OzConfig').updateConfig(c('immutable').fromJS(ba));});},realTime:function aa(ba,ca){var da,ea=60000,fa=function la(){var ma=Date.now();clearInterval(da);da=setInterval(function(na){var oa=Math.round((Date.now()-ma)/1000);c('OzActions').skywalkerStalled();c('OzHelpers').warn('[rti] no payload in '+oa+'seconds');},ea);},ga={repsVersion:-1},ha=function la(ma,na){var oa=na.payload,pa=na.topic;ma==='sky'||ma==='msg'||h(0);fa();var qa=ma==='sky'?ma+' '+pa+' ->':ma,ra=oa.type,sa=ra||'';c('OzHelpers').debug('[rti] '+qa+' '+sa,oa);if(!oa.data){c('OzHelpers').error('[sky] got sky event without data',oa,pa);return;}var ta=oa.data['page-id'];if(ta&&ta!==c('OzConfig').getStaticConfig('PAGE_ID')){c('OzHelpers').debug('[sky] junk event on '+pa,oa);return;}var ua;y.bumpMetric(['realtime',ra]);c('OzActions').skywalkerMessage({payload:oa,timestamp:c('OzHelpers').serverNow()});switch(ra){case 'thread':ua=oa.data;t(ua);break;case 'thread-metrics':ua=oa.data;if(o.data.get(ua['user-id'])){y.bumpMetric(['realtime','thread-metrics-update-thread']);t(ua);}break;case 'maybe-thread':ua=oa.data;c('OzActions').maybeUpdateThreads(s([ua]));break;case 'delivered':case 'seen':ua=oa.data;t({'user-id':ua['user-id'],'last-seen':ua['last-seen']});break;case 'presence':ua=oa.data;t({'user-id':ua['user-id'],'last-presence':ua['last-presence']});break;case 'carebear':(function(){var bb=oa.data,cb=bb.type,db=bb.tid,eb={'user-id':db};eb['ui-'+cb]=true;t(eb);})();break;case 'inactive':c('OzActions').isInactive();break;case 'updated-merchant':c('OzActions').updateMerchants(i([j(oa.data)]));break;case 'deleted-merchant':c('OzActions').deleteMerchants(i([oa.data.id]));break;case 'phone-call':c('OzActions').twilio.updateIncomingInfo(c('immutable').fromJS(oa.data));break;case 'humans':c('OzActions').replaceHumans(c('immutable').fromJS(oa.data));break;case 'reps-sync':ga=babelHelpers['extends']({},ga,{repsVersion:oa.version});c('OzActions').replaceReps(c('immutable').fromJS(oa.data));break;case 'reps-diff':if(ga.repsVersion!==oa.version-1){c('OzHelpers').warn('[api] reps version out of sync',{'our-version':ga.repsVersion,'next-version':oa.version});ga=babelHelpers['extends']({},ga,{repsVersion:-1});y.repsSync();}else{ga.repsVersion=oa.version;c('OzActions').updateReps(c('immutable').fromJS(oa.data));}break;case 'handled-events':c('OzActions').addHandledEvents(c('immutable').fromJS(oa.data));break;case 'config':c('OzConfig').updateConfig(c('immutable').fromJS(oa.data));break;case 'notify':var va=oa.data,wa=va.level,xa=va.message;c('OzNotify')[wa](xa);break;case 'updated-thread':var ya=oa.data['user-id'];if(x(oa.data)){y.bumpMetric(['realtime','updated-thread-fetch-thread']);c('OzHelpers').info('[api] fetching thread after update',ya);y.thread(ya);}break;case 'ping':var za=oa.data.timestamp,ab=c('OzHelpers').serverNow()-za;y.setMetric(['realtime','pingLatency'],ab);break;default:c('OzHelpers').debug('[sky] unk type',ra,oa);}},ia=function la(){for(var ma=arguments.length,na=Array(ma),oa=0;oa<ma;oa++)na[oa]=arguments[oa];try{ha.apply(undefined,na);}catch(pa){try{c('OzHelpers').error.apply(c('OzHelpers'),['[sky] error handling message'].concat(na));}catch(qa){}}},ja=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('msg'),function(la,ma){ia('msg',ma.obj);}),ka=z(function(){c('Arbiter').unsubscribe(ja);c('RTISubscriptionManager').unsubscribeAll();});c('RTISubscriptionManager').subscribe(ba,ia.bind(this,'sky'),null,z(function(la){var ma=la.data,na=la.error;if(na){ka();ca(na,ma);}else{fa();ca(null,ma,ja);}}));return ka;}};function z(aa){var ba,ca,da=this;return function(){if(!ba){ca=aa.apply(da,arguments);ba=true;}return ca;};}f.exports=y;}),null);
__d('ozMakeColor',['randomShuffle','immutable'],(function a(b,c,d,e,f,g){var h=c('immutable').Map,i=c('immutable').List,j=c('immutable').Range,k=function n(o,p){return 'hsla('+o+', 85%, 30%, '+p+')';};function l(){var n=arguments.length<=0||arguments[0]===undefined?25:arguments[0],o=arguments.length<=1||arguments[1]===undefined?.9:arguments[1],p=i(c('randomShuffle')(j(10,360,n).toJS())),q=0,r=h();return function(s){if(r.has(s)){return k(r.get(s),o);}else{var t=p.get(q);r=r.set(s,t);q=(q+1)%p.count();return k(t);}};}function m(){var n=arguments.length<=0||arguments[0]===undefined?77:arguments[0];return function(o){return k(o*n%360,.9);};}f.exports={makeColorShuffle:l,makeColor:m};}),null);
__d('OzHelpers',['ozMakeColor','BanzaiScuba','DatePickerRestraints','ErrorUtils','getURLRanges','immutable','LogHistory','OzConfig','OzConstants','OzServerTime','OzImmutablePureRenderMixin','React','URI'],(function a(b,c,d,e,f,g){var h=c('ozMakeColor').makeColor,i=c('immutable').List,j=c('immutable').Map,k=c('immutable').Set,l=c('immutable').OrderedMap,m=c('OzConstants').AUTHOR_TYPES,n=c('OzConstants').REMINDERS,o=/^image\//,p={color:h(),blobURI:function ba(ca){return window.URL.createObjectURL(ca);},blobFromDataURI:function ba(ca){var da=ca.split(','),ea=atob(da[1]),fa=da[0].split(':')[1].split(';')[0],ga=new ArrayBuffer(ea.length),ha=new Uint8Array(ga);for(var ia=0;ia<ea.length;ia++)ha[ia]=ea.charCodeAt(ia);return new Blob([ga],{type:fa});},toLocaleDate:function ba(ca){return new Date(ca).toLocaleDateString();},toLocaleTime:function ba(ca){return new Date(ca).toLocaleTimeString();},hasCmdOrCtrl:function ba(ca){return ca.getModifierState('Meta')||ca.getModifierState('Control');},keysIn:function ba(){var ca=k(arguments);return function(da,ea){return ca.has(ea);};},safeParse:function ba(ca){var da={};try{da=JSON.parse(ca);}catch(ea){p.info('invalid json',ca);}return da;},safeURI:function ba(ca){var da=null;try{da=c('URI').isValidURI(ca)&&new (c('URI'))(ca)||null;}catch(ea){p.info('invalid uri',ca);}return da;},pure:s,memoize:t,values:function ba(ca){return Object.keys(ca).map(function(da){return ca[da];});},nonempty:function ba(ca){return ca&&!ca.isEmpty()?ca:null;},uniqId:v,debug:x('debug',false),info:x('info',true),warn:x('warn',true),error:x('error',true),isImageType:function ba(ca){return o.test(ca);},isStickerType:function ba(ca){return ca==='image/sticker';},dateRestraints:w,moveCursorToInputEnd:function ba(ca){if(ca.setSelectionRange){var da=ca.value.length;ca.setSelectionRange(da,da);}},toTitleCase:function ba(ca){var da=k(['a','an','the','at','by','for','in','of','on','to','up','and','as','but','or','nor']),ea=function ga(ha,ia,ja){return (ia===0||ia+ha.length===ja.length);},fa=function ga(ha,ia,ja){return (ea(ha,ia,ja)||!da.has(ha)?ha.charAt(0).toUpperCase()+ha.substr(1):ha);};return ca.toLowerCase().replace(/\w\S*/g,fa);},scrollToBottom:function ba(ca){ca.scrollTop=ca.scrollHeight;},threadID:function ba(ca){return ca.get('user-id');},isNew:function ba(ca){return !p.intents(ca).find(p.isClosedIntent);},hasOwner:function ba(ca){return ca.getIn(['owner','id']);},hasAllTags:function ba(ca,da){return da.every(function(ea){return p.hasTag(ca,ea);});},hasSomeTag:function ba(ca,da){return da.some(function(ea){return p.hasTag(ca,ea);});},hasTag:function ba(ca,da){return ca.get('tags')&&ca.get('tags').contains(da);},isEscalated:function ba(ca){return p.hasTag(ca,'escalated');},hasEngage:function ba(ca){return !!ca.get('engagement-type');},photo:function ba(ca){return ca.getIn(['user-vcard','photo'])||ca.getIn(['user-vcard','picture']);},compareNums:function ba(ca,da){if(ca&&da){return da-ca;}else if(ca){return -1;}else if(da){return 1;}else return 0;},compareBools:function ba(ca,da){if(ca&&da){return 0;}else if(ca){return -1;}else if(da)return 1;},getIncomingThreads:function ba(ca){return ca.filter(function(da){return da.get('ready')&&!p.hasOwner(da);}).sort(p.threadComparator);},threadComparator:function ba(ca,da){var ea=p.compareBools(p.hasTag(ca,'vip'),p.hasTag(da,'vip')),fa=p.compareBools(p.hasTag(ca,'urgent'),p.hasTag(da,'urgent')),ga=p.compareNums(p.urgentReminders(ca).getIn([0,'scheduled-time']),p.urgentReminders(da).getIn([0,'scheduled-time'])),ha=p.compareNums(ca.get('last-event-at'),da.get('last-event-at'));return (ea||fa||ga||ha);},lastEvents:function ba(ca){return ca.get('last-events',i()).sortBy(function(da){return da.get('timestamp');});},lastUserMessage:function ba(ca){return p.lastEvents(ca).findLast(function(da){return p.authorType(da)===m.USER;});},shortDesc:function ba(){var ca=arguments.length<=0||arguments[0]===undefined?j():arguments[0],da=ca.getIn(['attachments',0,'mime_type']),ea=ca.getIn(['attachments',0,'sticker_id']);return ca.get('text')||ea&&'sent a sticker.'||da&&(da.match(/video/i)&&'sent a video.'||da.match(/audio/i)&&'sent an audio clip.'||da.match(/image/i)&&'sent an image');},preferredName:function ba(ca){return (ca.getIn(['metadata-json','preferred-name'])||ca.getIn(['user-vcard','first-name']));},userEmail:function ba(ca){return (ca.getIn(['metadata-json','email']));},intents:function ba(ca){return ca.get('intents',i()).sortBy(function(da){return da.get('created-at');});},isOwner:function ba(ca,da){var ea=ca.getIn(['owner','id']);return ea&&da&&ea==da;},wasOwner:function ba(ca,da){var ea=ca.getIn(['last-owner','id']);return ea&&da&&ea==da;},isLocker:function ba(ca,da){return ca.get('locked')&&ca.get('locker-id')===da;},nameOrId:function ba(ca){return ca&&(ca.get('name')||ca.get('id'))||'';},isSubscriber:function ba(ca,da){return !!ca.get('subscriptions',i()).find(function(ea){return ea===da;});},hasUnblockedIntents:function ba(ca){return ca.get('intents',i()).some(function(da){return !p.isBlockedIntent(da);});},hasOpenIntents:function ba(ca){return ca.get('intents',i()).some(function(da){return p.isOpenIntent(da);});},openIntents:function ba(ca){return p.intents(ca).filter(p.isOpenIntent);},closedIntents:function ba(ca){return p.intents(ca).filter(p.isClosedIntent);},intentById:function ba(ca,da){return p.intents(ca).findLast(function(ea){return ea.get('id')===da;});},isBlockedIntent:function ba(ca){return ca.get('blocked');},intentName:function ba(ca){return ca.get('name')||'Unknown intent';},intentAlias:function ba(ca){return ca.get('alias')||ca.get('name')||'Unknown intent';},isOpenIntent:function ba(ca){return ca.get('state')==='open';},isClosedIntent:function ba(ca){return !p.isOpenIntent(ca);},isDeleted:function ba(ca){return ca.get('state')==='deleted';},getName:function ba(ca){return ca.getIn(['user-vcard','name'],'Unknown user');},lastPresence:function ba(ca){return Math.max(ca.get('last-seen')||0,ca.get('last-presence')||0);},timeSpent:function ba(ca){if(ca.get('ready')&&ca.get('last-ready-at'))return p.serverNow()-ca.get('last-ready-at');},locationLastSeen:function ba(ca){if(ca.getIn(['location','last-seen']))return new Date(ca.getIn(['location','last-seen']));},timezone:function ba(ca){return ca.getIn(['location','timezone']);},durationStr:function ba(ca){if(ca==null){p.warn('[durationStr] strange duration '+ca);return '[invalid duration]';}else if(ca<-1000){p.warn('[durationStr] strange duration '+ca);return '-'+p.durationStr(-ca);}else if(ca<0){p.warn('[durationStr] strange duration '+ca);return '< 0s';}else if(ca===0){return '0s';}else if(ca<1000){return '< 1s';}else if(ca<60*1000){return Math.floor(ca/1000)+'s';}else if(ca<60*60*1000){return Math.floor(ca/(60*1000))+'m';}else if(ca<24*60*60*1000){return Math.floor(ca/(60*60*1000))+'h';}else return Math.floor(ca/(24*60*60*1000))+'d';},serverNow:function ba(){return c('OzServerTime').serverNow();},repName:function ba(ca,da){var ea=da.get(ca);return ea&&ea.get('name')||ca||null;},authorType:function ba(ca){var da=m.BOT,ea=m.USER,fa=m.TRAINER,ga=ca.get('sender')||ca.get('from'),ha=ca.get('author-type');return (ha===da&&da||(ha===fa||ga===c('OzConfig').getStaticConfig('PAGE_ID'))&&fa||ea);},msgID:function ba(){var ca=arguments.length<=0||arguments[0]===undefined?j():arguments[0];return ca.get('offline-threading-id')||ca.get('mid')||p.warn('[msgID] had to resort to timestamp',ca)&&null||ca.get('timestamp');},isActivePulse:function ba(ca){var da=ca&&ca.get('pulse-data');if(!da)return false;return !da.get('away?')&&da.get('inactive-ms',Infinity)<30000;},EMPTY_BODY:c('immutable').fromJS([{'content-type':'text/plain; charset=UTF-8',body:{contents:''}}]),eventToEmail:function ba(ca){return {email:ca.get('data'),intentId:ca.get('intent-id'),id:ca.get('id')};},reEmail:function ba(ca){var da=ca.getIn(['data','subject']),ea=da.toUpperCase().startsWith('RE:')?da:'Re: '+da;return ca.setIn(['data','subject'],ea).setIn(['data','body'],this.EMPTY_BODY);},switchRecip:function ba(ca){var da=ca.get('data'),ea=da.get('from'),fa=da.get('to');return ca.setIn(['data','from'],fa).setIn(['data','to'],i([ea]));},eventToInvite:function ba(ca){return {invite:ca.get('data'),id:ca.get('id'),intentId:ca.get('intent-id'),disabled:true};},urgentReminders:function ba(ca){return ca.get('reminders',i()).sortBy(function(da){return da.get('scheduled-time');}).filter(p.isUrgentReminder);},paidReminders:function ba(ca){return p.urgentReminders(ca).filter(p.isPaidReminder);},isUrgentReminder:function ba(ca){var da=ca.get('state');return da==='active'||da==='active-snoozed';},isPaidReminder:function ba(ca){return !!ca.getIn(['body','suggestion']);},isSnoozedReminder:function ba(ca){var da=ca.get('state');return da==='snoozed'||da==='active-snoozed';},isUrgentTask:function ba(ca){var da=ca.get('state');return da==='dispatched'&&ca.get('deadline')<p.serverNow();},isPaidTask:function ba(ca){return !!ca.getIn(['data','suggestion']);},isCompletedTask:function ba(ca){return ca.get('state')==='completed';},isCanceledTask:function ba(ca){return ca.get('state')==='canceled';},isWaitingTask:function ba(ca){return ca.get('state')==='waiting';},isClosedTask:function ba(ca){return p.isCompletedTask(ca)||p.isCanceledTask(ca);},isOpenTask:function ba(ca){return !p.isClosedTask(ca);},isUnread:function ba(ca){return ca.get('read-state')==='unread';},soonestDueTask:function ba(ca){return ca.filterNot(p.isClosedTask).minBy(function(da){return da.get('start-at');});},nextTaskForIntent:function ba(ca){var da=arguments.length<=1||arguments[1]===undefined?i():arguments[1];return p.soonestDueTask(da.filter(function(ea){return ea.get('intent-id')===ca.get('id');}));},nextTaskForThread:function ba(ca){return p.soonestDueTask(ca.get('tasks',i()));},unreadTs:function ba(ca){return c('OzConfig').ConfigStore.data.getIn(['GK','responsivenessV2'])?ca.get('unread-timestamp'):(p.lastUserMessage(ca)||j()).get('timestamp');},hasPaid:function ba(ca){return !!p.paidReminders(ca).size;},hasReminder:function ba(ca){return !!p.urgentReminders(ca).size;},minAge:function ba(ca){var ba=+ca.getIn(['user-vcard','age-range','min']);return Number.isSafeInteger(ba)?ba:0;},shimURI:function ba(ca){return new (c('URI'))('https://l.facebook.com/l.php').setQueryData({u:ca,h:c('OzConfig').getStaticConfig('shimhash')}).toString();},uiSuggestion:function ba(ca){var da=ca.has('amount')?'$'+(ca.get('amount')/100).toFixed(2):'';return {id:ca.get('item-id')||'-1',name:ca.get('name'),desc:ca.get('description'),thumb_url:ca.get('thumb-url'),merchant_name:ca.get('merchant-name')||'',total_cost:ca.get('amount')?j({amount:ca.get('amount')}):null,display_total_cost:da,target_url:p.shimURI(ca.get('target-url')),payment_id:ca.get('payment-id'),expiration_time:ca.get('expiration-time')};},parsePhoneNumber:function ba(ca){if(!ca)return '';if(ca.length==12&&ca[0]=='+')ca=ca.substr(1);if(ca.length==11&&ca[0]=='1')ca=ca.substr(1);switch(ca.length){case 10:return '('+ca.substr(0,3)+') '+ca.substr(3,3)+'-'+ca.substr(6,4);case 7:return ca.substr(0,3)+'-'+ca.substr(3,4);default:return ca;}},validateURL:function ba(ca){return (!!ca&&typeof ca==='string'&&c('getURLRanges')(ca).length&&c('URI').isValidURI(ca));},normalizeMerchant:function ba(ca){return ca.updateIn(['website'],function(da){if(!da)return da;var ea=c('getURLRanges')(da);if(!ea||ea.length===0)return da;return ea[0].entity.url;}).updateIn(['page-id'],function(da){if(Number.isFinite(da)||typeof da==='string')return parseInt(da,10);return null;});},validateMerchant:function ba(ca){var da=k(['name-dba','country']),ea=k(['address','website','page-id']),fa={},ga=ca.get('website','');if(ga&&!this.validateURL(ga))fa.website='Website is an invalid URL';var ha=ca.get('page-id',null);if(ha!=null&&!Number.isFinite(ha))fa['page-id']='FB Page must be a number';da.map(function(ja){if(!ca.get(ja))fa[ja]='This field is required';});if(k(ca.filter(function(ja){return ja;}).keys()).intersect(ea).isEmpty()){var ia='At least one of '+ea.join(', ')+' is required';ea.forEach(function(ja){fa[ja]=ia;});}return j(fa);},isDaytime:function ba(ca){var da=(Date.now()+ca)%(24*60*60*1000),ea=da/(60*60*1000);return ea>=6;},fullThreadData:function ba(ca,da,ea){var fa=ca.get(ea);if(!fa)return null;return fa.update('intents',function(ga){return (ga||i()).map(function(ha){var ia=q(da,ha),ja=r(fa,ia);return ja;});});},threadPath:function ba(ca){var da=ca.threadid,ea=ca.intentid,fa=ca.taskid,ga=ca.eventid,ha=ea?'/intent/'+ea:'',ia=fa?'/task/'+fa:'',ja=ga?'/event/'+ga:'';return '/inbox/'+da+ha+(ia||ja);},updateInWhen:function ba(ca,da,ea){var fa={};if(ca.getIn(da,fa)!==fa)return ca.updateIn(da,ea);return ca;},getRequirement:function ba(ca,da){return ca.get('requirements',i()).find(function(ea){return ea.get('name')===da;});}};function q(ba,ca){var da=ba.getIn(['byIntent',ca.get('id')],j());return ca.set('events',da);}function r(ba,ca){var da=ba.getIn(['tasks-by-intent',ca.get('id')]);return ca.set('tasks',da);}function s(ba){var ca=arguments.length<=1||arguments[1]===undefined?'OzPureComponent':arguments[1];return (c('React').createClass({displayName:ca,mixins:[c('OzImmutablePureRenderMixin')],render:function da(){return ba(this.props);}}));}function t(ba,ca){var da=arguments.length<=2||arguments[2]===undefined?1000:arguments[2],ea=l();return function(){for(var fa=arguments.length,ga=Array(fa),ha=0;ha<fa;ha++)ga[ha]=arguments[ha];var ia=ca.apply(this,ga);if(ea.get(ia)){return ea.get(ia);}else{var ja=ba.apply(this,ga);ea=ea.set(ia,ja).takeLast(da);return ja;}}.bind(this);}var u=0;function v(){return u++;}function w(){var ba=new Date(),ca=new Date(Date.UTC(ba.getFullYear(),ba.getMonth(),ba.getDate())),da=new Date(+ca);da.setFullYear(ca.getFullYear()+n.RANGE_IN_YEARS);return {dateRestraints:[c('DatePickerRestraints').enforceDateIsNoEarlierThan(ca),c('DatePickerRestraints').enforceDateIsNoLaterThan(da)]};}c('ErrorUtils').addListener(function(ba){var ca=aa({level:'error',message:'[unhandled-error]['+ba.name+'] '+ba.message,data:'--stack\n'+ba.stack+'\n\n--originalError\n'+ba._originalError});z(ca);y(ca);});function x(ba,ca){return function(){for(var da=arguments.length,ea=Array(da),fa=0;fa<da;fa++)ea[fa]=arguments[fa];var ga=ea[0],ha=ea.slice(1);window.console.log(ba,ga,ha);var ia=aa({level:ba,message:ga,data:ha});z(ia);ca&&y(ia);};}function y(ba){var ca=new (c('BanzaiScuba'))(c('OzConfig').getStaticConfig('scubaCategory'));Object.entries(ba).forEach(function(da){var ea=da[0],fa=da[1];Number.isSafeInteger(fa)?ca.addInteger(ea,fa):ca.addNormal(ea,fa);});ca.post();}function z(ba){var ca=c('LogHistory').getInstance('oz-logger');(ca[ba.level]||ca.debug).call(ca,ba.message,'');}function aa(ba){return babelHelpers['extends']({},ba,{uid:c('OzConfig').getStaticConfig('uid'),public_name:c('OzConfig').getStaticConfig('publicName'),rev:c('OzConfig').getStaticConfig('rev'),timestamp:p.serverNow()});}f.exports=p;}),null);
__d('OzServerTime',['OzStores','OzAPI'],(function a(b,c,d,e,f,g){var h=c('OzStores').ServerOffsetStore,i;function j(){return Math.floor(Date.now()-h.data.get('offsetMs'));}function k(){window.clearInterval(i);}function l(){c('OzAPI').timestamp();k();i=window.setInterval(function(){return c('OzAPI').timestamp();},1000*60*60*3);}f.exports={serverNow:j,setup:l,tearDown:k};}),null);
__d('OzStores',['invariant','OzHelpers','immutable','OzActions','Reflux'],(function a(b,c,d,e,f,g,h){var i=c('immutable').List,j=c('immutable').Map,k=c('immutable').OrderedMap,l=c('immutable').OrderedSet,m=c('immutable').Set,n=c('immutable').Iterable,o=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateRequirements,this._onUpdateRequirements);},getInitialState:function na(){return this.data;},_onUpdateRequirements:function na(oa){this.data=this.data.withMutations(function(pa){oa.forEach(function(qa){var ra=qa.get('name'),sa=pa.get(ra,j()).merge(qa).update('wit-intent-uuids',function(ta){return ta&&ta.toSet()||m();});pa.set(ra,sa);});});c('OzHelpers').debug('[oz] updated RequirementStore');this.trigger(this.data);}}),p=c('Reflux').createStore({init:function na(){this.data=l();this.listenTo(c('OzActions').addBubble,this._onAddBubble);},getInitialState:function na(){return this.data;},_onAddBubble:function na(oa){j.isMap(oa)||h(0);this.data=this.data.add(oa).takeLast(100);this.trigger(this.data);},metrics:function na(){return j({bubbleCount:this.data.count()});}}),q=c('Reflux').createStore({init:function na(){this.data=k();this.listenTo(c('OzActions').addAutopilot,this._onAddAutopilot);},getInitialState:function na(){return this.data;},_onAddAutopilot:function na(oa){j.isMap(oa)||h(0);this.data=this.data.set(oa.get('id'),oa.get('data')).takeLast(100);this.trigger(this.data);}}),r='id',s=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateWitIntents,this._onUpdateWitIntents);},getInitialState:function na(){return this.data;},_onUpdateWitIntents:function na(oa){c('immutable').List.isList(oa)||h(0);this.data=this.data.withMutations(function(pa){return oa.reduce(function(qa,ra){return qa.set(ra.get(r),ra);},pa);});this.trigger(this.data);},metrics:function na(){return j({witIntentCount:this.data.count()});}}),t=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').activateThread,this._onActivateThread);},getInitialState:function na(){return this.data;},_onActivateThread:function na(oa){var pa=oa.threadID,qa=oa.intentID,ra=oa.taskID,sa=oa.eventID;c('OzHelpers').info('[store/activeThread] set active thread: ',{threadID:pa,intentID:qa,taskID:ra,eventID:sa});this.data=this.data.set('oldThreadID',this.data.get('threadID')).set('threadID',pa).set('activeIntent',qa).set('activeTask',ra).set('activeEvent',sa);this.trigger(this.data);}}),u='user-id',v=function na(oa,pa){return oa.reduce(function(qa,ra){qa[ra.get(pa)]=ra;return qa;},{});};function w(na,oa){j.isMap(na)&&j.isMap(oa)||h(0);var pa=v(na,'offline-threading-id'),qa=v(na,'mid');return na.withMutations(function(ra){return oa.valueSeq().filterNot(function(sa){var ta=sa.get('attachments');if(ta)return ta.first()&&ta.first().getIn(['xma','body'])===null;return false;}).reduce(function(sa,ta){var ua=ta.get('offline-threading-id'),va=ta.get('mid'),wa=ua&&pa[ua]||va&&qa[va]||sa.get(c('OzHelpers').msgID(ta));if(wa){sa=sa['delete'](c('OzHelpers').msgID(wa));ta=wa.merge(ta);ua=ta.get('offline-threading-id');va=ta.get('mid');}ua&&(pa[ua]=ta);va&&(qa[va]=ta);return sa.set(c('OzHelpers').msgID(ta),ta);},ra);});}var x=function na(oa,pa,qa){switch(qa){case 'messages':return w(oa,pa);case 'intents':case 'reminders':var ra=j().withMutations(function(ua){return ((oa||i()).reduce(function(va,wa){return va.set(wa.get('id'),wa);},ua));}),sa=pa.reduce(function(ua,va){var wa=va.get('id');return ua.set(wa,(ua.get(wa)||j()).merge(va));},ra).valueSeq().toList();return sa;case 'tasks':var ta=pa.map(function(ua){return ua.get('intent-id');}).toSet();return (oa.filterNot(function(ua){return ta.has(ua.get('intent-id'));}).concat(pa));case 'light-thread':return oa&&pa;default:return pa;}},y=function na(oa){return oa.set('tasks-by-intent',oa.get('tasks',i()).groupBy(function(pa){return pa.get('intent-id');}));},z=function na(oa){typeof oa==='function'||h(0);return function(pa,qa){j.isMap(qa)&&j.isMap(pa)||h(0);var ra=qa.get(u),sa=(pa.get(ra)||j()).mergeWith(oa,qa),ta=y(sa);return pa.set(ra,ta);};},aa=c('Reflux').createStore({init:function na(){this.data=j();this.updatedAt=Date.now();this.listenTo(c('OzActions').updateThreads,this._onUpdateThreads);this.listenTo(c('OzActions').maybeUpdateThreads,this._onMaybeUpdateThreads);this.listenTo(c('OzActions').clearReassignState,this._onClearReassignState);this.listenTo(c('OzActions').deleteTask,this._onDeleteTask);},getInitialState:function na(){return this.data;},_onUpdateThreads:function na(oa){i.isList(oa)||h(0);this.data=this.data.withMutations(function(pa){return oa.reduce(z(x),pa);});this.updatedAt=Date.now();this.trigger(this.data);},_onMaybeUpdateThreads:function na(oa){i.isList(oa)||h(0);var pa=oa.filter(function(qa){return this.data.has(qa.get(u));}.bind(this));if(pa.isEmpty()){c('OzHelpers').debug('[threads] not updating partial threads');return;}this.data=this.data.withMutations(function(qa){return pa.reduce(z(x),qa);});this.updatedAt=Date.now();this.trigger(this.data);},_onClearReassignState:function na(){this.data=this.data.map(function(oa){return (oa.get('ui-reassign')?oa['delete']('ui-reassign'):oa);});this.trigger(this.data);},_onDeleteTask:function na(oa,pa){this.data=this.data.updateIn([oa,'tasks'],function(qa){return qa.filterNot(function(ra){return ra.get('id')===pa;});});this.trigger(this.data);},metrics:function na(){return j({threadCount:this.data.count(),taskCount:this.data.reduce(function(oa,pa){return pa.get('tasks',i()).count()+oa;},0)});}}),ba=c('Reflux').createStore({init:function na(){this.data=this._make(null,null);this.listenTo(c('OzActions').showDialog,this._onShowDialog);this.listenTo(c('OzActions').hideDialog,this._onHideDialog);},getInitialState:function na(){return this.data;},_make:function na(oa,pa){return {dialogClass:oa,dialogProps:pa};},_onShowDialog:function na(oa,pa){this.data=this._make(oa,pa);this.trigger(this.data);},_onHideDialog:function na(){this.data=this._make(null,null);this.trigger(this.data);}}),ca=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateMerchants,this._onUpdateMerchants);this.listenTo(c('OzActions').deleteMerchants,this._onDeleteMerchants);},getInitialState:function na(){return this.data;},_onUpdateMerchants:function na(oa){i.isList(oa)||h(0);this.data=this.data.withMutations(function(pa){return oa.reduce(function(qa,ra){var sa=ra.get('id'),ta=qa.get(sa,j()).merge(ra);return qa.set(sa,ta);},pa);});c('OzHelpers').debug('[oz] updated merchants',this.data.toJS());this.trigger(this.data);},_onDeleteMerchants:function na(oa){i.isList(oa)||h(0);this.data=oa.reduce(function(pa,qa){return pa['delete'](qa);},this.data);c('OzHelpers').debug('[oz] deleted merchants',this.data.toJS());this.trigger(this.data);},metrics:function na(){return j({merchantCount:this.data.count()});}}),da=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateReps,this._onUpdateReps);this.listenTo(c('OzActions').replaceReps,this._onReplaceReps);},getInitialState:function na(){return this.data;},_onReplaceReps:function na(oa){this.data=j().withMutations(function(pa){oa.reduce(function(qa,ra){return qa.set(ra.get('fbid'),ra);},pa);});this.trigger(this.data);},_onUpdateReps:function na(oa){this.data=this.data.withMutations(function(pa){return oa.reduce(function(qa,ra){return qa.mergeIn([ra.get('fbid')],ra);},pa);});this.trigger(this.data);},metrics:function na(){return j({repCount:this.data.count()});}}),ea=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').replaceHumans,this._onReplace);},getInitialState:function na(){return this.data;},_onReplace:function na(oa){this.data=oa;this.trigger(this.data);},metrics:function na(){return j({humanCount:this.data.count()});}}),fa=c('Reflux').createStore({init:function na(){this.data=j({queue:j({showTags:m(),hideTags:m()}),all:j({showTags:m(),hideTags:m()})});this.listenTo(c('OzActions').updateQueueFilters,this._onUpdateFilters);},getInitialState:function na(){return this.data;},_onUpdateFilters:function na(oa){this.data=this.data.merge(oa);this.trigger(this.data);}}),ga=c('Reflux').createStore({init:function na(){this._data=j();this.listenTo(c('OzActions').sendMessageStart,this._onShiftSending.bind(this,1));this.listenTo(c('OzActions').sendMessageFinish,this._onShiftSending.bind(this,-1));},getInitialState:function na(){return this._data;},_onShiftSending:function na(oa,pa){this._data=this._data.update(pa,function(qa){return (qa||0)+oa;});this.trigger(this._data);}}),ha=c('Reflux').createStore({init:function na(){this.data=j({byIntent:j(),byThread:j(),byId:j()});this.listenTo(c('OzActions').addHandledEvents,this._onAddHandledEvents);},getInitialState:function na(){return this.data;},_onAddHandledEvents:function na(oa){this.data=this.data.withMutations(function(pa){oa.reduce(function(qa,ra){return (qa.setIn(['byIntent',ra.get('intent-id'),ra.get('id')],ra).setIn(['byId',ra.get('id')],ra));},pa);});this.trigger(this.data);},metrics:function na(){return j({handledEventCount:this.data.get('byId').count()});}}),ia=c('Reflux').createStore({init:function na(){this.data=j({offsetMs:0});this.listenTo(c('OzActions').updateServerOffset,this._onUpdateServerOffset);},getInitialState:function na(){return this.offsetMs;},_onUpdateServerOffset:function na(oa){var pa=oa.offsetMs;this.data=this.data.set('offsetMs',pa);this.trigger(this.data);}}),ja=j({state:'loading',error:null,result:null,skip:false}),ka=c('Reflux').createStore({init:function na(){this.data=j({skywalker:ja,init:ja,'wit-intents':ja,merchants:ja,humans:ja,requirements:ja});this.listenTo(c('OzActions').updateLoadingState,this._onUpdateLoadingState);},getInitialState:function na(){return this.data;},_onUpdateLoadingState:function na(oa){var pa=oa.component,qa=oa.state,ra=oa.error,sa=oa.result,ta=oa.skip;c('OzHelpers').info('[store/loading] '+qa+' '+pa);if(!this.data.has(pa))c('OzHelpers').warn('[store/loading] '+pa+' wasn\'t listed in LoadingStore.init');this.data=this.data.set(pa,j({state:qa,error:ra,result:sa,skip:ta}));this.trigger(this.data);}}),la=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateCalendarEvents,this._onUpdateCalendarEvents);},getInitialState:function na(){return this.data;},_onUpdateCalendarEvents:function na(oa){var pa=oa.tid,qa=oa.calendarEvents,ra=qa&&qa.sort?qa:[];this.data=this.data.set(pa,ra.sort(function(sa,ta){var ua=new Date(sa.startDate),va=new Date(ta.startDate);return ua.getTime()-va.getTime();}));this.trigger(this.data);},metrics:function na(){return j({calendarEventCount:this.data.count()});}}),ma=c('Reflux').createStore({init:function na(){this.data=j({isStalled:false});this.listenTo(c('OzActions').skywalkerMessage,this._onSkywalkerMessage);this.listenTo(c('OzActions').skywalkerStalled,this._onSkywalkerStalled);},getInitialState:function na(){return this.data;},_onSkywalkerMessage:function na(oa){var pa=oa.timestamp;this.data=this.data.set('last-receive-ts',pa).set('isStalled',false);this.trigger(this.data);},_onSkywalkerStalled:function na(){this.data=this.data.set('isStalled',true);this.trigger(this.data);}});f.exports={ActiveThreadStore:t,BubbleStore:p,DialogStore:ba,MerchantStore:ca,AutopilotStore:q,QueueFilterStore:fa,RepStore:da,HumanStore:ea,LoadingStore:ka,RequirementStore:o,ThreadStore:aa,WitIntentStore:s,PendingMessageStateStore:ga,HandledEventsStore:ha,ServerOffsetStore:ia,CalendarEventStore:la,SkywalkerStore:ma};}),null);
__d('OzAJAX',['invariant','Promise','OzHelpers','OzNotify','OzConfig','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i={metrics:{pendingCount:0,requestCount:0,failedCount:0,totalRequestMs:0,averageRequestMs:0},updateMetricsStart:function m(){i.metrics.pendingCount+=1;},updateMetricsEnd:function m(n,o){var p=i.metrics;p.pendingCount-=1;if(!n.status||n.status===0||n.status>399)p.failedCount+=1;p.requestCount+=1;p.totalRequestMs+=o;p.averageRequestMs=Math.round(p.totalRequestMs/p.requestCount);},ajax:function m(n){var o=n.type,p=n.headers,q=n.params,r=n.body,s=n.url;q=k(q);var t={type:o,url:s,headers:p,params:q,body:r};i.updateMetricsStart();var u=Date.now();return j(t).then(function(v){i.updateMetricsEnd(v,Date.now()-u);return JSON.parse(v.responseText);},function(v){i.updateMetricsEnd(v,Date.now()-u);var w=void 0;try{w=JSON.parse(v.responseText);}catch(x){}l(w||{},v,t);throw w||v;});},beacon:function m(n){window.navigator&&window.navigator.sendBeacon||h(0);var o=n.params,p=n.body,q=n.url;o=k(o);return window.navigator.sendBeacon(new (c('URI'))(q).addQueryData(o).toString(),new Blob([p],{type:'application/json'}));},buildURI:function m(){var n=c('OzConfig').getStaticConfig('API_PATH');n||h(0);for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return [n].concat(p).join('/');}};function j(m){var n=m.type,o=m.headers,p=m.params,q=m.body,r=m.url;return new (c('Promise'))(function(s,t){var u=new XMLHttpRequest(),v=new (c('URI'))(r);if(p)v.addQueryData(p);u.timeout=1000*60*3;u.open(n,v.toString(),true);if(o)for(var w=Object.keys(o),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var z;if(x){if(y>=w.length)break;z=w[y++];}else{y=w.next();if(y.done)break;z=y.value;}var aa=z;u.setRequestHeader(aa,o[aa]);}u.onreadystatechange=function(){if(u.readyState!==4)return;if(u.status===200){s(u);}else t(u);};u.send(q);});}function k(m){c('OzConfig').getStaticConfig('authToken')||h(0);c('OzConfig').getStaticConfig('uid')||h(0);c('OzConfig').getStaticConfig('API_VERSION')||h(0);return babelHelpers['extends']({xs:c('OzConfig').getStaticConfig('authToken'),c_user:c('OzConfig').getStaticConfig('uid'),rep_name:c('OzConfig').getStaticConfig('fullName'),v:c('OzConfig').getStaticConfig('API_VERSION')},m);}function l(m,n,o){c('OzHelpers').error('[oz-api] backend rejected',m,n,o);var p=m.error||'Something went wrong, the team has been notified already.';if(m.info){c('OzNotify').info(p);}else if(n.status===400){c('OzNotify').warn(p);}else if(n.status===0){c('OzNotify').error('Something went wrong. If this continues, please contact the Wit oncall');}else c('OzNotify').error(p);}f.exports=i;}),null);
__d('OzDateTimePicker.react',['cssVar','cx','OzHelpers','joinClasses','AbstractDateTimePicker.react','AdsTimezone','Arbiter','BUIDatePicker.react','BUITimeInput.react','DatePickerRestraints','immutable','LocalDateTime','OzConfig','ReactComponentWithPureRenderMixin','React','ReactDOM','Reflux','SUIAudiencePlatformTheme','SUITheme','SUITimeZoneSelector.react','Timezone','XUIError.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes,m=c('immutable').Map,n=c('React').createClass({displayName:'OzDateTimePicker',mixins:[c('ReactComponentWithPureRenderMixin'),c('Reflux').connect(c('OzConfig').ConfigStore,'config')],propTypes:babelHelpers['extends']({dateRestraints:l.arrayOf(l.func),disabled:l.bool,height:l.oneOf(['short','tall']),layout:l.oneOf(['one-line','two-line','three-line']),onChange:l.func.isRequired,showTimezoneName:l.bool,timestamp:l.number,timezone:l.string},c('XUIError.react').PropTypes),getDefaultProps:function w(){return {dateRestraints:u(),disabled:false,height:'short',layout:'one-line',showTimezoneName:true,timezone:q()};},render:function w(){var x=this.props,y=x.className,z=x.dateRestraints,aa=x.disabled,ba=x.height,ca=x.layout,da=x.onChange,ea=x.showTimezoneName,fa=x.timestamp,ga=x.timezone,ha=x.xuiError,ia=x.xuiErrorAlignh,ja=x.xuiErrorPosition,ka=babelHelpers.objectWithoutProperties(x,['className','dateRestraints','disabled','height','layout','onChange','showTimezoneName','timestamp','timezone','xuiError','xuiErrorAlignh','xuiErrorPosition']),la={xuiError:ha,xuiErrorAlignh:ia,xuiErrorPosition:ja},ma=t(ga),na=o(fa,ma),oa=c('joinClasses')("_3hma"+(aa?' '+"_3hmb":''),y),pa=ca==='two-line'&&ea&&202||!ea&&110||'auto';return (c('React').createElement(c('XUIError.react'),la,c('React').createElement('div',{className:oa},c('React').createElement(c('AbstractDateTimePicker.react'),babelHelpers['extends']({},ka,{className:"_3hmc",classNames:{innerWrapper:"_3hmd"},datePicker:c('React').createElement(c('BUIDatePicker.react'),{className:"_3hme",dateRestraints:this._dateRestraints(ma),height:ba,placeholder:'mm/dd/yyyy'}),disabled:aa,onChange:function(qa){return this._handleChange(qa,ma);}.bind(this),timeInput:c('React').createElement(c('BUITimeInput.react'),{className:"_3hml"+(ca!=='three-line'?' '+"_3hmm":'')+(ca==='three-line'?' '+"_3hmn":''),height:ba}),timezoneID:ma,value:na})),c('React').createElement(v,{style:!fa&&{display:'none'},className:"_3hmo"+(ca==='one-line'?' '+"_3hmm":'')+(ca!=='one-line'?' '+"_3hmn":''),isDisabled:aa,onChange:function(qa){return this._handleChange(na,qa.get('timeZoneId'));}.bind(this),shouldShowSubtitleInSelector:ea,value:c('SUITimeZoneSelector.react').VALUE({timeZoneId:ma}),width:pa}))));},_handleChange:function w(x,y){var z=p(x,y),aa=r(y);this.props.onChange({timestamp:z,timezone:aa});},_dateRestraints:function w(x){return this.props.dateRestraints&&this.props.dateRestraints.map(function(y){return (function(z){return y(z&&z.toDateTime(x).toDate());});});}});function o(w,x){try{if(w&&x!=null){return c('LocalDateTime').fromInstant(Math.round(w/1000),x);}else return null;}catch(y){c('OzHelpers').warn('[dateTimePicker] cannot convert to LocalDateTime',w,x,y);return null;}}function p(w,x){try{if(w&&x!=null){var z=w.toInstant(x)*1000,aa=z-z%60000;return aa;}else return null;}catch(y){c('OzHelpers').warn('[dateTimePicker] cannot convert from LocalDateTime',w,x,y);return null;}}function q(){var w=c('Timezone').getEnvironmentTimezoneID();w==null&&c('OzHelpers').warn('[dateTimePicker] could not get environment time zone');return r(w);}function r(w){var x=c('AdsTimezone').names[w];x==null&&c('OzHelpers').warn('[dateTimePicker] unknown timezone id',w);return x;}var s=m(c('AdsTimezone').names.map(function(w,x){return [w,x];}));function t(w){var x=s.get(w);x===undefined&&c('OzHelpers').warn('[timezoneIDForName] unrecognized timezone',w);return x||s.get('America/Los_Angeles');}function u(){var w=new Date(),x=new Date(Date.UTC(w.getFullYear(),w.getMonth(),w.getDate())),y=new Date(+x),z=new Date(+x);y.setFullYear(x.getFullYear()-5);z.setFullYear(x.getFullYear()+5);return [c('DatePickerRestraints').enforceDateIsNoEarlierThan(y),c('DatePickerRestraints').enforceDateIsNoLaterThan(z)];}j=babelHelpers.inherits(v,c('React').PureComponent);k=j&&j.prototype;v.prototype.componentDidMount=function(){'use strict';c('ReactDOM').findDOMNode(this.refs.timezoneSelector).addEventListener('focusout',function(w){return window.setTimeout(function(x){return c('Arbiter').inform('reflow');});});};v.prototype.render=function(){'use strict';return (c('React').createElement(c('SUITimeZoneSelector.react'),babelHelpers['extends']({},this.props,{ref:'timezoneSelector',theme:c('SUIAudiencePlatformTheme')})));};function v(){'use strict';j.apply(this,arguments);}n.timezoneIDForName=t;f.exports=n;}),null);
__d('MediaEffectMetadataScheduleDatePicker.react',['cx','fbt','DateConsts','DatePickerRestraints','DateTime','Grid.react','Link.react','MediaEffectMetadataValidationUtils','OzDateTimePicker.react','React','XUICloseButton.react','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Grid.react').GridItem;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataScheduleDatePicker2=function(s){var t=s&&s.timezone;if(!s||!s.timestamp){this.props.onEndTimeChange(null,t);}else this.props.onEndTimeChange(new Date(s.timestamp),t);}.bind(this),this.$MediaEffectMetadataScheduleDatePicker3=function(s){var t=s&&s.timezone;if(!s||!s.timestamp){this.props.onStartTimeChange(null,t);}else this.props.onStartTimeChange(new Date(s.timestamp),t);}.bind(this),this.$MediaEffectMetadataScheduleDatePicker4=function(){if(!this.props.startTime)return;var s=new Date(this.props.startTime);s.setDate(s.getDate()+c('DateConsts').DAYS_PER_WEEK);this.props.onEndTimeChange(s,this.props.timezone);}.bind(this),this.$MediaEffectMetadataScheduleDatePicker5=function(){this.props.onEndTimeChange(null,this.props.timezone);}.bind(this),o;}m.prototype.$MediaEffectMetadataScheduleDatePicker1=function(){var n=this.props,o=n.startTime,p=n.endTime,q=c('MediaEffectMetadataValidationUtils').validateTimeRange(o,p);if(!q)return i._("Time range is invalid.");return null;};m.prototype.render=function(){var n=this.props.startTime||new Date(),o=c('OzDateTimePicker.react').timezoneIDForName(this.props.timezone),p=[c('DatePickerRestraints').enforceDateIsNoEarlierThan(c('DateTime').now(o).startOfDay().toDate())],q=this.props.multistep?'one-line':'two-line',r=null;if(this.props.endTime){var s=this.props.endTime,t=new (c('DateTime'))(s/1000,o);p.push(c('DatePickerRestraints').enforceDateIsNoLaterThan(t.endOfDay().toDate()));var u=new (c('DateTime'))(n/1000,o);r=c('React').createElement(c('OzDateTimePicker.react'),{dateRestraints:[c('DatePickerRestraints').enforceDateIsNoEarlierThan(u.startOfDay().toDate())],disabled:this.props.disabled,height:'tall',layout:q,onChange:this.$MediaEffectMetadataScheduleDatePicker2,timestamp:s.getTime(),timezone:this.props.timezone,xuiError:this.$MediaEffectMetadataScheduleDatePicker1()});}else r=this.props.disabled?i._("Not specified"):c('React').createElement(c('Link.react'),{onClick:this.$MediaEffectMetadataScheduleDatePicker4},i._("add an end date"));var v=this.props.multistep?"_9vd":"_9vf";return (c('React').createElement(c('Grid.react'),{alignv:'middle',className:"_3-8m",cols:3},c('React').createElement(l,null,c('React').createElement(c('XUIText.react'),null,i._("Start"))),c('React').createElement(l,null,c('React').createElement('div',{className:c('joinClasses')(v,"_3-8h _2pir")},c('React').createElement(c('OzDateTimePicker.react'),{dateRestraints:p,disabled:this.props.disabled,height:'tall',layout:q,onChange:this.$MediaEffectMetadataScheduleDatePicker3,timestamp:n.getTime(),timezone:this.props.timezone}))),c('React').createElement(l,null),c('React').createElement(l,null,c('React').createElement(c('XUIText.react'),null,i._("End"))),c('React').createElement(l,null,c('React').createElement('div',{className:c('joinClasses')(v,"_3-8h _2pir")},r)),c('React').createElement(l,null,this.props.endTime&&!this.props.disabled?c('React').createElement(c('XUICloseButton.react'),{className:"_3-9a",onClick:this.$MediaEffectMetadataScheduleDatePicker5,size:'small'}):null)));};f.exports=m;}),null);
__d('MediaEffectMetadataSchedule.react',['cx','fbt','MediaEffectEditorFunnelLogger','MediaEffectMetadataScheduleDatePicker.react','React','XUIRadioList.react','MediaEffectCard.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectMetadataSchedule1=function(t){if(t==='no_constrain'){this.props.onDateRangeChange(null,null,null);}else this.props.onDateRangeChange(new Date(),null,null);}.bind(this),this.$MediaEffectMetadataSchedule4=function(t,u){var v=this.props.startTime;c('MediaEffectEditorFunnelLogger').logChangeEndTime();this.props.onDateRangeChange(v,t,u);}.bind(this),this.$MediaEffectMetadataSchedule5=function(t,u){var v=this.props.endTime;c('MediaEffectEditorFunnelLogger').logChangeStartTime();this.props.onDateRangeChange(t,v,u);}.bind(this),p;}n.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{multistep:this.props.multistep,title:i._("Schedule"),tooltip:i._("Once your frame is approved by Facebook, it can be available for people to use immediately or within a date range.")},c('React').createElement(c('XUIRadioList.react'),{disabled:this.props.disabled,onValueChange:this.$MediaEffectMetadataSchedule1,selectedValue:this.$MediaEffectMetadataSchedule2()},c('React').createElement(l,{value:'no_constrain',disabled:this.props.disabled},i._("Make active once approved")),c('React').createElement(l,{value:'specified',disabled:this.props.disabled},i._("Set a start and end date"))),this.$MediaEffectMetadataSchedule3());};n.prototype.$MediaEffectMetadataSchedule2=function(){if(this.props.startTime||this.props.endTime){return 'specified';}else return 'no_constrain';};n.prototype.$MediaEffectMetadataSchedule3=function(){if(this.$MediaEffectMetadataSchedule2()!=='specified')return null;return c('React').createElement('div',{className:"_2pis"},c('React').createElement(c('MediaEffectMetadataScheduleDatePicker.react'),babelHelpers['extends']({onEndTimeChange:this.$MediaEffectMetadataSchedule4,onStartTimeChange:this.$MediaEffectMetadataSchedule5},this.props)));};n.propTypes={endTime:m.oneOfType([m.oneOf([null]),m.instanceOf(Date)]),onDateRangeChange:m.func.isRequired,startTime:m.oneOfType([m.oneOf([null]),m.instanceOf(Date)]),timezone:m.string};f.exports=n;}),null);
__d('MediaEffectWarnings.react',['cx','List.react','React','XUICard.react','XUICardSection.react','XUINotice.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.message,o=m.items,p=o&&o.length>0?c('React').createElement(c('List.react'),{className:"_45qz"},o.map(function(q,r){return c('React').createElement('li',{key:r},q.trim());})):null;return (c('React').createElement(c('XUICard.react'),{className:"_2ex6 _3-8x _190n"},c('React').createElement(c('XUICardSection.react'),{background:'transparent',className:"_190n",style:{borderTop:'none'}},c('React').createElement(c('XUINotice.react'),{use:'warn'},n,p))));};function l(){i.apply(this,arguments);}l.propTypes={message:k.any,items:k.array};f.exports=l;}),null);
__d('MediaEffectRejectedReviewResult.react',['fbt','MediaEffectWarnings.react','React','Link.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=h._("Your frame wasn't approved because it doesn't meet the Camera Effects Platform {terms} and {policies}",[h.param('terms',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_terms',target:'_blank'},h._("terms"))),h.param('policies',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_policies',target:'_blank'},h._("policies.")))]);return (c('React').createElement(c('MediaEffectWarnings.react'),{message:m,items:this.props.reasons}));};function l(){i.apply(this,arguments);}l.propTypes={reasons:k.array};f.exports=l;}),null);
__d('MediaEffectMetadataContainer.react',['cx','FXEntMediaEffectSubmissionStatus','FluxContainer','immutable','MediaEffectFBOnlyPermissionExplanationCard.react','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationStepsConfig','MediaEffectFrameEditorDispatcher','MediaEffectMetadataActionCreators','MediaEffectMetadataCategoryAndTags.react','MediaEffectMetadataFBOnly.react','MediaEffectMetadataLocation.react','MediaEffectMetadataNameContainer.react','MediaEffectMetadataOwner.react','MediaEffectMetadataSchedule.react','MediaEffectMetadataStore','MediaEffectMetadataViewStore','MediaEffectRejectedReviewResult.react','MediaEffectWarnings.react','React','SUIBusinessTheme','SUICard.react','XUICard.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MediaEffectFrameCreationStepsConfig').CreationSteps,l=c('immutable').List,m=c('immutable').Map;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore'),c('MediaEffectMetadataViewStore')];};n.calculateState=function(o,p){var q=c('MediaEffectMetadataStore').getState(),r=c('MediaEffectMetadataViewStore').getState(),s=q.get('thumbnail'),t=q.get('selectedOwnerID'),u=c('MediaEffectFrameCreationStepsConfig').getStep(p.flowType,c('MediaEffectFrameCreateDialogDataStore').getState().get('validatingStep')),v=u===k.TARGETING;return {catalogGKs:q.get('fbCatalogGKs'),effectHasText:q.get('effectHasText'),eligibilityGKs:q.get('fbEligibilityGKs'),endTime:q.get('endTime'),errors:r.get('errors'),humanReadableDescription:q.get('humanReadableDescription'),instructions:r.get('instructions'),locales:q.get('locales'),locationPageID:q.get('locationPageID'),name:q.get('name'),offlineOnly:!!q.get('offlineOnly'),ownersData:r.get('ownersData'),pageLiked:q.get('fbPageLiked'),rankWeight:q.get('fbRankWeight'),rankingStrategy:r.get('fbRankingStrategy'),rejectReasons:q.get('rejectReasons'),startTime:q.get('startTime'),selectedCategoryID:q.get('selectedCategoryID'),selectedInstructionID:q.get('selectedInstructionID'),selectedOwner:c('MediaEffectMetadataViewStore').getOwner(t),selectedOwnerID:t,selectedTemplateCategoryID:q.get('selectedTemplateCategoryID'),selfBirthday:!!q.get('selfBirthday'),tags:q.get('tags'),templateCategories:r.get('templateCategories'),thumbnailName:s&&s.name,thumbnailURI:s?URL.createObjectURL(s):q.get('thumbnailURI'),timezone:q.get('timezone'),timingSchedule:q.get('timingSchedule'),whitelistCheckEligibility:q.get('fbWhitelistCheckEligibility'),whitelistedUsers:q.get('fbWhitelistedUsers'),isValidating:v,locationTarget:q.get('locationTarget')};};n.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores([c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore'),c('MediaEffectMetadataViewStore')]);};n.prototype.render=function(){var o=this.state,p=o.endTime,q=o.locationPageID,r=o.locationTarget,s=o.name,t=o.ownersData,u=o.rejectReasons,v=o.selectedCategoryID,w=o.selectedOwner,x=o.selectedOwnerID,y=o.startTime,z=o.tags,aa=o.timezone,ba=babelHelpers.objectWithoutProperties(o,['endTime','locationPageID','locationTarget','name','ownersData','rejectReasons','selectedCategoryID','selectedOwner','selectedOwnerID','startTime','tags','timezone']),ca=ba.catalogGKs,da=ba.effectHasText,ea=ba.eligibilityGKs,fa=ba.humanReadableDescription,ga=ba.instructions,ha=ba.locales,ia=ba.offlineOnly,ja=ba.pageLiked,ka=ba.rankingStrategy,la=ba.rankWeight,ma=ba.selectedInstructionID,na=ba.selectedTemplateCategoryID,oa=ba.selfBirthday,pa=ba.templateCategories,qa=ba.timingSchedule,ra=ba.thumbnailName,sa=ba.thumbnailURI,ta=ba.whitelistCheckEligibility,ua=ba.whitelistedUsers,va=this.props.bootstrapData.metadataJSData.submissionStatus,wa=!!this.props.bootstrapData.metadataJSData.id,xa=va===c('FXEntMediaEffectSubmissionStatus').DRAFT||va===c('FXEntMediaEffectSubmissionStatus').DENIED||w&&w.isFirstParty,ya=this.state.errors.toArray().map(function(bb,cb){return (c('React').createElement(c('MediaEffectWarnings.react'),{items:bb.messageItems,key:cb+bb.code,message:bb.message||''}));}),za=this.props.bootstrapData.multistep,ab=za?"_2041":"_204g";return (c('React').createElement('div',{className:c('joinClasses')(ab,'mediaEffectMetadataContainer/noBorder')},u&&u.length?c('React').createElement(c('MediaEffectRejectedReviewResult.react'),{reasons:u}):null,ya,c('React').createElement(c('SUICard.react'),{className:"_2pin",theme:c('SUIBusinessTheme'),type:za?'padded':'fullbleed'},c('React').createElement(c('MediaEffectMetadataNameContainer.react'),{disabled:!xa,flowType:this.props.flowType,multistep:za}),c('React').createElement(c('MediaEffectMetadataOwner.react'),{disabled:wa,isValidating:this.state.isValidating,multistep:za,onOwnerChange:c('MediaEffectMetadataActionCreators').changeOwner,ownersData:t,selectedOwnerID:x}),c('React').createElement('div',{className:"_204i"}),w&&this.props.context.allowLocationFrameCreation?c('React').createElement('div',null,c('React').createElement(c('MediaEffectMetadataLocation.react'),{isValidating:this.state.isValidating,locationPageID:q,locationTarget:r,multistep:za,onLocationDescriptionLoaded:c('MediaEffectMetadataActionCreators').setPlaceDescription,onLocationPageSelected:c('MediaEffectMetadataActionCreators').changeLocationPage,onLocationTargetSelected:c('MediaEffectMetadataActionCreators').changeLocationTarget,selectedOwner:w}),c('React').createElement('div',{className:"_204i"})):null,c('React').createElement(c('MediaEffectMetadataSchedule.react'),{endTime:p,multistep:za,onDateRangeChange:c('MediaEffectMetadataActionCreators').changeScheduleRange,startTime:y,timezone:aa}),c('React').createElement('div',{className:"_204i"}),c('React').createElement(c('MediaEffectMetadataCategoryAndTags.react'),{multistep:za,onAddTag:c('MediaEffectMetadataActionCreators').addTag,onCategorySelected:c('MediaEffectMetadataActionCreators').changeCategory,onRemoveTag:c('MediaEffectMetadataActionCreators').removeTag,selectedCategoryID:v,tags:z})),this.props.context.includesFBOnly?c('React').createElement(c('XUICard.react'),{className:"_3-8x"},c('React').createElement(c('MediaEffectMetadataFBOnly.react'),{catalogGKs:ca,effectHasText:da,eligibilityGKs:ea,humanReadableDescription:fa,instructions:ga,locales:ha,offlineOnly:ia,pageLiked:ja,rankingStrategy:ka,rankWeight:la,selectedInstructionID:ma,selectedTemplateCategoryID:na,selfBirthday:oa,templateCategories:pa,timingSchedule:qa,thumbnailName:ra,thumbnailURI:sa,whitelistCheckEligibility:ta,whitelistedUsers:ua})):null,this.props.context.explainFBOnly?c('React').createElement(c('MediaEffectFBOnlyPermissionExplanationCard.react'),{explanationLink:this.props.context.explainFBOnly}):null));};function n(){i.apply(this,arguments);}f.exports=c('FluxContainer').create(n,{withProps:true});}),null);
__d('MediaEffectMetadataName.react',['cx','fbt','MediaEffectCard.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataValidationUtils','React','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectMetadataName2=function(event){c('MediaEffectEditorFunnelLogger').logChangeName();this.props.onNameChange(event.target.value);}.bind(this);this.props.handleServerValidationResponse(m.nameData);}l.prototype.componentWillReceiveProps=function(m){this.props.handleServerValidationResponse(m.nameData);};l.prototype.$MediaEffectMetadataName1=function(){if(this.props.isValidating){var m=c('MediaEffectMetadataValidationUtils').validateName(this.props.nameData);if(!m)return i._("You must provide a name.");}if(this.props.isError)return i._("Invalid name");return null;};l.prototype.render=function(){return (c('React').createElement(c('MediaEffectCard.react'),{multistep:this.props.multistep,title:i._("Frame Name"),tooltip:i._("The name identifies your frame. People can search for your frame using the name.")},c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",disabled:this.props.disabled,height:'tall',onChange:this.$MediaEffectMetadataName2,placeholder:i._("Add name"),value:this.props.nameData,xuiError:this.$MediaEffectMetadataName1()},this.props.nameData)));};f.exports=l;}),null);
__d("XMediaEffectNameValidationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/datasource\/name_validation\/",{name:{type:"String"}});}),null);
__d('MediaEffectMetadataNameContainer.react',['AsyncRequest','FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationStepsConfig','MediaEffectMetadataActionCreators','MediaEffectMetadataName.react','MediaEffectMetadataStore','React','XMediaEffectNameValidationController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MediaEffectFrameCreationStepsConfig').CreationSteps;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectMetadataNameContainer1=function(q){if(q){var r=c('XMediaEffectNameValidationController').getURIBuilder().getURI();new (c('AsyncRequest'))(r).setData({name:q}).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(this.$MediaEffectMetadataNameContainer2).send();}}.bind(this),m;}k.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore')];};k.calculateState=function(l,m){var n=c('MediaEffectFrameCreationStepsConfig').getStep(m.flowType,c('MediaEffectFrameCreateDialogDataStore').getState().get('validatingStep')),o=c('MediaEffectMetadataStore').getState().hasFrameNameError;return {isError:o,isValidating:n===j.TARGETING,nameData:c('MediaEffectMetadataStore').getState().get('name')};};k.prototype.$MediaEffectMetadataNameContainer2=function(l){var m=!l.payload.valid;c('MediaEffectMetadataActionCreators').updateNameValidation(m);};k.prototype.render=function(){return (c('React').createElement(c('MediaEffectMetadataName.react'),babelHelpers['extends']({},this.props,{handleServerValidationResponse:this.$MediaEffectMetadataNameContainer1,isError:this.state.isError,isValidating:this.state.isValidating,nameData:this.state.nameData,onNameChange:c('MediaEffectMetadataActionCreators').changeName})));};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MediaEffectTargetingStep.react',['cx','fbt','MediaEffectMetadataContainer.react','MediaEffectReactFrameEditorPreviewContainer.react','React','Vector','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=this.props,n=m.context,o=m.bootstrapData;return (c('React').createElement('div',{className:"_2i5k"},c('React').createElement('div',{className:"_2i5l"},c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Targeting")),c('React').createElement(c('MediaEffectMetadataContainer.react'),{bootstrapData:o,context:{allowLocationFrameCreation:n.allowLocationFrameCreation,explainFBOnly:n.explainFBOnly,includesFBOnly:n.includesFBOnly},flowType:this.props.flowType})),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Preview")),c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,625)}),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(625,400)})))));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('MediaEffectFrameCreateFooterStepper.react',['cx','MediaEffectFrameCreationStepsConfig','MediaEffectMetadataActionCreators','React','XUIStepper.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MediaEffectFrameCreationStepsConfig').CreationSteps,l=c('MediaEffectFrameCreationStepsConfig').ComponentConfigs,m=c('XUIStepper.react').Step;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectFrameCreateFooterStepper1=function(t){var u=this.props.flowType,v=c('MediaEffectFrameCreationStepsConfig').getStep(u,t);switch(v){case k.EDITING:return c('MediaEffectMetadataActionCreators').changeStep(t);case k.TARGETING:return this.props.isFrameValid&&c('MediaEffectMetadataActionCreators').changeStep(t);case k.REVIEW:return this.props.isMetadataValid&&c('MediaEffectMetadataActionCreators').changeStep(t);}return null;}.bind(this),p;}n.prototype.$MediaEffectFrameCreateFooterStepper2=function(){var o=this.props.flowType;return c('MediaEffectFrameCreationStepsConfig').getSteps(o).map(function(p){return (c('React').createElement(m,{key:p},l[p].label));});};n.prototype.render=function(){return (c('React').createElement(c('XUIStepper.react'),{className:"_3rc-",currentStep:this.props.currentStep,onStepSelected:this.$MediaEffectFrameCreateFooterStepper1,size:'small'},this.$MediaEffectFrameCreateFooterStepper2()));};f.exports=n;}),null);
__d('MediaEffectFrameCreateFooterStepperContainer.react',['FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreateFooterStepper.react','MediaEffectFrameCreationStepsConfig','MediaEffectFrameEditorDispatcher','MediaEffectMetadataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectMetadataStore')];};j.calculateState=function(){return {currentStep:c('MediaEffectFrameCreateDialogDataStore').getState().currentStep,isFrameValid:c('MediaEffectReactFrameEditorDataStore').isValidForSubmit(),isMetadataValid:c('MediaEffectMetadataStore').getIsMetadataValid()};};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(j.getStores());};j.prototype.render=function(){var k=c('MediaEffectFrameCreationStepsConfig').getSteps(this.props.flowType);return k.size>2?c('React').createElement(c('MediaEffectFrameCreateFooterStepper.react'),{currentStep:this.state.currentStep,flowType:this.props.flowType,isFrameValid:this.state.isFrameValid,isMetadataValid:this.state.isMetadataValid}):null;};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MediaEffectCreateDialog',['MediaEffectEditorFunnelLogger'],(function a(b,c,d,e,f,g){'use strict';var h={listenForClose:function i(j){j.subscribe('cancel',function(){c('MediaEffectEditorFunnelLogger').logCancel();});}};f.exports=h;}),null);