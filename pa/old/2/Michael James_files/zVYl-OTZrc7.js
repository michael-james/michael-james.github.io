if (self.CavalryLogger) { CavalryLogger.start_js(["hlSyQ"]); }

__d("FullViewType",[],(function a(b,c,d,e,f,g){f.exports={ENTIRE_UNIT:1};}),null);
__d('BrowseClientEventLogger',['Banzai','SearchLoggingOptions'],(function a(b,c,d,e,f,g){var h='browse_client_event_session',i='search_www_click_error',j='21.',k={logData:function l(event,m,n,o){if(!event||!m)return;o=o||{};o.event=event;o.client_time=Math.floor(Date.now());o.client_time_2=Date.now()/1000;o.session_id=m;o.vertical=n;this.processedSessions=this.processedSessions||[];if(this.processedSessions.indexOf(m)!==-1)return;var p=o.event==='click'&&o.clicked_href!==undefined&&c('SearchLoggingOptions').signalLinkClicks;c('Banzai').post(h,[o],{delay:0,retry:true,signal:p});},logClick:function l(m){m.gt.event='click';this.maybeLogVisiblityEvent(m,true);},maybeLogClientViewEvent:function l(m){m.event='client_view';this.maybeLogVisiblityEvent(m);},maybeLogVisiblityEvent:function l(m,n){var o=null;if(n){o=m;m=m.gt;}if(!m||!m.xt||m.xt.indexOf(j)!==0){if(n)c('Banzai').post(i,[o],{delay:0,retry:true});return;}var p=JSON.parse(m.xt.substring(3));if(n){p.click_type=m.click_type;p.tn=m.tn;p.clicked_href=m.clicked_href;}var event=m.event;if(event==='vpvd'){if(!m.ft)return;p.vpvd_time=m.ft.vpvd_time_delta;}this.logData(event,p.session_id,p.vertical,p);},logImpression:function l(m){m.event='impression';this.maybeLogVisiblityEvent(m);}};f.exports=k;}),null);
__d("GamesGogglesSwitch",[],(function a(b,c,d,e,f,g){var h=false,i={enable:function j(){h=true;},isEnabled:function j(){return h;}};f.exports=i;}),null);
__d('VisibilityTrackingHelper',['Arbiter','DesktopHscrollUnitEventConstants','getViewportDimensions','Event'],(function a(b,c,d,e,f,g){var h={getEventListeners:function i(j){return [c('Event').listen(document,'DOMContentLoaded',j),c('Event').listen(window,'scroll',j),c('Event').listen(window,'resize',j),c('Arbiter').subscribe(c('DesktopHscrollUnitEventConstants').HSCROLL_ITEM_SHOWN_EVENT,j)];},getViewportInfo:function i(){return c('getViewportDimensions')();}};f.exports=h;}),null);
__d('VisibilityTracking',['Banzai','BrowseClientEventLogger','DataAttributeUtils','ErrorUtils','ScriptPath','SubscriptionsHandler','Visibility','VisibilityTrackingHelper','collectDataAttributes','getElementPosition','pageID','throttle'],(function a(b,c,d,e,f,g){var h='visibility_tracking',i='[data-vistracking]',j=500,k=50,l=50,m=50,n=50,o={VISIBLE:'visible',HIDDEN:'hidden'},p={BROWSER:'browser',DEFAULT:'default',REMOVED:'removed'},q=0;function r(s){'use strict';s=s||{};if(!s.bypass_banzai_check&&!c('Banzai').isEnabled(h))return;this.visibleElementInfo={};this.getDataFromConfig(s);c('Visibility').addListener(c('Visibility').VISIBLE,c('ErrorUtils').guard(function(){return this.fireEvent(p.BROWSER);}.bind(this),'VisibilityTracking:visible',this));c('Visibility').addListener(c('Visibility').HIDDEN,c('ErrorUtils').guard(function(){return this.clearAllVisibleElements(p.BROWSER);}.bind(this),'VisibilityTracking:hidden',this));c('ScriptPath').subscribe(c('ErrorUtils').guard(function(){return this.updateVisibleElements();}.bind(this),'VisibilityTracking:scriptPath',this));c('Banzai').subscribe(c('Banzai').SHUTDOWN,c('ErrorUtils').guard(function(){return this.onUnload();}.bind(this),'VisibilityTracking:banzaiShutdown',this));this.fireEventCallback=c('throttle').acrossTransitions(c('ErrorUtils').guard(function(){return this.fireEvent();}.bind(this),'VisibilityTracking:fireEventCallback',this),this.timeout,this);this.listeners=new (c('SubscriptionsHandler'))();c('VisibilityTrackingHelper').getEventListeners(this.fireEventCallback).forEach(function(t){this.listeners.addSubscriptions(t);},this);if(this.extraInit)c('ErrorUtils').applyWithGuard(this.extraInit.bind(this));}r.prototype.getDataFromConfig=function(s){'use strict';this.config=s;this.root=s.root||document.documentElement;this.selector=s.selector||i;this.timeout=typeof s.timeout!=='undefined'?s.timeout:j;this.minOffsetVisibleFromBottom=typeof s.minOffsetVisibleFromBottom!=='undefined'?s.minOffsetVisibleFromBottom:k;this.minOffsetVisibleFromTop=typeof s.minOffsetVisibleFromTop!=='undefined'?s.minOffsetVisibleFromTop:l;this.minOffsetVisibleFromLeft=typeof s.minOffsetVisibleFromLeft!=='undefined'?s.minOffsetVisibleFromLeft:m;this.minOffsetVisibleFromRight=typeof s.minOffsetVisibleFromRight!=='undefined'?s.minOffsetVisibleFromRight:n;this.handleAllHiddenEvents=typeof s.handleAllHiddenEvents!=='undefined'?s.handleAllHiddenEvents:false;this.handleAllVisibleEvents=typeof s.handleAllVisibleEvents!=='undefined'?s.handleAllVisibleEvents:false;this.cacheTrackedElements=typeof s.cacheTrackedElements!=='undefined'?s.cacheTrackedElements:false;};r.prototype.getAllTrackedElements=function(){'use strict';if(!this.allTrackedElements){this.allTrackedElements={};var s=[];if(this.config.is_xtrackable){s=c('DataAttributeUtils').getXTrackableElements();}else if(this.root.querySelectorAll)s=this.root.querySelectorAll(this.selector);for(var t=0;t<s.length;t++){var u=this.getElementID(s[t]);this.allTrackedElements[u]=s[t];}}return this.allTrackedElements;};r.prototype.refreshAllTrackedElements=function(){'use strict';delete this.allTrackedElements;return this.getAllTrackedElements();};r.prototype.getDataToLog=function(s){'use strict';var t=Object.assign(c('collectDataAttributes')(s,['gt']).gt,{client_time:Date.now()/1000,time_spent_id:c('pageID'),script_path:c('ScriptPath').getScriptPath()});return t;};r.prototype.getElementID=function(s){'use strict';var t=s.$VisibilityTracking1;if(t)return t;s.$VisibilityTracking1=++q;return q;};r.prototype.sendDataToLog=function(s){'use strict';c('BrowseClientEventLogger').maybeLogVisiblityEvent(s);c('Banzai').post(h,s);};r.prototype.fireEvent=function(){var s=arguments.length<=0||arguments[0]===undefined?p.DEFAULT:arguments[0];'use strict';var t=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var u in t){var v=t[u],w=c('VisibilityTrackingHelper').getViewportInfo(),x=this.isVisible(v,w);if(!x&&(u in this.visibleElementInfo||this.handleAllHiddenEvents)){this.handleEvent(v,{name:o.HIDDEN,cause:s});}else if(x&&(!(u in this.visibleElementInfo)||this.handleAllVisibleEvents))this.handleEvent(v,{name:o.VISIBLE,cause:s});}this.clearUntrackedVisibleElements();};r.prototype.isVisible=function(s,t){'use strict';var u=c('getElementPosition')(s);return (u.x||u.y||u.width||u.height)&&u.y+u.height>=this.minOffsetVisibleFromTop&&u.y<=t.height-this.minOffsetVisibleFromBottom&&u.x+u.width>=this.minOffsetVisibleFromLeft&&u.x<=t.width-this.minOffsetVisibleFromRight;};r.prototype.handleEvent=function(s,event){'use strict';var t=this.getElementID(s),u=this.getDataToLog(s),v=void 0;if(event.name===o.VISIBLE){var w=Math.floor(Date.now()/1000);v=c('pageID').concat(':',w.toString(),':',this.getElementID(s).toString());this.visibleElementInfo[t]={visibility_id:v,elem:s};}else if(event.name===o.HIDDEN){if(t in this.visibleElementInfo){v=this.visibleElementInfo[t].visibility_id;delete this.visibleElementInfo[t];}if(event.cause===p.BROWSER)return;}this.sendDataToLog(Object.assign(u,{event:event.name,visibility_id:v}));};r.prototype.clearUntrackedVisibleElements=function(){'use strict';var s=this.getAllTrackedElements();for(var t in this.visibleElementInfo)if(!(t in s)){var u=this.visibleElementInfo[t];if(u.elem)this.handleEvent(u.elem,{name:o.HIDDEN,cause:p.REMOVED});}};r.prototype.clearAllVisibleElements=function(){var s=arguments.length<=0||arguments[0]===undefined?p.DEFAULT:arguments[0];'use strict';var t=this.getAllTrackedElements();for(var u in t)if(u in this.visibleElementInfo)this.handleEvent(t[u],{name:o.HIDDEN,cause:s});this.clearUntrackedVisibleElements();};r.prototype.updateVisibleElements=function(){'use strict';this.clearAllVisibleElements();this.fireEvent();};r.prototype.refreshAndFireEvent=function(){'use strict';this.refreshAllTrackedElements();this.fireEventCallback();};r.prototype.onUnload=function(){'use strict';this.clearAllVisibleElements();if(this.listeners){this.listeners.release();this.listeners=null;}if(this.extraCleanup)c('ErrorUtils').applyWithGuard(this.extraCleanup.bind(this));};r.init=function(s){'use strict';return new r(s);};r.EVENT=o;r.CAUSE=p;f.exports=r;}),null);
__d('GamesImpressionTracker',['cx','Arbiter','Banzai','Event','GamesGogglesSwitch','VisibilityTracking','throttle'],(function a(b,c,d,e,f,g,h){var i,j,k='data-gamesegoimp',l='data-gamesrankedimp',m=1000;function n(s){if(c('GamesGogglesSwitch').isEnabled())s.className=s.className+' '+"_1z5y";}function o(s){return function(){if(s){s();s=null;}};}i=babelHelpers.inherits(p,c('VisibilityTracking'));j=i&&i.prototype;p.prototype.handleEvent=function(s,event){'use strict';if(event.name===c('VisibilityTracking').EVENT.VISIBLE){var t=s.getAttribute(l);s.removeAttribute(l);if(t){n(s);t&&c('Banzai').post('games_ranked_imp',{data:t});}c('Event').listen(s,'mouseover',o(function(){c('Banzai').post('games_mouseover',{data:t});c('Event').listen(s,'mouseout',o(function(){c('Banzai').post('games_mouseout',{data:t});}));}));}};function p(){'use strict';i.apply(this,arguments);}var q=new p({selector:'[data-gamesrankedimp]',handleAllVisibleEvents:true,cacheTrackedElements:true}),r=c('throttle').acrossTransitions(function(){return q.fireEventCallback();},m,null);q.listeners.addSubscriptions(c('Event').listen(document,'mousemove',r),c('Event').listen(document,'click',r),c('Arbiter').subscribe('games_unit_loaded',function(){return q.refreshAllTrackedElements();}));}),null);
__d('ViewableImpressionUtils',['csx','cx','CSS'],(function a(b,c,d,e,f,g,h,i){var j={isHorizontallyOffscreen:function k(l,m,n){var o=Math.max(m.x,0),p=Math.min(m.x+m.width,n.width);return p-o<m.width||c('CSS').matchesSelector(l,".desktop_hscroll_offscreen");}};f.exports=j;}),null);
__d('FullViewLogger',['Banzai','ScriptPath','SubscriptionsHandler','URI'],(function a(b,c,d,e,f,g){h.logFromViewableImpressionTracker=function(i){'use strict';var j=new h();j.subscribeToTrackerEvents(i);};h.prototype.subscribeToTrackerEvents=function(i){'use strict';this.subscriptionsHandler=new (c('SubscriptionsHandler'))();this.subscriptionsHandler.addSubscriptions(i.addListener('full_view',this.onFullView,this));};h.prototype.onFullView=function(i){'use strict';if(this.$FullViewLogger1())this.$FullViewLogger2(i);var j={token:i.token,fullViewType:i.fullViewType,scriptPath:c('ScriptPath').getTopViewEndpoint()};c('Banzai').post('xtrackable:full_view',j);if(this.$FullViewLogger1())this.$FullViewLogger3(j);};h.prototype.$FullViewLogger1=function(){'use strict';return 0;};h.prototype.$FullViewLogger2=function(i){'use strict';};h.prototype.$FullViewLogger3=function(i){'use strict';};function h(){'use strict';}f.exports=h;}),null);
__d("PercentVisible",[],(function a(b,c,d,e,f,g){f.exports={NO_VISIBLE:-1,VISIBLE_0_PCT:0,VISIBLE_50_PCT:50,VISIBLE_100_PCT:100};}),null);
__d('ViewableImpressionTracker',['Banzai','BrowseClientEventLogger','DataAttributeUtils','DOM','FullViewType','NonBlockingIFrame','PercentVisible','Style','URI','ViewableImpressionUtils','WebSpeedExperiments','getElementPosition','getViewportDimensions','mixInEventEmitter'],(function a(b,c,d,e,f,g){function h(i,j,k){'use strict';this.id=i;this.element=j;this.config=k;this.iframe=null;this.viewableTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=false;this.waitForLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.iframeLogged=false;this.banzaiLogged=false;this.topLeftInViewport=false;this.bottomRightInViewport=false;}h.prototype.getID=function(){'use strict';return this.id;};h.prototype.getConfig=function(){'use strict';return this.config;};h.prototype.getPercentInViewport=function(){'use strict';var i=c('getViewportDimensions')(),j=c('getElementPosition')(this.element);return this.$ViewableImpressionTracker1(i,j);};h.prototype.$ViewableImpressionTracker2=function(i,j){'use strict';if(j.x<i.width&&j.x+j.width>0&&j.y<i.height&&j.y+j.height>0&&c('Style').get(this.element,'visibility')!=='hidden'&&c('Style').get(this.element,'opacity')!=='0'){var k=Math.max(j.x,0),l=Math.min(j.x+j.width,i.width),m=Math.max(j.y,0),n=Math.min(j.y+j.height,i.height);if(j.height*j.width===0)return 100;var o=100*(l-k)*(n-m)/(j.height*j.width);return o;}return 0;};h.prototype.$ViewableImpressionTracker1=function(i,j){'use strict';if(this.config.require_horizontally_onscreen&&c('ViewableImpressionUtils').isHorizontallyOffscreen(this.element,j,i))return 0;return this.$ViewableImpressionTracker2(i,j);};h.prototype.$ViewableImpressionTracker3=function(i,j){'use strict';var k=this.$ViewableImpressionTracker2(i,j);if(k===0){return c('PercentVisible').NO_VISIBLE;}else if(k<50){return c('PercentVisible').VISIBLE_0_PCT;}else if(k<100){return c('PercentVisible').VISIBLE_50_PCT;}else return c('PercentVisible').VISIBLE_100_PCT;};h.prototype.$ViewableImpressionTracker4=function(i,j){'use strict';var k=Math.max(j.y,0),l=Math.min(j.y+j.height,i.height),m=100*(l-k)/i.height;if(m<50){return c('PercentVisible').VISIBLE_0_PCT;}else if(m<100){return c('PercentVisible').VISIBLE_50_PCT;}else return c('PercentVisible').VISIBLE_100_PCT;};h.prototype.$ViewableImpressionTracker5=function(i,j){'use strict';var k=this.$ViewableImpressionTracker3(i,j);switch(k){case c('PercentVisible').VISIBLE_0_PCT:case c('PercentVisible').VISIBLE_50_PCT:case c('PercentVisible').VISIBLE_100_PCT:this.emit('viewability',{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:k});break;default:this.emit('hidden',{id:this.getID(),token:this.getToken()});break;}if(this.config.should_log_viewport_duration){var l=this.$ViewableImpressionTracker4(i,j);switch(l){default:this.emit('viewport_viewability',{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:l});break;}}};h.prototype.$ViewableImpressionTracker6=function(i,j){'use strict';if(c('Style').get(this.element,'visibility')==='hidden'||c('Style').get(this.element,'opacity')==='0')return false;var k=j.x,l=j.y,m=j.x+j.width,n=j.y+j.height;this.topLeftInViewport=this.topLeftInViewport||k>=0&&k<=i.width&&l>=0&&l<=i.height;this.bottomRightInViewport=this.bottomRightInViewport||m>=0&&m<=i.width&&n>=0&&n<=i.height;return this.topLeftInViewport&&this.bottomRightInViewport;};h.prototype.$ViewableImpressionTracker7=function(i,j){'use strict';if(this.hasEmittedFullViewEvent)return;if(this.$ViewableImpressionTracker6(i,j)){this.emit('full_view',{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:c('FullViewType').ENTIRE_UNIT});this.hasEmittedFullViewEvent=true;}};h.prototype.onVisible=function(){'use strict';this.isVisible=true;var i=c('getViewportDimensions')(),j=c('getElementPosition')(this.element),k=this.$ViewableImpressionTracker1(i,j),l=k>this.config.pixel_in_percentage;this.emit('visible',{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:k});if(this.config.should_log_viewability_duration)this.$ViewableImpressionTracker5(i,j);this.$ViewableImpressionTracker7(i,j);if(!l){this.$ViewableImpressionTracker8();return;}if(this.isLogged()){this.$ViewableImpressionTracker9();}else this.$ViewableImpressionTracker10();if(!this.waitForLogged&&!this.isLogged()){this.waitForLogged=true;this.viewableTimeout=setTimeout(function(){this.waitForLogged=false;var m=this.getPercentInViewport(),n=m>this.config.pixel_in_percentage;if(!n){this.$ViewableImpressionTracker11();return;}this.logImpression(1,{});this.$ViewableImpressionTracker9();}.bind(this),this.config.duration_in_ms);}};h.prototype.onHidden=function(){'use strict';this.emit('hidden',{id:this.getID(),token:this.getToken()});if(this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged){this.logNonViewableImpression();}else if(!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible)this.logNonViewableImpression();this.isVisible=false;if(this.waitForLogged){this.waitForLogged=false;clearTimeout(this.viewableTimeout);}if(this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0){this.waitForSubsequent=true;this.clearSubsequentTimeout=setTimeout(function(){this.waitForSubsequent=false;this.reset();if(this.isVisible)this.onVisible();}.bind(this),this.config.subsequent_gap_in_ms);}this.$ViewableImpressionTracker11();};h.prototype.onRemoved=function(){'use strict';this.isVisible=false;};h.prototype.getToken=function(){'use strict';return c('DataAttributeUtils').getDataAttribute(this.element,'data-xt');};h.prototype.logImpression=function(i,j){'use strict';if(this.isLogged())return;var k=this.getToken(),l=Math.floor(Date.now()/1000),m={xt:k,isv:i,cts:l};if(c('Banzai').isEnabled('xtrackable_clientview_batch')&&this.config.should_batch||this.config.vital_mode_for_ss||this.config.signal_mode_for_ss){var n=this.config.vital_mode_for_ss?c('Banzai').VITAL:{};n.signal=this.config.signal_mode_for_ss;this.logWithBanzai(m,n);}else this.logWithIFrame(Object.assign(m,j));};h.prototype.logNonViewableImpression=function(){'use strict';if(this.config.nonviewableEnabled){var i=this.getToken();c('Banzai').post('xtrackable:nonviewable',{xt:i});}this.isNonViewableLogged=true;};h.prototype.isLogged=function(){'use strict';return this.iframeLogged||this.banzaiLogged;};h.prototype.reset=function(){'use strict';if(this.iframeLogged)this.iframeLogged=false;if(this.iframe){c('DOM').remove(this.iframe);this.iframe=null;}if(this.banzaiLogged)this.banzaiLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.waitForLogged=false;this.waitForSubsequent=false;};h.prototype.logWithBanzai=function(i,j){'use strict';this.banzaiLogged=true;c('BrowseClientEventLogger').maybeLogClientViewEvent(i);c('Banzai').post('xtrackable:clientview_batch',i,j);};h.prototype.logWithIFrame=function(i){'use strict';this.iframeLogged=true;if(c('WebSpeedExperiments').non_blocking_tracker){c('NonBlockingIFrame').loadIFrame(new (c('URI'))(this.config.impressionURL).addQueryData(i).toString());}else{this.iframe=c('DOM').create('iframe',{src:new (c('URI'))(this.config.impressionURL).addQueryData(i),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});this.iframe.setAttribute('aria-hidden','true');c('DOM').appendContent(this.element,this.iframe);}};h.prototype.$ViewableImpressionTracker12=function(){'use strict';return 0;};h.prototype.$ViewableImpressionTracker8=function(){'use strict';if(this.$ViewableImpressionTracker12()){c('Style').set(this.element,'background-color','#abab9a');c('Style').set(this.element,'outline','3px solid #abab9a');}};h.prototype.$ViewableImpressionTracker10=function(){'use strict';if(this.$ViewableImpressionTracker12()){c('Style').set(this.element,'background-color','#e4f70a');c('Style').set(this.element,'outline','3px solid #e4f70a');}};h.prototype.$ViewableImpressionTracker11=function(){'use strict';if(this.$ViewableImpressionTracker12()){c('Style').set(this.element,'background-color',null);c('Style').set(this.element,'outline',null);}};h.prototype.$ViewableImpressionTracker9=function(){'use strict';if(this.$ViewableImpressionTracker12()){c('Style').set(this.element,'background-color','#047515');c('Style').set(this.element,'outline','3px solid #047515');}};c('mixInEventEmitter')(h,{visible:true,hidden:true,full_view:true,viewability:true,viewport_viewability:true});f.exports=h;}),null);
__d('ViewabilityDurationLogger',['Banzai','Map','PercentVisible','ViewableImpressionTracker'],(function a(b,c,d,e,f,g){'use strict';var h={FEED_UNIT:'feed_unit',VIEWPORT:'viewport'};i.logFromViewableImpressionTracker=function(j){var k=new i();k.subscribeToTrackerEvents(j);};function i(){this.$ViewabilityDurationLogger1=new (c('Map'))();this.$ViewabilityDurationLogger2=new (c('Map'))();this.$ViewabilityDurationLogger3=new (c('Map'))();this.$ViewabilityDurationLogger4=new (c('Map'))();this.$ViewabilityDurationLogger5=new (c('Map'))();}i.prototype.subscribeToTrackerEvents=function(j){j.addListener('viewability',this.onViewable.bind(this));j.addListener('viewport_viewability',this.onViewport.bind(this));j.addListener('hidden',this.onHidden.bind(this));};i.prototype.onViewable=function(event){var j=event.id,k=event.percentVisible,l=Date.now(),m=void 0;switch(k){case c('PercentVisible').VISIBLE_0_PCT:if(!this.$ViewabilityDurationLogger1.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_0_PCT,l,h.FEED_UNIT);m=this.$ViewabilityDurationLogger2.get(j);if(m){m.duration=l-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}m=this.$ViewabilityDurationLogger3.get(j);if(m){m.duration=l-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}break;case c('PercentVisible').VISIBLE_50_PCT:if(!this.$ViewabilityDurationLogger1.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_0_PCT,l,h.FEED_UNIT);if(!this.$ViewabilityDurationLogger2.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_50_PCT,l,h.FEED_UNIT);m=this.$ViewabilityDurationLogger3.get(j);if(m){m.duration=l-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}break;case c('PercentVisible').VISIBLE_100_PCT:if(!this.$ViewabilityDurationLogger1.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_0_PCT,l,h.FEED_UNIT);if(!this.$ViewabilityDurationLogger2.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_50_PCT,l,h.FEED_UNIT);if(!this.$ViewabilityDurationLogger3.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_100_PCT,l,h.FEED_UNIT);break;}};i.prototype.onViewport=function(event){var j=event.id,k=event.percentVisible,l=Date.now(),m=void 0;switch(k){case c('PercentVisible').VISIBLE_0_PCT:m=this.$ViewabilityDurationLogger4.get(j);if(m){m.duration=l-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}m=this.$ViewabilityDurationLogger5.get(j);if(m){m.duration=l-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}break;case c('PercentVisible').VISIBLE_50_PCT:if(!this.$ViewabilityDurationLogger4.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_50_PCT,l,h.VIEWPORT);m=this.$ViewabilityDurationLogger5.get(j);if(m){m.duration=l-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}break;case c('PercentVisible').VISIBLE_100_PCT:if(!this.$ViewabilityDurationLogger4.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_50_PCT,l,h.VIEWPORT);if(!this.$ViewabilityDurationLogger5.has(j))this.$ViewabilityDurationLogger6(event,c('PercentVisible').VISIBLE_100_PCT,l,h.VIEWPORT);break;}};i.prototype.onHidden=function(event){var j=event.id,k=Date.now(),l=this.$ViewabilityDurationLogger1.get(j),m=this.$ViewabilityDurationLogger2.get(j),n=this.$ViewabilityDurationLogger3.get(j);if(l){l.duration=k-l.startedTrackingTS;this.$ViewabilityDurationLogger7(l,j);}if(m){m.duration=k-m.startedTrackingTS;this.$ViewabilityDurationLogger7(m,j);}if(n){n.duration=k-n.startedTrackingTS;this.$ViewabilityDurationLogger7(n,j);}var o=this.$ViewabilityDurationLogger4.get(j);if(o){o.duration=k-o.startedTrackingTS;this.$ViewabilityDurationLogger7(o,j);}var p=this.$ViewabilityDurationLogger5.get(j);if(p){p.duration=k-p.startedTrackingTS;this.$ViewabilityDurationLogger7(p,j);}};i.prototype.$ViewabilityDurationLogger6=function(event,j,k,l){var m={token:event.token,startedTrackingTS:k,percentVisible:j,visibilityUnit:l};switch(j){case c('PercentVisible').VISIBLE_0_PCT:this.$ViewabilityDurationLogger1.set(event.id,m);break;case c('PercentVisible').VISIBLE_50_PCT:if(l===h.VIEWPORT){this.$ViewabilityDurationLogger4.set(event.id,m);}else this.$ViewabilityDurationLogger2.set(event.id,m);break;case c('PercentVisible').VISIBLE_100_PCT:if(l===h.VIEWPORT){this.$ViewabilityDurationLogger5.set(event.id,m);}else this.$ViewabilityDurationLogger3.set(event.id,m);break;}};i.prototype.$ViewabilityDurationLogger7=function(j,k){c('Banzai').post('xtrackable:viewability',j);var l=j.percentVisible,m=j.visibilityUnit;switch(l){case c('PercentVisible').VISIBLE_0_PCT:this.$ViewabilityDurationLogger1['delete'](k);break;case c('PercentVisible').VISIBLE_50_PCT:if(m===h.VIEWPORT){this.$ViewabilityDurationLogger4['delete'](k);}else this.$ViewabilityDurationLogger2['delete'](k);break;case c('PercentVisible').VISIBLE_100_PCT:if(m===h.VIEWPORT){this.$ViewabilityDurationLogger5['delete'](k);}else this.$ViewabilityDurationLogger3['delete'](k);break;}};f.exports=i;}),null);
__d('ViewableImpressionDurationLogger',['Banzai','Map'],(function a(b,c,d,e,f,g){'use strict';h.logFromViewableImpressionTracker=function(i){var j=new h();j.subscribeToTrackerEvents(i);};function h(){this.$ViewableImpressionDurationLogger1=new (c('Map'))();}h.prototype.subscribeToTrackerEvents=function(i){i.addListener('visible',this.onElementVisible.bind(this));i.addListener('hidden',this.onElementHidden.bind(this));};h.prototype.onElementVisible=function(event){if(this.$ViewableImpressionDurationLogger1.get(event.id))return null;var i={token:event.token,startedTrackingTS:this.getTimeNow()};this.$ViewableImpressionDurationLogger1.set(event.id,i);return i;};h.prototype.onElementHidden=function(event){var i=this.$ViewableImpressionDurationLogger1.get(event.id);if(!i)return false;i.trackingDuration=this.getTimeNow()-i.startedTrackingTS;return this.sendLog(event.id);};h.prototype.sendLog=function(i){var j=this.$ViewableImpressionDurationLogger1.get(i);if(!j||!j.trackingDuration)return false;c('Banzai').post('xtrackable:duration',j);this.$ViewableImpressionDurationLogger1['delete'](i);return true;};h.prototype.getTimeNow=function(){return parseFloat((Date.now()/1000).toFixed(2));};f.exports=h;}),null);
__d('ViewableImpressionHeatmapLogger',['Banzai'],(function a(b,c,d,e,f,g){h.logFromViewableImpressionTracker=function(i,j){'use strict';var k=new h(j);k.subscribeToTrackerEvents(i);};function h(i){'use strict';this.loggingDurationMS=i;this.trackingEntries={};}h.prototype.subscribeToTrackerEvents=function(i){'use strict';this.visibleSubscription=i.addListener('visible',this.onElementVisible,this);this.hiddenSubscription=i.addListener('hidden',this.onElementHidden,this);};h.prototype.onElementVisible=function(i){'use strict';var j=this.getCurrentTimestamp(),k=this.trackingEntries[i.id];if(!k){k=this.createTrackingEntry(i);this.beginTracking(i.id,k);j=k.startedTrackingTS;}k.viewportProgressEvents.push({timestamp:j,percentInViewport:i.percentInViewport.toFixed(2)});};h.prototype.onElementHidden=function(i){'use strict';var j=this.getCurrentTimestamp(),k=this.trackingEntries[i.id];if(!k)return;k.viewportProgressEvents.push({timestamp:j,percentInViewport:0});};h.prototype.onTrackingCompleted=function(i){'use strict';var j=this.trackingEntries[i];j.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:j.tracker.getPercentInViewport().toFixed(2)});if(this.$ViewableImpressionHeatmapLogger1())this.$ViewableImpressionHeatmapLogger2(i,j);this.logToServer(j);delete this.trackingEntries[i];};h.prototype.logToServer=function(i){'use strict';var j=i;delete j.tracker;c('Banzai').post('xtrackable:heatmap',j);};h.prototype.beginTracking=function(i,j){'use strict';this.trackingEntries[i]=j;setTimeout(function(){return this.onTrackingCompleted(i);}.bind(this),this.loggingDurationMS);};h.prototype.createTrackingEntry=function(i){'use strict';return {tracker:i.tracker,token:i.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]};};h.prototype.getCurrentTimestamp=function(){'use strict';return (Date.now()/1000).toFixed(2);};h.prototype.$ViewableImpressionHeatmapLogger1=function(){'use strict';return 0;};h.prototype.$ViewableImpressionHeatmapLogger2=function(i,j){'use strict';var k='Completed tracking for id '+i+' token='+j.token+' startedTrackingTS='+j.startedTrackingTS+'\n';j.viewportProgressEvents.forEach(function(l){k+='% in view: '+l.percentInViewport+' timestamp='+l.timestamp+'\n';});};f.exports=h;}),null);
__d('ViewableImpressionEventHandler',['DataAttributeUtils','FullViewLogger','ViewabilityDurationLogger','ViewableImpressionDurationLogger','ViewableImpressionHeatmapLogger','ViewableImpressionTracker','VisibilityTracking'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=1;h=babelHelpers.inherits(k,c('VisibilityTracking'));i=h&&h.prototype;k.prototype.extraInit=function(){this.impressionTrackers={};};k.prototype.getDataFromConfig=function(l){i.getDataFromConfig.call(this,l);this.doHeatmapLogging=l.doHeatmapLogging;this.heatmapLoggingDurationMS=l.heatmapLoggingDurationMS;l.impressionURL=l.impressionURL!==undefined?l.impressionURL:'/xti.php';l.nonviewableEnabled=l.nonviewableEnabled!==undefined?l.nonviewableEnabled:false;};k.prototype.getImpressionTracking=function(l){var m=this.getElementID(l),n=this.impressionTrackers[m];if(!n){var o=babelHelpers['extends']({},this.getConfigFromElement(l),this.config);n=new (c('ViewableImpressionTracker'))(m,l,o);this.impressionTrackers[m]=n;if(o.log_impression_duration)c('ViewableImpressionDurationLogger').logFromViewableImpressionTracker(n);if(this.doHeatmapLogging)c('ViewableImpressionHeatmapLogger').logFromViewableImpressionTracker(n,this.heatmapLoggingDurationMS);if(o.should_log_full_views)c('FullViewLogger').logFromViewableImpressionTracker(n);if(o.should_log_viewability_duration)c('ViewabilityDurationLogger').logFromViewableImpressionTracker(n);}return n;};k.prototype.handleEvent=function(l,event){var m=this.getImpressionTracking(l);if(!m)return;if(event.name===c('VisibilityTracking').EVENT.VISIBLE){m.onVisible();if(!this.visibleElementInfo[m.getID()])this.visibleElementInfo[m.getID()]={elem:l};}else if(event.name===c('VisibilityTracking').EVENT.HIDDEN){var n=m.getConfig();if(event.cause===c('VisibilityTracking').CAUSE.DEFAULT||n.log_visibility_hidden_when_browser_inactive&&event.cause===c('VisibilityTracking').CAUSE.BROWSER){m.onHidden();delete this.visibleElementInfo[m.getID()];}else if(event.cause===c('VisibilityTracking').CAUSE.REMOVED){m.onRemoved();delete this.visibleElementInfo[m.getID()];delete this.impressionTrackers[m.getID()];}}};k.prototype.getConfigFromElement=function(l){return JSON.parse(c('DataAttributeUtils').getDataAttribute(l,'data-xt-vimp'));};k.prototype.getElementID=function(l){if(!l.getAttribute('id'))l.setAttribute('id','xt_uniq_'+j++);return l.getAttribute('id');};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('ViewableImpressionTracking',['Arbiter','DesktopHscrollUnitEventConstants','ErrorUtils','LitestandMessages','Run','ViewableImpressionEventHandler','ViewableImpressionConfig'],(function a(b,c,d,e,f,g){var h={init:function i(){if(c('ViewableImpressionEventHandler').instance===undefined){c('ViewableImpressionEventHandler').instance=new (c('ViewableImpressionEventHandler'))(c('ViewableImpressionConfig'));c('ViewableImpressionEventHandler').instance.listeners.addSubscriptions(c('Arbiter').subscribe([c('LitestandMessages').STORIES_INSERTED,'AdsRefreshHandler/AdsLoaded','MPPInsights/ChartView','PhotoSnowliftAds/displayUnits','WebMessengerAdsControl/adjustAds',c('DesktopHscrollUnitEventConstants').HSCROLL_ITEM_INSERTED_EVENT,'WebVideoChannelAds/AdsLoaded','CommercialBreak/AdsLoaded'],c('ErrorUtils').guard(function(){c('ViewableImpressionEventHandler').instance.refreshAndFireEvent();},'ViewableImpressionTracking')));}c('Run').onLoad(function(){c('ViewableImpressionEventHandler').instance.refreshAndFireEvent();});}};f.exports=h;}),null);